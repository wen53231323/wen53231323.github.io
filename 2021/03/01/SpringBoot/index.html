<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>SpringBoot笔记 | 远方の博客</title><meta name="author" content="wen"><meta name="copyright" content="wen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="SpringBoot基础SpringBoot简介Spring Boot是一个用于创建独立、生产级别的Spring应用程序的框架。它简化了传统的Spring应用开发流程，提供了一种快速、方便的方式来配置和构建Spring应用。SpringBoot的主要特点如下  简化开发：Spring Boot提供了很多开箱即用的特性和功能，例如，自动注册Servlet、Filter和Listener，简化数据库访"><meta property="og:type" content="article"><meta property="og:title" content="SpringBoot笔记"><meta property="og:url" content="https://w_e_n.gitee.io/blog/2021/03/01/SpringBoot/index.html"><meta property="og:site_name" content="远方の博客"><meta property="og:description" content="SpringBoot基础SpringBoot简介Spring Boot是一个用于创建独立、生产级别的Spring应用程序的框架。它简化了传统的Spring应用开发流程，提供了一种快速、方便的方式来配置和构建Spring应用。SpringBoot的主要特点如下  简化开发：Spring Boot提供了很多开箱即用的特性和功能，例如，自动注册Servlet、Filter和Listener，简化数据库访"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://w_e_n.gitee.io/blog/2021/03/01/SpringBoot/SpringBoot.png"><meta property="article:published_time" content="2021-02-28T16:00:00.000Z"><meta property="article:modified_time" content="2023-08-13T09:28:36.148Z"><meta property="article:author" content="wen"><meta property="article:tag" content="SpringBoot"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://w_e_n.gitee.io/blog/2021/03/01/SpringBoot/SpringBoot.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://w_e_n.gitee.io/blog/2021/03/01/SpringBoot/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//static.cloudflareinsights.com"><link rel="preconnect" href="//www.clarity.ms"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?[object Object]";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script async src="https://www.googletagmanager.com/gtag/js?id=[object Object]"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","[object Object]")</script><script defer data-pjax="data-pjax" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;[object Object]&quot;}"></script><script>!function(t,e,c,n,a,r){t[c]=t[c]||function(){(t[c].q=t[c].q||[]).push(arguments)},(a=e.createElement(n)).async=1,a.src="https://www.clarity.ms/tag/[object Object]",(r=e.getElementsByTagName(n)[0]).parentNode.insertBefore(a,r)}(window,document,"clarity","script")</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"top_n_per_article":5,"unescape":true,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"SpringBoot笔记",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-08-13 17:28:36"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/%E5%A4%B4%E5%83%8F.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">62</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">35</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-compass"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/picture/"><i class="fa-fw fas fa-images"></i><span> 图片库</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐库</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 视频库</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><span>导航链接</span></a></li><li><a class="site-page child" href="/comment_loading/"><span>评论管理</span></a></li><li><a class="site-page child" href="/custom/"><span>自定义页</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(/2021/03/01/SpringBoot/SpringBoot.png)"><nav id="nav"><span id="blog-info"><a href="/" title="远方の博客"><span class="site-name">远方の博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-compass"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/picture/"><i class="fa-fw fas fa-images"></i><span> 图片库</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐库</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 视频库</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><span>导航链接</span></a></li><li><a class="site-page child" href="/comment_loading/"><span>评论管理</span></a></li><li><a class="site-page child" href="/custom/"><span>自定义页</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">SpringBoot笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-02-28T16:00:00.000Z" title="发表于 2021-03-01 00:00:00">2021-03-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-08-13T09:28:36.148Z" title="更新于 2023-08-13 17:28:36">2023-08-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="SpringBoot笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="SpringBoot基础"><a href="#SpringBoot基础" class="headerlink" title="SpringBoot基础"></a>SpringBoot基础</h1><h2 id="SpringBoot简介"><a href="#SpringBoot简介" class="headerlink" title="SpringBoot简介"></a>SpringBoot简介</h2><p>Spring Boot是一个用于创建独立、生产级别的Spring应用程序的框架。它简化了传统的Spring应用开发流程，提供了一种快速、方便的方式来配置和构建Spring应用。SpringBoot的主要特点如下</p><ul><li><strong>简化开发</strong>：Spring Boot提供了很多开箱即用的特性和功能，例如，自动注册Servlet、Filter和Listener，简化数据库访问（如JPA、MyBatis等）、缓存管理、安全认证等常用功能。</li><li><strong>简化配置</strong>：Spring Boot通过自动配置（Auto-configuration）功能，根据应用的类路径和依赖来自动推断和配置Spring应用所需的各种组件。开发者只需要进行少量的配置即可，减少了繁琐的XML配置，并提高了开发效率。</li><li><strong>注解驱动</strong>：Spring Boot采用注解驱动的开发方式，简化了开发者的编码工作，提高了开发效率。</li><li><strong>内嵌服务器</strong>：Spring Boot内嵌了常用的Web服务器（如Tomcat、Jetty等），无需手动配置和安装，可以直接运行Spring Boot应用程序。</li><li><strong>自动依赖管理</strong>：Spring Boot会根据项目的依赖关系自动管理和协调相关的库和版本，避免了版本冲突和依赖问题。</li><li><strong>Actuator监控功能</strong>：Spring Boot提供了Actuator模块，可以实时监控和管理Spring Boot应用程序的运行状态、健康状况、性能指标等。</li></ul><h2 id="内嵌服务器的更换"><a href="#内嵌服务器的更换" class="headerlink" title="内嵌服务器的更换"></a>内嵌服务器的更换</h2><h3 id="常见的内嵌服务器"><a href="#常见的内嵌服务器" class="headerlink" title="常见的内嵌服务器"></a>常见的内嵌服务器</h3><p>在 Spring Boot 中，提供了多种内嵌服务器可供选择，常见的内嵌服务器有 Tomcat、Jetty 和 Undertow。默认情况下，Spring Boot 使用 Tomcat 作为内嵌服务器</p><table><thead><tr><th>内置的服务器</th><th>简介</th></tr></thead><tbody><tr><td>Tomcat</td><td>Apache出品，最常用的内嵌服务器之一，稳定且经过长期验证，适用于传统的 Java Web 应用程序。</td></tr><tr><td>Jetty</td><td>轻量级、高性能的内嵌服务器，更适合现代、高并发的 Web 应用程序开发，负载性能远不及tomcat</td></tr><tr><td>Undertow</td><td>非阻塞的内嵌服务器，具有卓越的性能，适用于需要处理大量并发请求的场景，负载性能勉强跑赢Tomcat</td></tr></tbody></table><h3 id="更换为-Jetty"><a href="#更换为-Jetty" class="headerlink" title="更换为 Jetty"></a>更换为 Jetty</h3><p>因为Tomcat是默认加载的，更换服务器前提是把Tomcat排除掉</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- exclusions标签：依赖排除，排除Tomcat --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 添加 Jetty 依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jetty<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="更换为-Undertow"><a href="#更换为-Undertow" class="headerlink" title="更换为 Undertow"></a>更换为 Undertow</h3><p>因为Tomcat是默认加载的，更换服务器前提是把Tomcat排除掉</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- exclusions标签：依赖排除，排除Tomcat --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-tomcat<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 添加 Undertow 依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-undertow<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="程序的打包与运行"><a href="#程序的打包与运行" class="headerlink" title="程序的打包与运行"></a>程序的打包与运行</h2><h3 id="程序的打包"><a href="#程序的打包" class="headerlink" title="程序的打包"></a>程序的打包</h3><blockquote><p>在 Spring Boot 中，通常使用 Maven 进行项目的打包和构建</p></blockquote><p>步骤一：在项目的根目录下的 <code>pom.xml</code> 文件中添加以下插件配置</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><p>步骤二：在命令行或终端中进入项目的根目录，并执行以下命令进行打包，打包生成的 JAR 文件将存储在 <code>target</code> 目录下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mvn package</span><br></pre></td></tr></table></figure><h3 id="程序的运行"><a href="#程序的运行" class="headerlink" title="程序的运行"></a>程序的运行</h3><p>使用以下命令在命令行或终端中运行 Spring Boot 应用程序</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar &lt;jar文件名&gt;.jar</span><br></pre></td></tr></table></figure><h2 id="入门案例"><a href="#入门案例" class="headerlink" title="入门案例"></a>入门案例</h2><h3 id="添加父类依赖"><a href="#添加父类依赖" class="headerlink" title="添加父类依赖"></a>添加父类依赖</h3><p>在项目的<code>pom.xml</code>文件中，利用Maven的<code>&lt;parent&gt;</code>标签继承Spring Boot的父类依赖，这个依赖会引入许多常用的Spring Boot依赖和配置。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 继承Spring Boot的父类依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>myproject<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 其他配置和依赖项 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="添加场景依赖"><a href="#添加场景依赖" class="headerlink" title="添加场景依赖"></a>添加场景依赖</h3><p>根据实际需要，在<code>pom.xml</code>文件中添加相应的场景依赖。以开发Web程序为例，可以添加<code>spring-boot-starter-web</code>依赖，这样会引入Spring Web相关的依赖，用于开发基于HTTP协议的Web应用程序。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">project</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 继承Spring Boot的父类依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>myproject<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- Spring Web依赖 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 其他依赖 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="创建启动程序"><a href="#创建启动程序" class="headerlink" title="创建启动程序"></a>创建启动程序</h3><p>创建一个Java类，作为Spring Boot应用程序的入口。该类需要使用<code>@SpringBootApplication</code>注解进行标记，并包含一个<code>main</code>方法用于启动应用程序。这个类使用了<code>@SpringBootApplication</code>注解，它是一个复合注解，包括了<code>@Configuration</code>、<code>@EnableAutoConfiguration</code>和<code>@ComponentScan</code>等注解，简化了配置的编写。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MyApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="创建配置文件"><a href="#创建配置文件" class="headerlink" title="创建配置文件"></a>创建配置文件</h3><p>在<code>src/main/resources</code>目录下创建一个<code>application.properties</code>文件，用于配置应用程序的属性。可以根据需要添加相关配置项。</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 指定服务器的端口号为8080</span></span><br><span class="line"><span class="attr">server.port</span> = <span class="string">8080</span></span><br></pre></td></tr></table></figure><h3 id="创建控制器类"><a href="#创建控制器类" class="headerlink" title="创建控制器类"></a>创建控制器类</h3><p>创建一个控制器类，用于处理HTTP请求和返回响应。可以使用<code>@RestController</code>注解标记该类，并实现相应的请求处理方法。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/hello&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">hello</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Hello, Spring Boot!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="SpringBoot配置文件"><a href="#SpringBoot配置文件" class="headerlink" title="SpringBoot配置文件"></a>SpringBoot配置文件</h1><h2 id="配置文件名称"><a href="#配置文件名称" class="headerlink" title="配置文件名称"></a>配置文件名称</h2><blockquote><p>Spring Boot有两种常见的配置文件：Application配置文件和Bootstrap配置文件。</p></blockquote><h3 id="Application-配置文件"><a href="#Application-配置文件" class="headerlink" title="Application 配置文件"></a>Application 配置文件</h3><ul><li>Application配置文件是用于配置应用程序的核心配置信息。</li><li>Application配置文件通常用于配置应用程序的各种属性和设置，如数据库连接、日志级别、服务端口等。</li><li>Application 配置文件可位于项目的<code>根目录下</code>、<code>config/目录</code>、<code>src/main/resources/目录</code>或<code>src/main/resources/config/目录</code></li></ul><h3 id="Bootstrap-配置文件"><a href="#Bootstrap-配置文件" class="headerlink" title="Bootstrap 配置文件"></a>Bootstrap 配置文件</h3><ul><li>Bootstrap配置文件用于在应用程序启动之前进行配置。</li><li>Bootstrap配置文件主要用于配置Spring Cloud和外部配置服务器等特性。</li><li>Bootstrap 配置文件可位于项目的<code>根目录下</code>、<code>config/目录</code>、<code>src/main/resources/目录</code>或<code>src/main/resources/config/目录</code></li></ul><h2 id="配置文件格式"><a href="#配置文件格式" class="headerlink" title="配置文件格式"></a>配置文件格式</h2><blockquote><p>Spring Boot支持多种类型的配置文件格式，包括属性文件（.properties）、YAML文件（.yml或.yaml）等格，可以根据项目需求选择最合适的配置文件格式。</p></blockquote><h3 id="属性文件（-properties）"><a href="#属性文件（-properties）" class="headerlink" title="属性文件（.properties）"></a>属性文件（.properties）</h3><p>属性文件是一种基于键值对的配置文件格式，每行包含一个属性的键和值，使用等号（&#x3D;）或冒号（:）作为分隔符。属性文件的扩展名为<code>.properties</code>。</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置应用程序的端口号</span></span><br><span class="line"><span class="attr">server.port</span>=<span class="string">8080</span></span><br><span class="line"><span class="comment"># 连接数据库的URL</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/mydb</span></span><br><span class="line"><span class="comment"># 数据库用户名</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="comment"># 数据库密码</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">password</span></span><br></pre></td></tr></table></figure><h3 id="YAML文件（-yml或-yaml）"><a href="#YAML文件（-yml或-yaml）" class="headerlink" title="YAML文件（.yml或.yaml）"></a>YAML文件（.yml或.yaml）</h3><p>YAML是一种可读性很高的数据序列化格式。它使用缩进和层次结构来表示数据，并提供了更简洁的语法。YAML文件可以通过使用扩展名.yml或.yaml来标识。</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8080</span> <span class="comment"># 设置应用程序的端口号</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mydb</span> <span class="comment"># 连接数据库的URL</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span> <span class="comment"># 数据库用户名</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">password</span> <span class="comment"># 数据库用户名</span></span><br></pre></td></tr></table></figure><h2 id="读取配置文件"><a href="#读取配置文件" class="headerlink" title="读取配置文件"></a>读取配置文件</h2><h3 id="使用-Value注解读取配置文件"><a href="#使用-Value注解读取配置文件" class="headerlink" title="使用@Value注解读取配置文件"></a>使用@Value注解读取配置文件</h3><p>在Spring Boot中，可以通过@Value注解读取配置文件。例如有如下的配置文件</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mydb</span> <span class="comment"># 连接数据库的URL</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span> <span class="comment"># 数据库用户名</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">password</span> <span class="comment"># 数据库用户名</span></span><br></pre></td></tr></table></figure><p>可以使用@Value注解将这些值注入到Spring管理的Bean中</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.datasource.url&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String dbUrl;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.datasource.username&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String dbUsername;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Value(&quot;$&#123;spring.datasource.password&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String dbPassword;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;dbUrl: &quot;</span> + dbUrl);</span><br><span class="line">        System.out.println(<span class="string">&quot;dbUsername: &quot;</span> + dbUsername);</span><br><span class="line">        System.out.println(<span class="string">&quot;dbPassword: &quot;</span> + dbPassword);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用-ConfigurationProperties注解读取配置文件"><a href="#使用-ConfigurationProperties注解读取配置文件" class="headerlink" title="使用@ConfigurationProperties注解读取配置文件"></a>使用@ConfigurationProperties注解读取配置文件</h3><p><code>@ConfigurationProperties</code>注解用于将配置文件中的键值对映射到一个Java类上。例如有如下的配置文件</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mydb</span> <span class="comment"># 连接数据库的URL</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span> <span class="comment"># 数据库用户名</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">password</span> <span class="comment"># 数据库用户名</span></span><br></pre></td></tr></table></figure><p>创建一个Java类并提供Getter、Setter方法，使用<code>@Component</code>注解将<code>DataSourceConfig</code>类注入到Spring容器中，在类上添加<code>@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</code>注解，配置文件中以<code>spring.datasource</code>前缀开头的属性值将会映射到<code>DataSourceConfig</code>类的对应字段上。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataSourceConfig</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在其他组件（比如控制器、服务等）中通过<code>@Autowired</code>注解将<code>DataSourceConfig</code>类注入进来，并使用其中的属性</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataSourceConfig dataSourceConfig;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(dataSourceConfig.getUrl());</span><br><span class="line">        System.out.println(dataSourceConfig.getUsername());</span><br><span class="line">        System.out.println(dataSourceConfig.getPassword());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用-PropertySource注解读取配置文件"><a href="#使用-PropertySource注解读取配置文件" class="headerlink" title="使用@PropertySource注解读取配置文件"></a>使用@PropertySource注解读取配置文件</h3><p><code>@PropertySource</code>注解是Spring Framework中的一个注解，它用于指定外部属性文件的位置，并将其加载到Spring应用程序的环境中。例如有如下的配置文件</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mydb</span> <span class="comment"># 连接数据库的URL</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span> <span class="comment"># 数据库用户名</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">password</span> <span class="comment"># 数据库用户名</span></span><br></pre></td></tr></table></figure><p>创建一个Java类并提供Getter、Setter方法，使用<code>@Component</code>注解将<code>DataSourceConfig</code>类注入到Spring容器中，在类上添加<code>@PropertySource(value = &quot;classpath:application.yml&quot;,encoding = &quot;UTF-8&quot;)</code>注解，指定要加载的配置文件路径</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@Setter</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@PropertySource(value = &quot;classpath:application.yml&quot;,encoding = &quot;UTF-8&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DataSourceConfig</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String url;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在其他组件（比如控制器、服务等）中通过<code>@Autowired</code>注解将<code>DataSourceConfig</code>类注入进来，并使用其中的属性</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataSourceConfig dataSourceConfig;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(dataSourceConfig.getUrl());</span><br><span class="line">        System.out.println(dataSourceConfig.getUsername());</span><br><span class="line">        System.out.println(dataSourceConfig.getPassword());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用Environment类读取配置文件"><a href="#使用Environment类读取配置文件" class="headerlink" title="使用Environment类读取配置文件"></a>使用Environment类读取配置文件</h3><p><code>Environment</code>类是Spring Framework中的一个接口，它提供了访问应用程序环境配置属性的方法。通过<code>Environment</code>接口，可以获取和操作与应用程序相关的属性值。例如有如下的配置文件</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/mydb</span> <span class="comment"># 连接数据库的URL</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span> <span class="comment"># 数据库用户名</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">password</span> <span class="comment"># 数据库用户名</span></span><br></pre></td></tr></table></figure><p>使用<code>Environment</code>类的<code>getProperty</code>方法获取属性值</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> Environment environment;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(environment.getProperty(<span class="string">&quot;spring.datasource.url&quot;</span>));</span><br><span class="line">        System.out.println(environment.getProperty(<span class="string">&quot;spring.datasource.username&quot;</span>));</span><br><span class="line">        System.out.println(environment.getProperty(<span class="string">&quot;spring.datasource.password&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用Properties类读取配置文件"><a href="#使用Properties类读取配置文件" class="headerlink" title="使用Properties类读取配置文件"></a>使用Properties类读取配置文件</h3><p><code>Properties</code> 类是 Java 提供的一个用于处理属性文件的类。属性文件通常具有 <code>.properties</code> 扩展名，它以键值对的形式存储配置信息。有些场景不能使用注入的形式去获取配置文件中的参数时，可以使用这种方式。例如有如下的配置文件</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 连接数据库的URL</span></span><br><span class="line"><span class="attr">spring.datasource.url</span>:<span class="string">jdbc:mysql://localhost:3306/mydb</span></span><br><span class="line"><span class="comment"># 数据库用户名</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>:<span class="string">root</span></span><br><span class="line"><span class="comment"># 数据库用户名</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>:<span class="string">password</span></span><br></pre></td></tr></table></figure><p>使用 Properties 对象来读取配置文件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ConfigReader</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Properties</span> <span class="variable">properties</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 使用ClassLoader加载配置文件</span></span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">inputStream</span> <span class="operator">=</span> ClassLoader.getSystemResourceAsStream(<span class="string">&quot;application.properties&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (inputStream != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">// 加载配置文件</span></span><br><span class="line">                properties.load(inputStream);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 读取配置项</span></span><br><span class="line">                <span class="type">String</span> <span class="variable">url</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;spring.datasource.url&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;spring.datasource.username&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> properties.getProperty(<span class="string">&quot;spring.datasource.password&quot;</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 输出配置项值</span></span><br><span class="line">                System.out.println(<span class="string">&quot;URL: &quot;</span> + url);</span><br><span class="line">                System.out.println(<span class="string">&quot;Username: &quot;</span> + username);</span><br><span class="line">                System.out.println(<span class="string">&quot;Password: &quot;</span> + password);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;配置文件未找到&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="多环境配置"><a href="#多环境配置" class="headerlink" title="多环境配置"></a>多环境配置</h2><h3 id="多环境配置简介"><a href="#多环境配置简介" class="headerlink" title="多环境配置简介"></a>多环境配置简介</h3><p>在实际的项目开发中，一个项目通常会存在多个环境，例如：开发环境、测试环境和生产环境等。</p><p>不同环境的配置可能相同，例如开发环境会使用开发数据库，测试环境会使用测试数据库，而生产环境会使用线上的正式数据库</p><p>对于这个问题，可以通过Spring Boot的多环境配置来管理不同环境的配置文件，以便在不同的环境中使用不同的配置。</p><h3 id="创建不同环境的配置文件"><a href="#创建不同环境的配置文件" class="headerlink" title="创建不同环境的配置文件"></a>创建不同环境的配置文件</h3><p>针对不同的环境，可以创建不同的配置文件，通常是<code>application-&#123;环境名&#125;.properties</code>格式或<code>application-&#123;环境名&#125;.yml</code>格式</p><table><thead><tr><th>名称</th><th>含义</th></tr></thead><tbody><tr><td>application.yml</td><td>主配置文件，包含共享的通用配置属性。</td></tr><tr><td>application-dev.yml</td><td>开发环境的配置文件，包含针对开发环境所需的配置属性。</td></tr><tr><td>application-test.yml</td><td>测试环境的配置文件，包含针对测试环境所需的配置属性。</td></tr><tr><td>application-prod.yml</td><td>生产环境的配置文件，包含针对生产环境所需的配置属性。</td></tr></tbody></table><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/blog/2021/03/01/SpringBoot/四种配置文件.png" style="zoom:50%"><h3 id="指定激活的配置文件"><a href="#指定激活的配置文件" class="headerlink" title="指定激活的配置文件"></a>指定激活的配置文件</h3><p>方式一：在主配置文件application.yml或application.properties中使用<code>spring.profiles.active</code>属性，设置要激活的配置文件打开application.yml激活指定文件</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">profiles:</span></span><br><span class="line">    <span class="attr">active:</span> <span class="string">dev</span> <span class="comment"># 用来激活不同的环境</span></span><br></pre></td></tr></table></figure><p>方式二：在启动应用程序时使用<code>spring.profiles.active</code>参数来指定指定要激活的环境。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar app.jar --spring.profiles.active=dev</span><br></pre></td></tr></table></figure><h2 id="配置文件的优先级"><a href="#配置文件的优先级" class="headerlink" title="配置文件的优先级"></a>配置文件的优先级</h2><h3 id="从名称角度"><a href="#从名称角度" class="headerlink" title="从名称角度"></a>从名称角度</h3><p>如果只考虑文件名，那么：bootstrap &gt; application</p><h3 id="从配置文件后缀角度"><a href="#从配置文件后缀角度" class="headerlink" title="从配置文件后缀角度"></a>从配置文件后缀角度</h3><p>如果在同一目录下存在多个配置文件，它们的加载顺序是：.properties &gt; .yml &gt; .yaml</p><h3 id="从存放位置角度"><a href="#从存放位置角度" class="headerlink" title="从存放位置角度"></a>从存放位置角度</h3><p>SpringBoot的配置文件可以放到：项目根目录下、项目根目录中config目录下、项目的src&#x2F;main&#x2F;resources目录下、项目src&#x2F;main&#x2F;resources&#x2F;config目录下，他们的读取顺序如下：</p><ol><li>项目根目录中config目录下</li><li>项目根目录下</li><li>项目src&#x2F;main&#x2F;resources&#x2F;config目录下</li><li>项目的src&#x2F;main&#x2F;resources目录下</li></ol><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/blog/2021/03/01/SpringBoot/配置文件读取顺序.png" style="zoom:25%"><h3 id="从加载角度"><a href="#从加载角度" class="headerlink" title="从加载角度"></a>从加载角度</h3><ol><li>命令行参数（Command line arguments）</li><li>系统属性（System properties）</li><li>环境变量（Environment variables）</li><li>核心配置文件（<code>bootstrap.properties</code> 或 <code>bootstrap.yml</code>）</li><li>主配置文件（<code>application.properties</code>或<code>application.yml</code>）</li><li>环境配置文件（<code>application-&#123;环境名&#125;.properties</code>或<code>application-&#123;环境名&#125;.yml</code>）</li></ol><h1 id="SpringBoot常用功能"><a href="#SpringBoot常用功能" class="headerlink" title="SpringBoot常用功能"></a>SpringBoot常用功能</h1><h2 id="日志控制"><a href="#日志控制" class="headerlink" title="日志控制"></a>日志控制</h2><blockquote><p>Spring Boot默认使用的是Logback作为日志框架，Logback 是一个功能强大且灵活的日志框架，它是 Log4j 框架的后续版本</p></blockquote><h3 id="默认输出格式"><a href="#默认输出格式" class="headerlink" title="默认输出格式"></a>默认输出格式</h3><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/blog/2021/03/01/SpringBoot/SpringBoot日志默认输出格式.png" style="zoom:80%"><h3 id="配置输出格式"><a href="#配置输出格式" class="headerlink" title="配置输出格式"></a>配置输出格式</h3><p>可以通过修改配置文件来设置日志输出格式</p><ul><li><code>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125;</code>：输出日期和时间，格式为<code>yyyy-MM-dd HH:mm:ss.SSS</code>。</li><li><code>[%thread]</code>：输出线程名。</li><li><code>%-5level</code>：输出日志级别，占用5个字符的宽度。</li><li><code>%logger&#123;36&#125;</code>：输出日志所属类的名称，最多显示36个字符。</li><li><code>%msg%n</code>：输出日志消息，并换行。</li></ul><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">pattern:</span></span><br><span class="line">    <span class="attr">console:</span> <span class="string">&quot;%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;36&#125; - %msg%n&quot;</span></span><br></pre></td></tr></table></figure><h3 id="配置日志级别"><a href="#配置日志级别" class="headerlink" title="配置日志级别"></a>配置日志级别</h3><p>可以通过修改配置文件来设置日志级别</p><ol><li><code>TRACE（追踪）</code>：最低级别的日志级别，用于跟踪程序的内部细节。TRACE级别的日志通常包含非常详细的信息，比如方法调用、变量值等。这些日志消息对于诊断问题和调试非常有用，但在正常情况下往往不会被输出。</li><li><code>DEBUG（调试）</code>：用于调试应用程序的日志级别。DEBUG级别的日志包含有关程序流程、变量状态和其他调试信息的详细内容。这些日志消息可以帮助开发人员分析代码的执行过程和定位潜在问题。在生产环境中，一般不建议将日志级别设置为DEBUG，以避免日志过多对性能造成影响。</li><li><code>INFO（信息）</code>：用于提供应用程序运行时的重要信息。INFO级别的日志通常包含关键的业务事件、操作结果等信息，能够告知应用程序的当前状态和进展情况。INFO级别的日志是生产环境中最常用的级别之一，可用于监控应用程序的运行情况。</li><li><code>WARN（警告）</code>：用于表示潜在问题或不符合预期的情况，但不会影响应用程序的正常运行。WARN级别的日志通常用于记录可恢复的异常、配置问题、潜在的性能问题等。这些日志消息提醒开发人员或管理员需要注意，并可能需要采取一定的措施来防止潜在问题变成错误。</li><li><code>ERROR（错误）</code>：最高级别的日志级别，用于表示严重的错误或故障。ERROR级别的日志通常包含导致应用程序无法正常工作的异常、错误状态等信息。这些日志消息需要引起开发人员或管理员的关注，并及时采取措施来修复问题。</li></ol><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">logging:</span></span><br><span class="line">  <span class="attr">level:</span></span><br><span class="line">    <span class="attr">root:</span> <span class="string">INFO</span>   <span class="comment"># 根日志记录器设置为 INFO 级别。所有未匹配到特定日志记录器的日志消息都将使用此级别。</span></span><br><span class="line">    <span class="attr">com.example.package1:</span> <span class="string">DEBUG</span>   <span class="comment"># 将 com.example.package1 的日志记录器设置为 DEBUG 级别。</span></span><br><span class="line">    <span class="attr">com.example.package2:</span> <span class="string">WARN</span>   <span class="comment"># 将 com.example.package2 的日志记录器设置为 WARN 级别。</span></span><br></pre></td></tr></table></figure><h2 id="热加载"><a href="#热加载" class="headerlink" title="热加载"></a>热加载</h2><blockquote><p>使用SpringBoot开发的时候，修改完代码之后，想要查看修改后的效果，需要手动点击重启，才能让修改生效，十分浪费时间，可以使用或热部署（Hot Deployment）热加载（Hot Reload）避免手动重启程序，提高开发效率</p></blockquote><h3 id="热部署简介"><a href="#热部署简介" class="headerlink" title="热部署简介"></a>热部署简介</h3><ul><li>热部署是指在运行时部署或升级新的应用程序版本，以确保应用程序的高可用性和持续提供服务。</li><li>一些应用服务器（如Tomcat、Jetty等）支持热部署，可以通过在特定目录中放置更新后的文件来实现热部署。</li><li>热部署是在服务器运行时重新部署项目，会直接重新加载整个应用，耗时相对较高，一般是在<code>生产环境使用</code></li></ul><h3 id="热加载简介"><a href="#热加载简介" class="headerlink" title="热加载简介"></a>热加载简介</h3><ul><li>热加载是指在运行时替换代码或资源，以实现代码修改的即时生效，方便开发和调试</li><li>一些工具和框架（如Spring Boot DevTools、JRebel等）支持热加载，可以自动监测更改并将更改的类重新加载到运行的应用程序中。</li><li>热加载是在运行时重新加载 class，后台会启动一个线程不断检测你的类是否改变，一般是在<code>开发环境使用</code></li></ul><h3 id="使用spring-boot-devtools实现热加载"><a href="#使用spring-boot-devtools实现热加载" class="headerlink" title="使用spring-boot-devtools实现热加载"></a>使用spring-boot-devtools实现热加载</h3><blockquote><p><code>spring-boot-devtools</code> 是 Spring Boot 提供的一个开发者工具插件，它可以在开发阶段自动监测代码的修改并重新加载已加载的类，从而实现代码的即时生效。当你在开发过程中修改保存代码时，<code>spring-boot-devtools</code> 会自动检测到修改，并触发应用程序的重新加载，以便立即应用新的更改。</p></blockquote><p>第一步：在pom.xml添加依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>第二步：IntelliJ IDEA配置配置项目自动编译</p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/blog/2021/03/01/SpringBoot/IntelliJ IDEA配置配置项目自动编译.png" style="zoom:50%"><p>第三步：按住<code>Ctrl + Shift + alt + /</code> 打开Maintenance，选择Registry</p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/blog/2021/03/01/SpringBoot/打开Maintenance选择Registry.png" style="zoom:50%"><p>第四步：在新打开的页面中，勾选<code>compiler.automake.allow.when.app.running</code> 复选框</p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/blog/2021/03/01/SpringBoot/勾选compiler.automake.allow.when.app.running复选框.png" style="zoom:50%"><p>第五步：在配置文件application.yml中配置devtools</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">devtools:</span></span><br><span class="line">    <span class="attr">restart:</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span>  <span class="comment"># 设置开启热部署</span></span><br><span class="line">      <span class="attr">additional-paths:</span> <span class="string">src/main/java</span> <span class="comment"># 设置额外的路径，用于监视并重新加载修改过的文件</span></span><br><span class="line">      <span class="attr">exclude:</span> <span class="string">WEB-INF/**</span>  <span class="comment"># 排除文件（不重启项目）</span></span><br></pre></td></tr></table></figure><h3 id="使用springloaded实现热加载"><a href="#使用springloaded实现热加载" class="headerlink" title="使用springloaded实现热加载"></a>使用springloaded实现热加载</h3><blockquote><p><code>springloaded</code> 是一个用于 Java 应用程序的类热加载器。它可以在应用程序运行时替换类文件，以实现代码的即时生效，从而提供热加载的功能。当你在开发过程中修改保存代码时，<code>springloaded</code> 可以监测到代码的变化并重新加载已修改的类，这样你就无需重启整个应用程序来查看新的更改。</p></blockquote><p>第一步：在pom.xml添加依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.experimental<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>springloaded<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.8.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br></pre></td></tr></table></figure><p>第二步：配置Spring的启动配置</p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/blog/2021/03/01/SpringBoot/配置Spring的启动配置.png" style="zoom:50%"><p>第三步：在VM options里面输入 <code>-javaagent: &quot;jar包的位置&quot; -noverify</code></p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/blog/2021/03/01/SpringBoot/编写VM options配置.png" style="zoom:50%"><h2 id="指标监控（Actuator）"><a href="#指标监控（Actuator）" class="headerlink" title="指标监控（Actuator）"></a>指标监控（Actuator）</h2><h3 id="Actuator简介"><a href="#Actuator简介" class="headerlink" title="Actuator简介"></a>Actuator简介</h3><p>Spring Boot Actuator 是 Spring Boot 提供的一组监控和管理生产环境中应用程序的工具，用于公开应用程序的内部信息，并且可以方便地与其他监控工具集成。它通过暴露一组 RESTful 接口和端点，用于获取应用程序的健康状况、指标信息、环境配置等，这些端点可以通过HTTP 和 JMX 访问或者使用外部监控系统调用，从而实现对应用程序的监控和管理。</p><h3 id="Actuator简单使用"><a href="#Actuator简单使用" class="headerlink" title="Actuator简单使用"></a>Actuator简单使用</h3><p>步骤一：添加 <code>spring-boot-starter-actuator</code> 依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>步骤二：配置开启所有端点暴露，默认情况下 Actuator 端点只有 <code>/actuator/health</code> 和 <code>/actuator/info</code> 会被暴露，</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Actuator 监控配置</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">server:</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">8080</span>   <span class="comment"># Actuator 端口配置，默认是随机端口，配置后将使用指定的端口号</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">endpoint:</span>  <span class="comment"># 控制端点是否对外开放的配置（具体端点的配置）</span></span><br><span class="line">    <span class="attr">health:</span>  <span class="comment"># 端点名称</span></span><br><span class="line">      <span class="attr">show-details:</span> <span class="string">always</span>  <span class="comment"># 显示健康检查中所有指标的详细信息</span></span><br><span class="line">    <span class="attr">info:</span>  <span class="comment"># 端点名称</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span>  <span class="comment"># 打开 info 端点，用于提供有关应用程序的信息</span></span><br><span class="line">    <span class="attr">httptrace:</span>  <span class="comment"># 端点名称</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span>  <span class="comment"># 启用 httptrace 端点，用于跟踪 HTTP 请求和响应信息</span></span><br><span class="line">    <span class="attr">metrics:</span>  <span class="comment"># 端点名称</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span>  <span class="comment"># 启用 metrics 端点，用于收集和暴露应用程序的度量指标数据</span></span><br><span class="line">    <span class="attr">loggers:</span>  <span class="comment"># 端点名称</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span>  <span class="comment"># 启用 loggers 端点，用于配置日志记录器</span></span><br><span class="line">    <span class="attr">tracing:</span>  <span class="comment"># 端点名称</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span>  <span class="comment"># 启用 tracing 端点，用于跟踪请求的分布式追踪数据</span></span><br><span class="line">    <span class="attr">beans:</span>  <span class="comment"># 端点名称</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span>  <span class="comment"># 启用 beans 端点，用于查看应用程序中所有的 Spring Bean</span></span><br><span class="line">    <span class="attr">mappings:</span>  <span class="comment"># 端点名称</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span>  <span class="comment"># 启用 mappings 端点，用于查看应用程序中的 URL 映射关系</span></span><br><span class="line">    <span class="attr">env:</span>  <span class="comment"># 端点名称</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span>  <span class="comment"># 启用 env 端点，用于查看应用程序的环境变量</span></span><br><span class="line">    <span class="attr">configprops:</span>  <span class="comment"># 端点名称</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span>  <span class="comment"># 启用 configprops 端点，用于查看应用程序的配置属性</span></span><br><span class="line">    <span class="attr">shutdown:</span>  <span class="comment"># 端点名称</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span>  <span class="comment"># 打开 shutdown 端点，允许通过 POST 请求关闭应用程序</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">endpoints:</span>  <span class="comment"># 控制端点是否对外开放的配置（全部端点的配置）</span></span><br><span class="line">    <span class="attr">web:</span> <span class="comment"># Web 端点的配置</span></span><br><span class="line">      <span class="attr">base-path:</span> <span class="string">/actuator</span>  <span class="comment"># 修改 Actuator 端点的访问路径，默认是 /actuator</span></span><br><span class="line">      <span class="attr">exposure:</span>  <span class="comment"># 暴露端点的配置</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&quot;*&quot;</span>  <span class="comment"># 将所有 Actuator 端点都暴露出来，包括自定义的端点，默认只能访问 health 和 info 端点</span></span><br><span class="line">    <span class="attr">jmx:</span> <span class="comment"># JMX 端点的配置</span></span><br><span class="line">      <span class="attr">exposure:</span>  <span class="comment"># 暴露端点的配置</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&quot;*&quot;</span>  <span class="comment"># 将所有 JMX 端点都暴露出来</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">enabled-by-default:</span> <span class="literal">true</span>  <span class="comment"># 是否开启默认端点，默认值为 true</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">metrics:</span>  <span class="comment"># 度量指标的配置</span></span><br><span class="line">    <span class="attr">export:</span>  <span class="comment"># 数据导出的配置</span></span><br><span class="line">      <span class="attr">prometheus:</span>  <span class="comment"># Prometheus 导出器的配置</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span>  <span class="comment"># 启用 Prometheus 数据导出，将度量指标数据暴露给 Prometheus 监控系统</span></span><br></pre></td></tr></table></figure><p>步骤三：访问<code>http://localhost:8080/actuator</code>查看可被健康检查的指标</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">	<span class="attr">&quot;_links&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">		<span class="attr">&quot;self&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 当前资源的链接</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;beans&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 获取应用程序中所有 bean 的链接</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/beans&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;caches-cache&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 获取指定缓存的链接（使用占位符）</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/caches/&#123;cache&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;caches&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 获取应用程序中所有缓存的链接</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/caches&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;health&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 获取应用程序健康状况的链接</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/health&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;health-path&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 根据指定路径获取应用程序健康状况的链接（使用占位符）</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/health/&#123;*path&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;info&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 获取应用程序信息的链接</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/info&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;conditions&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 获取应用程序条件报告的链接</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/conditions&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;configprops&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 获取应用程序配置属性的链接</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/configprops&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;configprops-prefix&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 根据指定前缀获取应用程序配置属性的链接（使用占位符）</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/configprops/&#123;prefix&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;env&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 获取应用程序环境变量的链接</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/env&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;env-toMatch&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 根据指定匹配模式获取应用程序环境变量的链接（使用占位符）</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/env/&#123;toMatch&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;loggers&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 获取应用程序日志记录器的链接</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/loggers&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;loggers-name&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 根据指定名称获取应用程序日志记录器的链接（使用占位符）</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/loggers/&#123;name&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;heapdump&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 获取应用程序堆转储的链接</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/heapdump&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;threaddump&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 获取应用程序线程转储的链接</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/threaddump&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;metrics&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 获取应用程序度量指标的链接</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/metrics&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;metrics-requiredMetricName&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 根据指定度量指标名称获取应用程序度量指标的链接（使用占位符）</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/metrics/&#123;requiredMetricName&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;scheduledtasks&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 获取应用程序定时任务的链接</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/scheduledtasks&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">		<span class="attr">&quot;mappings&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span> <span class="comment">// 获取应用程序请求映射的链接</span></span><br><span class="line">			<span class="attr">&quot;href&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://localhost:8080/actuator/mappings&quot;</span><span class="punctuation">,</span></span><br><span class="line">			<span class="attr">&quot;templated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">		<span class="punctuation">&#125;</span></span><br><span class="line">	<span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>步骤四：访问 Actuator 常见内置端点</p><ul><li>健康检查：访问 <code>/actuator/health</code> 端点，获取应用程序的健康状况信息。</li><li>信息展示：访问 <code>/actuator/info</code> 端点，获取应用程序的自定义信息。</li><li>度量指标：访问 <code>/actuator/metrics</code> 端点，获取应用程序的度量指标信息。</li><li>URL 映射关系：访问 <code>/actuator/mappings</code> 端点，获取应用程序中的所有 URL 映射关系。</li><li>环境变量：访问 <code>/actuator/env</code> 端点，获取应用程序的环境变量信息。</li><li>Bean 信息：访问 <code>/actuator/beans</code> 端点，获取应用程序中所有的 Spring Bean 信息。</li><li>日志配置：访问 <code>/actuator/loggers</code> 端点，获取应用程序的日志配置和日志级别。</li><li>关闭应用程序：访问 <code>/actuator/shutdown</code> 端点，关闭应用程序（需要配置启用该功能）。</li></ul><h3 id="设置端点启停"><a href="#设置端点启停" class="headerlink" title="设置端点启停"></a>设置端点启停</h3><p>可以在配置文件中使用<code>enable</code>属性控制端点是否对外开放。其中health端点为默认端点，不能关闭</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Actuator 监控配置</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoint:</span> <span class="comment"># 控制端点是否对外开放</span></span><br><span class="line">    <span class="attr">health:</span> <span class="comment"># 端点名称</span></span><br><span class="line">      <span class="attr">show-details:</span> <span class="string">always</span> <span class="comment"># 显示健康检查中所有指标的详细信息</span></span><br><span class="line">    <span class="attr">httptrace:</span> <span class="comment"># 端点名称</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># 启用httptrace端点，用于跟踪HTTP请求和响应信息</span></span><br><span class="line">    <span class="attr">metrics:</span> <span class="comment"># 端点名称</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># 启用metrics端点，用于收集和暴露应用程序的度量指标数据</span></span><br><span class="line">    <span class="attr">shutdown:</span> <span class="comment"># 端点名称</span></span><br><span class="line">      <span class="attr">enabled:</span> <span class="literal">true</span> <span class="comment"># 打开shutdown端点，允许通过POST请求关闭应用程序</span></span><br></pre></td></tr></table></figure><h3 id="自定义监控指标"><a href="#自定义监控指标" class="headerlink" title="自定义监控指标"></a>自定义监控指标</h3><p>步骤一：创建自定义监控指标端点 <code>CustomMetricsEndpoint.java</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="comment">// 声明该类为一个 Actuator 端点，拥有唯一的 ID，即 &quot;custommetrics&quot;。enableByDefault 参数表示该端点默认启用。</span></span><br><span class="line"><span class="meta">@Endpoint(id = &quot;custommetrics&quot;, enableByDefault = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CustomMetricsEndpoint</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用 @ReadOperation 注解表示这是一个读取操作的端点方法</span></span><br><span class="line">    <span class="meta">@ReadOperation</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getCustomValue</span><span class="params">()</span> &#123;</span><br><span class="line">        HashMap&lt;Object, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;value&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>步骤二：配置自定义监控指标的端点暴露路径</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoints:</span></span><br><span class="line">    <span class="attr">web:</span></span><br><span class="line">      <span class="attr">exposure:</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">custommetrics</span> <span class="comment"># 将自定义监控指标端点 custommetrics 添加到暴露的端点列表中</span></span><br></pre></td></tr></table></figure><p>步骤三：启动应用程序并访问自定义监控指标</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET http://localhost/actuator/custommetrics</span><br></pre></td></tr></table></figure><p>获取到的信息</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;value&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="可视化监控平台"><a href="#可视化监控平台" class="headerlink" title="可视化监控平台"></a>可视化监控平台</h3><h4 id="Spring-Boot-Admin简介"><a href="#Spring-Boot-Admin简介" class="headerlink" title="Spring Boot Admin简介"></a>Spring Boot Admin简介</h4><p><a target="_blank" rel="noopener" href="https://github.com/codecentric/spring-boot-admin">Spring Boot Admin</a>是一个用于管理和监控Spring Boot应用程序的开源项目，建立在 Actuator 之上，提供了更加友好和强大的可视化监控界面和管理功能，能够将 Actuator 中的信息进行界面化的展示，也可以监控所有 Spring Boot 应用的健康状况，提供实时警报功能。</p><h4 id="Spring-Boot-Admin客户端与服务端"><a href="#Spring-Boot-Admin客户端与服务端" class="headerlink" title="Spring Boot Admin客户端与服务端"></a>Spring Boot Admin客户端与服务端</h4><p>一个 Spring Boot Admin 服务端可以监控多个客户端应用程序</p><ul><li>客户端：负责将自己的监控信息发送给服务端（被监控者）</li><li>服务端：负责接收和展示客户端发送的信息（监控者）</li></ul><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/blog/2021/03/01/SpringBoot/Spring Boot Admin客户端与服务端.png" style="zoom:50%"><h4 id="Spring-Boot-Admin客户端搭建"><a href="#Spring-Boot-Admin客户端搭建" class="headerlink" title="Spring Boot Admin客户端搭建"></a>Spring Boot Admin客户端搭建</h4><p>步骤一：新建模块，添加<code>spring-boot-admin-starter-client</code>依赖，版本与当前使用的springboot版本保持一致，并将其配置成web工程</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>de.codecentric<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-admin-starter-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>步骤二：创建application.yml配置文件，设置当前客户端将信息上传到哪个服务器上，并配置开放</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">boot:</span></span><br><span class="line">    <span class="attr">admin:</span></span><br><span class="line">      <span class="attr">client:</span></span><br><span class="line">        <span class="attr">url:</span> <span class="string">http://localhost:8080</span> <span class="comment"># 配置服务端的地址</span></span><br><span class="line">        <span class="attr">instance:</span></span><br><span class="line">          <span class="attr">name:</span> <span class="string">myClient1</span> <span class="comment"># 配置客户端的名称（可选）</span></span><br><span class="line"><span class="comment"># Actuator 监控配置</span></span><br><span class="line"><span class="attr">management:</span></span><br><span class="line">  <span class="attr">endpoint:</span>  <span class="comment"># 控制端点是否对外开放的配置（具体端点的配置）</span></span><br><span class="line">    <span class="attr">health:</span>  <span class="comment"># 端点名称</span></span><br><span class="line">      <span class="attr">show-details:</span> <span class="string">always</span>  <span class="comment"># 显示健康检查中所有指标的详细信息</span></span><br><span class="line">  <span class="attr">endpoints:</span>  <span class="comment"># 控制端点是否对外开放的配置（全部端点的配置）</span></span><br><span class="line">    <span class="attr">web:</span> <span class="comment"># Web 端点的配置</span></span><br><span class="line">      <span class="attr">exposure:</span>  <span class="comment"># 暴露端点的配置</span></span><br><span class="line">        <span class="attr">include:</span> <span class="string">&quot;*&quot;</span>  <span class="comment"># 将所有 Actuator 端点都暴露出来，包括自定义的端点，默认只能访问 health 和 info 端点</span></span><br></pre></td></tr></table></figure><p>步骤三：创建启动类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(MyApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>步骤四：启动应用程序</p><h4 id="Spring-Boot-Admin服务端搭建"><a href="#Spring-Boot-Admin服务端搭建" class="headerlink" title="Spring Boot Admin服务端搭建"></a>Spring Boot Admin服务端搭建</h4><p>步骤一：新建模块，添加<code>spring-boot-admin-starter-server</code>依赖，版本与当前使用的springboot版本保持一致，并将其配置成web工程</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>de.codecentric<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-admin-starter-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.5.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>步骤二：在启动类上添加<code>@EnableAdminServer</code>注解，声明当前应用启动后作为SpringBootAdmin的服务器使用</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableAdminServer</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SpringBootAdminServerApplication</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(SpringBootAdminServerApplication.class, args);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>步骤三：启动程序，访问 <code>http://localhost:8080/applications</code>查看监控数据和管理界面</p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/blog/2021/03/01/SpringBoot/Spring Boot Admin服务端.png" style="zoom:50%"></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://w_e_n.gitee.io/blog">wen</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://w_e_n.gitee.io/blog/2021/03/01/SpringBoot/">https://w_e_n.gitee.io/blog/2021/03/01/SpringBoot/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://w_e_n.gitee.io/blog" target="_blank">远方の博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/SpringBoot/">SpringBoot</a></div><div class="post_share"><div class="social-share" data-image="/2021/03/01/SpringBoot/SpringBoot.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/03/15/SpringCloud/" title="SpringCloud笔记"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2021/03/15/SpringCloud/SpringCloud.png" onerror='onerror=null,src="/img/404.png"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">SpringCloud笔记</div></div></a></div><div class="next-post pull-right"><a href="/2021/02/15/MyBatis-Plus/" title="MyBatis-Plus笔记"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2021/02/15/MyBatis-Plus/MyBatis-Plus.png" onerror='onerror=null,src="/img/404.png"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">MyBatis-Plus笔记</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Gitalk</span><span class="switch-btn"></span><span class="second-comment">Valine</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/%E5%A4%B4%E5%83%8F.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">wen</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">62</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">35</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/wen53231323"><i class="fab fa-github"></i><span>我的仓库</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">暂无</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#SpringBoot%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">SpringBoot基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#SpringBoot%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">SpringBoot简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E5%B5%8C%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E6%9B%B4%E6%8D%A2"><span class="toc-number">1.2.</span> <span class="toc-text">内嵌服务器的更换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%86%85%E5%B5%8C%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">1.2.1.</span> <span class="toc-text">常见的内嵌服务器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%8D%A2%E4%B8%BA-Jetty"><span class="toc-number">1.2.2.</span> <span class="toc-text">更换为 Jetty</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9B%B4%E6%8D%A2%E4%B8%BA-Undertow"><span class="toc-number">1.2.3.</span> <span class="toc-text">更换为 Undertow</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%89%93%E5%8C%85%E4%B8%8E%E8%BF%90%E8%A1%8C"><span class="toc-number">1.3.</span> <span class="toc-text">程序的打包与运行</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%89%93%E5%8C%85"><span class="toc-number">1.3.1.</span> <span class="toc-text">程序的打包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E7%9A%84%E8%BF%90%E8%A1%8C"><span class="toc-number">1.3.2.</span> <span class="toc-text">程序的运行</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A5%E9%97%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">1.4.</span> <span class="toc-text">入门案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E7%88%B6%E7%B1%BB%E4%BE%9D%E8%B5%96"><span class="toc-number">1.4.1.</span> <span class="toc-text">添加父类依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%9C%BA%E6%99%AF%E4%BE%9D%E8%B5%96"><span class="toc-number">1.4.2.</span> <span class="toc-text">添加场景依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%90%AF%E5%8A%A8%E7%A8%8B%E5%BA%8F"><span class="toc-number">1.4.3.</span> <span class="toc-text">创建启动程序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">1.4.4.</span> <span class="toc-text">创建配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%8E%A7%E5%88%B6%E5%99%A8%E7%B1%BB"><span class="toc-number">1.4.5.</span> <span class="toc-text">创建控制器类</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SpringBoot%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.</span> <span class="toc-text">SpringBoot配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%90%8D%E7%A7%B0"><span class="toc-number">2.1.</span> <span class="toc-text">配置文件名称</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Application-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.1.1.</span> <span class="toc-text">Application 配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Bootstrap-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.1.2.</span> <span class="toc-text">Bootstrap 配置文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%A0%BC%E5%BC%8F"><span class="toc-number">2.2.</span> <span class="toc-text">配置文件格式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7%E6%96%87%E4%BB%B6%EF%BC%88-properties%EF%BC%89"><span class="toc-number">2.2.1.</span> <span class="toc-text">属性文件（.properties）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#YAML%E6%96%87%E4%BB%B6%EF%BC%88-yml%E6%88%96-yaml%EF%BC%89"><span class="toc-number">2.2.2.</span> <span class="toc-text">YAML文件（.yml或.yaml）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.3.</span> <span class="toc-text">读取配置文件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Value%E6%B3%A8%E8%A7%A3%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.3.1.</span> <span class="toc-text">使用@Value注解读取配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-ConfigurationProperties%E6%B3%A8%E8%A7%A3%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.3.2.</span> <span class="toc-text">使用@ConfigurationProperties注解读取配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-PropertySource%E6%B3%A8%E8%A7%A3%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.3.3.</span> <span class="toc-text">使用@PropertySource注解读取配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Environment%E7%B1%BB%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.3.4.</span> <span class="toc-text">使用Environment类读取配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Properties%E7%B1%BB%E8%AF%BB%E5%8F%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.3.5.</span> <span class="toc-text">使用Properties类读取配置文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="toc-number">2.4.</span> <span class="toc-text">多环境配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%9A%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%E7%AE%80%E4%BB%8B"><span class="toc-number">2.4.1.</span> <span class="toc-text">多环境配置简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%8D%E5%90%8C%E7%8E%AF%E5%A2%83%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.4.2.</span> <span class="toc-text">创建不同环境的配置文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E6%BF%80%E6%B4%BB%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.4.3.</span> <span class="toc-text">指定激活的配置文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-number">2.5.</span> <span class="toc-text">配置文件的优先级</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E%E5%90%8D%E7%A7%B0%E8%A7%92%E5%BA%A6"><span class="toc-number">2.5.1.</span> <span class="toc-text">从名称角度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%90%8E%E7%BC%80%E8%A7%92%E5%BA%A6"><span class="toc-number">2.5.2.</span> <span class="toc-text">从配置文件后缀角度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E%E5%AD%98%E6%94%BE%E4%BD%8D%E7%BD%AE%E8%A7%92%E5%BA%A6"><span class="toc-number">2.5.3.</span> <span class="toc-text">从存放位置角度</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8E%E5%8A%A0%E8%BD%BD%E8%A7%92%E5%BA%A6"><span class="toc-number">2.5.4.</span> <span class="toc-text">从加载角度</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SpringBoot%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD"><span class="toc-number">3.</span> <span class="toc-text">SpringBoot常用功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E6%8E%A7%E5%88%B6"><span class="toc-number">3.1.</span> <span class="toc-text">日志控制</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.1.1.</span> <span class="toc-text">默认输出格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E8%BE%93%E5%87%BA%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.1.2.</span> <span class="toc-text">配置输出格式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB"><span class="toc-number">3.1.3.</span> <span class="toc-text">配置日志级别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%83%AD%E5%8A%A0%E8%BD%BD"><span class="toc-number">3.2.</span> <span class="toc-text">热加载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%83%AD%E9%83%A8%E7%BD%B2%E7%AE%80%E4%BB%8B"><span class="toc-number">3.2.1.</span> <span class="toc-text">热部署简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%83%AD%E5%8A%A0%E8%BD%BD%E7%AE%80%E4%BB%8B"><span class="toc-number">3.2.2.</span> <span class="toc-text">热加载简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8spring-boot-devtools%E5%AE%9E%E7%8E%B0%E7%83%AD%E5%8A%A0%E8%BD%BD"><span class="toc-number">3.2.3.</span> <span class="toc-text">使用spring-boot-devtools实现热加载</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8springloaded%E5%AE%9E%E7%8E%B0%E7%83%AD%E5%8A%A0%E8%BD%BD"><span class="toc-number">3.2.4.</span> <span class="toc-text">使用springloaded实现热加载</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8C%87%E6%A0%87%E7%9B%91%E6%8E%A7%EF%BC%88Actuator%EF%BC%89"><span class="toc-number">3.3.</span> <span class="toc-text">指标监控（Actuator）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Actuator%E7%AE%80%E4%BB%8B"><span class="toc-number">3.3.1.</span> <span class="toc-text">Actuator简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Actuator%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8"><span class="toc-number">3.3.2.</span> <span class="toc-text">Actuator简单使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E7%AB%AF%E7%82%B9%E5%90%AF%E5%81%9C"><span class="toc-number">3.3.3.</span> <span class="toc-text">设置端点启停</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9B%91%E6%8E%A7%E6%8C%87%E6%A0%87"><span class="toc-number">3.3.4.</span> <span class="toc-text">自定义监控指标</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%AF%E8%A7%86%E5%8C%96%E7%9B%91%E6%8E%A7%E5%B9%B3%E5%8F%B0"><span class="toc-number">3.3.5.</span> <span class="toc-text">可视化监控平台</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Spring-Boot-Admin%E7%AE%80%E4%BB%8B"><span class="toc-number">3.3.5.1.</span> <span class="toc-text">Spring Boot Admin简介</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Spring-Boot-Admin%E5%AE%A2%E6%88%B7%E7%AB%AF%E4%B8%8E%E6%9C%8D%E5%8A%A1%E7%AB%AF"><span class="toc-number">3.3.5.2.</span> <span class="toc-text">Spring Boot Admin客户端与服务端</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Spring-Boot-Admin%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%90%AD%E5%BB%BA"><span class="toc-number">3.3.5.3.</span> <span class="toc-text">Spring Boot Admin客户端搭建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Spring-Boot-Admin%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%90%AD%E5%BB%BA"><span class="toc-number">3.3.5.4.</span> <span class="toc-text">Spring Boot Admin服务端搭建</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/01/01/CSS/" title="CSS笔记"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2023/01/01/CSS/CSS.png" onerror='this.onerror=null,this.src="/img/404.png"' alt="CSS笔记"></a><div class="content"><a class="title" href="/2023/01/01/CSS/" title="CSS笔记">CSS笔记</a><time datetime="2022-12-31T16:00:00.000Z" title="发表于 2023-01-01 00:00:00">2023-01-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/01/HTML/" title="HTML笔记"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2023/01/01/HTML/HTML.png" onerror='this.onerror=null,this.src="/img/404.png"' alt="HTML笔记"></a><div class="content"><a class="title" href="/2023/01/01/HTML/" title="HTML笔记">HTML笔记</a><time datetime="2022-12-31T16:00:00.000Z" title="发表于 2023-01-01 00:00:00">2023-01-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/01/JavaScript/" title="JavaScript笔记"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2023/01/01/JavaScript/JavaScript.png" onerror='this.onerror=null,this.src="/img/404.png"' alt="JavaScript笔记"></a><div class="content"><a class="title" href="/2023/01/01/JavaScript/" title="JavaScript笔记">JavaScript笔记</a><time datetime="2022-12-31T16:00:00.000Z" title="发表于 2023-01-01 00:00:00">2023-01-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/01/JavaWeb/" title="JavaWeb笔记"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2023/01/01/JavaWeb/JavaWeb.png" onerror='this.onerror=null,this.src="/img/404.png"' alt="JavaWeb笔记"></a><div class="content"><a class="title" href="/2023/01/01/JavaWeb/" title="JavaWeb笔记">JavaWeb笔记</a><time datetime="2022-12-31T16:00:00.000Z" title="发表于 2023-01-01 00:00:00">2023-01-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/01/01/Linux/" title="Linux笔记"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2023/01/01/Linux/Linux.png" onerror='this.onerror=null,this.src="/img/404.png"' alt="Linux笔记"></a><div class="content"><a class="title" href="/2023/01/01/Linux/" title="Linux笔记">Linux笔记</a><time datetime="2022-12-31T16:00:00.000Z" title="发表于 2023-01-01 00:00:00">2023-01-01</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By wen</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '701b8bc001a40a760558',
      clientSecret: 'a51b436adc471c3949a8f41be05c2d58cccab10a',
      repo: 'Hexo-Butterfly-Comment',
      owner: 'wen53231323',
      admin: ['wen53231323'],
      id: 'c9fe7198ff792e4a37510404d7c7a989',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    getCSS('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css')
    getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !true) {
  if (true) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'VI32wmbmMoxvlhpTpoDBNeOk-MdYXbMMI',
      appKey: 'oFstfBFkCQIkjuk4ibCpbGqz',
      avatar: 'monsterid',
      serverURLs: 'https://vi32wmbm.api.lncldglobal.com',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Gitalk' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>
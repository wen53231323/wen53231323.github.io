<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>项目相关笔记 | 远方の博客</title><meta name="author" content="wen"><meta name="copyright" content="wen"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="AOP应用AOP日志记录引入依赖12345&lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;    &lt;artifactId&gt;spring-aop&lt;&#x2F;artifactId&gt;    &lt;version&gt;x.x.x&lt;&#x2F;version&gt;&lt;&#x2F;dependency&amp;"><meta property="og:type" content="article"><meta property="og:title" content="项目相关笔记"><meta property="og:url" content="https://w_e_n.gitee.io/2023/01/01/%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3/index.html"><meta property="og:site_name" content="远方の博客"><meta property="og:description" content="AOP应用AOP日志记录引入依赖12345&lt;dependency&gt;    &lt;groupId&gt;org.springframework&lt;&#x2F;groupId&gt;    &lt;artifactId&gt;spring-aop&lt;&#x2F;artifactId&gt;    &lt;version&gt;x.x.x&lt;&#x2F;version&gt;&lt;&#x2F;dependency&amp;"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://w_e_n.gitee.io/2023/01/01/%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3/%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3.png"><meta property="article:published_time" content="2022-12-31T16:00:00.000Z"><meta property="article:modified_time" content="2023-09-22T16:24:59.033Z"><meta property="article:author" content="wen"><meta property="article:tag" content="项目"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://w_e_n.gitee.io/2023/01/01/%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3/%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3.png"><link rel="shortcut icon" href="./img/favicon.png"><link rel="canonical" href="https://w_e_n.gitee.io/2023/01/01/%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//static.cloudflareinsights.com"><link rel="preconnect" href="//www.clarity.ms"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="./css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload='this.media="all"'><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?[object Object]";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script async src="https://www.googletagmanager.com/gtag/js?id=[object Object]"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","[object Object]")</script><script defer data-pjax="data-pjax" src="https://static.cloudflareinsights.com/beacon.min.js" data-cf-beacon="{&quot;token&quot;: &quot;[object Object]&quot;}"></script><script>!function(t,e,c,n,a,r){t[c]=t[c]||function(){(t[c].q=t[c].q||[]).push(arguments)},(a=e.createElement(n)).async=1,a.src="https://www.clarity.ms/tag/[object Object]",(r=e.getElementsByTagName(n)[0]).parentNode.insertBefore(a,r)}(window,document,"clarity","script")</script><script>const GLOBAL_CONFIG = { 
  root: './',
  algolia: undefined,
  localSearch: {"path":"./search.xml","preload":true,"top_n_per_article":5,"unescape":true,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"项目相关笔记",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2023-09-23 00:24:59"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="./img/%E5%A4%B4%E5%83%8F.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="./archives/"><div class="headline">文章</div><div class="length-num">62</div></a><a href="./tags/"><div class="headline">标签</div><div class="length-num">35</div></a><a href="./categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="./"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-compass"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="./archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="./tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="./categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="./picture/"><i class="fa-fw fas fa-images"></i><span> 图片库</span></a></li><li><a class="site-page child" href="./music/"><i class="fa-fw fas fa-music"></i><span> 音乐库</span></a></li><li><a class="site-page child" href="./movies/"><i class="fa-fw fas fa-video"></i><span> 视频库</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="./link/"><span>导航链接</span></a></li><li><a class="site-page child" href="./comment_loading/"><span>评论管理</span></a></li><li><a class="site-page child" href="./custom/"><span>自定义页</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="./about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(2023/01/01/%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3/%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3.png)"><nav id="nav"><span id="blog-info"><a href="./" title="远方の博客"><span class="site-name">远方の博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="./"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-compass"></i><span> 目录</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="./archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="./tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="./categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="./picture/"><i class="fa-fw fas fa-images"></i><span> 图片库</span></a></li><li><a class="site-page child" href="./music/"><i class="fa-fw fas fa-music"></i><span> 音乐库</span></a></li><li><a class="site-page child" href="./movies/"><i class="fa-fw fas fa-video"></i><span> 视频库</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 其他</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="./link/"><span>导航链接</span></a></li><li><a class="site-page child" href="./comment_loading/"><span>评论管理</span></a></li><li><a class="site-page child" href="./custom/"><span>自定义页</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="./about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">项目相关笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-12-31T16:00:00.000Z" title="发表于 2023-01-01 00:00:00">2023-01-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-09-22T16:24:59.033Z" title="更新于 2023-09-23 00:24:59">2023-09-23</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="./categories/Java/">Java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="项目相关笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="AOP应用"><a href="#AOP应用" class="headerlink" title="AOP应用"></a>AOP应用</h1><h2 id="AOP日志记录"><a href="#AOP日志记录" class="headerlink" title="AOP日志记录"></a>AOP日志记录</h2><h3 id="引入依赖"><a href="#引入依赖" class="headerlink" title="引入依赖"></a>引入依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>x.x.x<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="自定义注解"><a href="#自定义注解" class="headerlink" title="自定义注解"></a>自定义注解</h3><p>自定义注解，注解中定义参数用于指定日志的描述信息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自定义注解，用于打印日志</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Log &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 业务名</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String <span class="title function_">businessName</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 操作类型</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String <span class="title function_">businessType</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="定义切面类"><a href="#定义切面类" class="headerlink" title="定义切面类"></a>定义切面类</h3><ol><li>定义切面类，使用@Aspect注解标识</li><li>在切面类中，使用自定义的注解作为切点，用于拦截注解标识的方法</li><li>在切面类中，编写环绕通知方法，在方法执行前后分别打印日志</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 切面类，对需要打印日志的接口做增强</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span><span class="comment">// 用于生成日志对象</span></span><br><span class="line"><span class="meta">@Aspect</span><span class="comment">// 标识切面类</span></span><br><span class="line"><span class="meta">@Component</span><span class="comment">// 标识普通组件，保证这个切面类能够放入IOC容器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LogAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> OperationLogMapper operationLogMapper;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 定义切点，使用<span class="doctag">@Log</span>注解的方法会被拦截</span></span><br><span class="line"><span class="comment">     * 注解<span class="doctag">@Pointcut</span>：用于定义切点，即需要拦截的连接点</span></span><br><span class="line"><span class="comment">     * 切点函数<span class="doctag">@annotation</span>： 用于匹配带有指定注解的方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;@annotation(com.wen.aop.log.Log)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 在切点方法执行前后进行处理</span></span><br><span class="line"><span class="comment">     * 注解<span class="doctag">@Around</span>：环绕通知，使用try...catch...finally结构围绕整个被代理的目标方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pjp 切点方法的连接点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 切点方法的返回结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">printLot</span><span class="params">(ProceedingJoinPoint pjp)</span> &#123;</span><br><span class="line">        <span class="type">Object</span> <span class="variable">proceed</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;&lt;==========Start==========&gt;&quot;</span>);</span><br><span class="line">            proceed = pjp.proceed();<span class="comment">// 执行目标方法</span></span><br><span class="line">            <span class="type">ServletRequestAttributes</span> <span class="variable">requestAttributes</span> <span class="operator">=</span> (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();</span><br><span class="line">            <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> requestAttributes.getRequest();</span><br><span class="line">            recordOperationLog(proceed, pjp, request);<span class="comment">// 记录操作日志信息</span></span><br><span class="line">            saveOperationLog(proceed, pjp, request);<span class="comment">// 保存操作日志信息</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            log.error(<span class="string">&quot;[抛出异常] - &#123;&#125;&quot;</span>, e.getMessage());<span class="comment">// 异常通知</span></span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;&lt;==========End==========&gt;&quot;</span> + System.lineSeparator());<span class="comment">// 后置通知，System.lineSeparator()表示拼接换行</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> proceed;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 记录操作日志信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> proceed 目标方法的返回结果</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pjp     切点方法的连接点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request HTTP请求对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">recordOperationLog</span><span class="params">(Object proceed, ProceedingJoinPoint pjp, HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="type">Authentication</span> <span class="variable">authentication</span> <span class="operator">=</span> SecurityContextHolder.getContext().getAuthentication();</span><br><span class="line">        <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> (LoginUser) authentication.getPrincipal();<span class="comment">// 获取登录用户信息</span></span><br><span class="line">        log.info(<span class="string">&quot;User ID:          : &#123;&#125;&quot;</span>, loginUser.getUser() != <span class="literal">null</span> ? loginUser.getUser().getId() : -<span class="number">1L</span>);<span class="comment">// 获取用户ID</span></span><br><span class="line">        log.info(<span class="string">&quot;NickName:         : &#123;&#125;&quot;</span>, loginUser.getUser() != <span class="literal">null</span> ? loginUser.getUser().getNickName() : <span class="string">&quot;用户未登录&quot;</span>);<span class="comment">// 获取用户昵称</span></span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;BusinessName      : &#123;&#125;&quot;</span>, getLogAnnotation(pjp).businessName());<span class="comment">// 获取业务名称</span></span><br><span class="line">        log.info(<span class="string">&quot;BusinessType      : &#123;&#125;&quot;</span>, getLogAnnotation(pjp).businessType());<span class="comment">// 获取业务类型</span></span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;Module:           : &#123;&#125;&quot;</span>, getApiAnnotation(pjp).tags()[<span class="number">0</span>]);<span class="comment">// 获取模块名称</span></span><br><span class="line">        log.info(<span class="string">&quot;Class             : &#123;&#125;&quot;</span>, pjp.getSignature().getDeclaringTypeName());<span class="comment">// 获取切点方法所在的类名</span></span><br><span class="line">        log.info(<span class="string">&quot;Method            : &#123;&#125;&quot;</span>, ((MethodSignature) pjp.getSignature()).getName());<span class="comment">// 获取切点方法的方法名</span></span><br><span class="line">        log.info(<span class="string">&quot;Description:      : &#123;&#125;&quot;</span>, getApiOperation(pjp).value());<span class="comment">// 获取操作描述</span></span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;IP Address:       : &#123;&#125;&quot;</span>, IpUtils.getIpAddress(request));<span class="comment">// 获取请求的IP地址</span></span><br><span class="line">        log.info(<span class="string">&quot;Ip Location:      : &#123;&#125;&quot;</span>, IpUtils.getIpLocation(IpUtils.getIpAddress(request)));<span class="comment">// 获取请求IP的归属地</span></span><br><span class="line">        log.info(<span class="string">&quot;DeviceName:       : &#123;&#125;&quot;</span>, IpUtils.getDeviceName(request));<span class="comment">// 获取请求IP的访问设备</span></span><br><span class="line">        log.info(<span class="string">&quot;Request URL:      : &#123;&#125;&quot;</span>, request.getRequestURI());<span class="comment">// 获取请求URL</span></span><br><span class="line">        log.info(<span class="string">&quot;Request Method:   : &#123;&#125;&quot;</span>, request.getMethod());<span class="comment">// 获取请求方法</span></span><br><span class="line">        log.info(<span class="string">&quot;Request Param:    : &#123;&#125;&quot;</span>, JSON.toJSONString(pjp.getArgs()));<span class="comment">// 获取请求参数，并转换为JSON字符串</span></span><br><span class="line">        log.info(<span class="string">&quot;Response Data:    : &#123;&#125;&quot;</span>, JSON.toJSONStringWithDateFormat(proceed, <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>, SerializerFeature.WriteDateUseDateFormat));<span class="comment">// 获取返回结果，并转换为JSON字符串</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 保存操作日志信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> proceed 目标方法的返回结果</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pjp     切点方法的连接点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request HTTP请求对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">saveOperationLog</span><span class="params">(Object proceed, ProceedingJoinPoint pjp, HttpServletRequest request)</span> &#123;</span><br><span class="line">        <span class="type">OperationLog</span> <span class="variable">operationLog</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">OperationLog</span>();</span><br><span class="line">        <span class="type">Authentication</span> <span class="variable">authentication</span> <span class="operator">=</span> SecurityContextHolder.getContext().getAuthentication();</span><br><span class="line">        <span class="type">LoginUser</span> <span class="variable">loginUser</span> <span class="operator">=</span> (LoginUser) authentication.getPrincipal();<span class="comment">// 获取登录用户信息</span></span><br><span class="line">        operationLog.setUserId(loginUser.getUser() != <span class="literal">null</span> ? loginUser.getUser().getId() : -<span class="number">1L</span>);<span class="comment">// 设置用户ID</span></span><br><span class="line">        operationLog.setNickName(loginUser.getUser() != <span class="literal">null</span> ? loginUser.getUser().getNickName() : <span class="string">&quot;用户未登录&quot;</span>);<span class="comment">// 设置用户昵称</span></span><br><span class="line">        operationLog.setBusinessName(getLogAnnotation(pjp).businessName());<span class="comment">// 设置业务名称</span></span><br><span class="line">        operationLog.setBusinessType(getLogAnnotation(pjp).businessType());<span class="comment">// 设置业务类型</span></span><br><span class="line">        operationLog.setModule(getApiAnnotation(pjp).tags()[<span class="number">0</span>]);<span class="comment">// 设置模块名称</span></span><br><span class="line">        operationLog.setClassName(pjp.getTarget().getClass().getName());<span class="comment">// 设置切点方法所在的类名</span></span><br><span class="line">        operationLog.setMethodName(pjp.getSignature().getName());<span class="comment">// 设置切点方法的方法名</span></span><br><span class="line">        operationLog.setDescription(getApiOperation(pjp).value());<span class="comment">// 设置操作描述</span></span><br><span class="line">        operationLog.setIpAddress(IpUtils.getIpAddress(request));<span class="comment">// 设置请求的IP地址</span></span><br><span class="line">        operationLog.setIpLocation(IpUtils.getIpLocation(IpUtils.getIpAddress(request)));<span class="comment">// 设置请求IP的归属地</span></span><br><span class="line">        operationLog.setDeviceName(IpUtils.getDeviceName(request));<span class="comment">// 设置请求IP的访问设备</span></span><br><span class="line">        operationLog.setRequestUrl(request.getRequestURI());<span class="comment">// 设置请求URL</span></span><br><span class="line">        operationLog.setRequestMethod(request.getMethod());<span class="comment">// 设置请求方法</span></span><br><span class="line">        operationLog.setRequestParam(JSON.toJSONString(pjp.getArgs()));<span class="comment">// 设置请求参数，并转换为JSON字符串</span></span><br><span class="line">        operationLog.setResponseData(JSON.toJSONStringWithDateFormat(proceed, <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>, SerializerFeature.WriteDateUseDateFormat));<span class="comment">// 设置返回结果，并转换为JSON字符串</span></span><br><span class="line">        operationLogMapper.insert(operationLog);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取方法上的<span class="doctag">@Log</span>注解</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pjp 切点方法的连接点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 方法上的<span class="doctag">@Log</span>注解</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Log <span class="title function_">getLogAnnotation</span><span class="params">(ProceedingJoinPoint pjp)</span> &#123;</span><br><span class="line">        <span class="type">MethodSignature</span> <span class="variable">methodSignature</span> <span class="operator">=</span> (MethodSignature) pjp.getSignature();</span><br><span class="line">        <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> methodSignature.getMethod();</span><br><span class="line">        <span class="keyword">return</span> method.getAnnotation(Log.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取类上的<span class="doctag">@Api</span>注解</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pjp 切点方法的连接点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 类上的<span class="doctag">@Api</span>注解</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Api <span class="title function_">getApiAnnotation</span><span class="params">(ProceedingJoinPoint pjp)</span> &#123;</span><br><span class="line">        Class&lt;?&gt; targetClass = pjp.getTarget().getClass();</span><br><span class="line">        <span class="keyword">return</span> targetClass.getAnnotation(Api.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取方法上的<span class="doctag">@ApiOperation</span>注解</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pjp 切点方法的连接点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 方法上的<span class="doctag">@ApiOperation</span>注解</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> ApiOperation <span class="title function_">getApiOperation</span><span class="params">(ProceedingJoinPoint pjp)</span> &#123;</span><br><span class="line">        <span class="type">MethodSignature</span> <span class="variable">methodSignature</span> <span class="operator">=</span> (MethodSignature) pjp.getSignature();</span><br><span class="line">        <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> methodSignature.getMethod();</span><br><span class="line">        <span class="keyword">return</span> method.getAnnotation(ApiOperation.class);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h3><p>在需要打印日志的表现层接口中加上自定义的注解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Log(&quot;查询用户列表&quot;)</span></span><br><span class="line">    <span class="meta">@Log(businessName = &quot;getUserListLog&quot;, businessType = &quot;SELECT&quot;)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userService.getUserList();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="AOP缓存优化"><a href="#AOP缓存优化" class="headerlink" title="AOP缓存优化"></a>AOP缓存优化</h2><h3 id="引入依赖-1"><a href="#引入依赖-1" class="headerlink" title="引入依赖"></a>引入依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>x.x.x<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="自定义注解-1"><a href="#自定义注解-1" class="headerlink" title="自定义注解"></a>自定义注解</h3><p>自定义注解，注解中定义参数用于指定日志的描述信息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 基于缓存的切面，对使用该注解的方法进行缓存优化</span></span><br><span class="line"><span class="comment"> * 如果缓存存在，则不执行目标方法，直接返回缓存的数据</span></span><br><span class="line"><span class="comment"> * 否则需要执行目标方法，并将目标方法的返回结果转换成JSON字符串，存入Redis缓存。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.METHOD&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Cache &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 缓存标识名称</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    String <span class="title function_">name</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 缓存过期时间，默认为1分钟</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">long</span> <span class="title function_">expire</span><span class="params">()</span> <span class="keyword">default</span> <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="定义切面类-1"><a href="#定义切面类-1" class="headerlink" title="定义切面类"></a>定义切面类</h3><ol><li>定义切面类，使用@Aspect注解标识</li><li>在切面类中，使用自定义的注解作为切点，用于拦截注解标识的方法</li><li>在切面类中，编写环绕通知方法，在方法执行前后分别打印日志</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span><span class="comment">// 用于生成日志对象</span></span><br><span class="line"><span class="meta">@Aspect</span><span class="comment">// 声明该类为切面类</span></span><br><span class="line"><span class="meta">@Component</span><span class="comment">// 将该类交给Spring容器管理</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CacheAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate&lt;String, String&gt; redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 定义切点，使用<span class="doctag">@Cache</span>注解的方法会被拦截</span></span><br><span class="line"><span class="comment">     * 注解<span class="doctag">@Pointcut</span>：用于定义切点，即需要拦截的连接点</span></span><br><span class="line"><span class="comment">     * 切点函数<span class="doctag">@annotation</span>： 用于匹配带有指定注解的方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;@annotation(com.wen.aop.cache.Cache)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">pt</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 在切点方法执行前后进行处理</span></span><br><span class="line"><span class="comment">     * 注解<span class="doctag">@Around</span>：环绕通知，使用try...catch...finally结构围绕整个被代理的目标方法</span></span><br><span class="line"><span class="comment">     * （1）获取切点方法的信息，包括方法名、类名和参数等。</span></span><br><span class="line"><span class="comment">     * （2）根据参数类型，构建缓存的Redis Key。</span></span><br><span class="line"><span class="comment">     * （3）从Redis缓存中获取数据，如果存在则直接返回缓存数据，否则执行目标方法。</span></span><br><span class="line"><span class="comment">     * （4）将目标方法的返回结果转换成JSON字符串，并存入Redis缓存。</span></span><br><span class="line"><span class="comment">     * （5）最后返回目标方法的执行结果。</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pjp 切点方法的连接点</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 切点方法的返回结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Around(&quot;pt()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint pjp)</span> &#123;</span><br><span class="line">        log.info(<span class="string">&quot;&lt;==========Start==========&gt;&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">redisKey</span> <span class="operator">=</span> getRedisKey(pjp);<span class="comment">// 获取 Redis 缓存的key值</span></span><br><span class="line">            <span class="comment">// 从缓存中获取数据，如果命中，则直接转化Json返回缓存数据</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">redisValue</span> <span class="operator">=</span> redisTemplate.opsForValue().get(redisKey);</span><br><span class="line">            <span class="keyword">if</span> (redisValue != <span class="literal">null</span> &amp;&amp; !redisValue.isEmpty()) &#123;</span><br><span class="line">                log.info(<span class="string">&quot;命中缓存，走缓存~~~ redisKey：&#123;&#125;&quot;</span>, redisKey);</span><br><span class="line">                <span class="keyword">return</span> JSON.parseObject(redisValue, ResponseResult.class);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">Object</span> <span class="variable">proceed</span> <span class="operator">=</span> pjp.proceed();<span class="comment">// 执行目标方法获取返回值</span></span><br><span class="line"></span><br><span class="line">            <span class="type">MethodSignature</span> <span class="variable">methodSignature</span> <span class="operator">=</span> (MethodSignature) pjp.getSignature();</span><br><span class="line">            <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> methodSignature.getMethod();<span class="comment">// 获取方法对象</span></span><br><span class="line">            <span class="comment">// 将原始方法的返回结果 proceed 转换为 JSON 字符串，并使用指定的日期格式</span></span><br><span class="line">            <span class="type">String</span> <span class="variable">jsonString</span> <span class="operator">=</span> JSON.toJSONStringWithDateFormat(proceed, <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>, SerializerFeature.WriteDateUseDateFormat);</span><br><span class="line">            <span class="comment">// 根据方法上的注解@Cache，获取缓存过期时间</span></span><br><span class="line">            <span class="type">Duration</span> <span class="variable">duration</span> <span class="operator">=</span> Duration.ofMillis(method.getAnnotation(Cache.class).expire());</span><br><span class="line">            <span class="comment">// 存入Redis缓存</span></span><br><span class="line">            redisTemplate.opsForValue().set(redisKey, jsonString, duration);</span><br><span class="line">            log.info(<span class="string">&quot;未命中缓存，已存入缓存~~~&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> proceed;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;[抛出异常] - &#123;&#125;&quot;</span>, e.getMessage());<span class="comment">// 异常通知</span></span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e.getMessage());</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;&lt;==========End==========&gt;&quot;</span> + System.lineSeparator());<span class="comment">// 后置通知，System.lineSeparator()表示拼接换行</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取 Redis 缓存的 key 值并返回</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pjp 切点对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Redis 缓存的 key 值</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">getRedisKey</span><span class="params">(ProceedingJoinPoint pjp)</span> &#123;</span><br><span class="line">        <span class="type">MethodSignature</span> <span class="variable">methodSignature</span> <span class="operator">=</span> (MethodSignature) pjp.getSignature();</span><br><span class="line">        <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> methodSignature.getMethod();<span class="comment">// 获取方法对象</span></span><br><span class="line">        Class&lt;?&gt; targetClass = pjp.getTarget().getClass();<span class="comment">// 获取目标类对象</span></span><br><span class="line">        Object[] args = pjp.getArgs();<span class="comment">// 获取方法参数列表</span></span><br><span class="line">        Class&lt;?&gt;[] parameterTypes = method.getParameterTypes();<span class="comment">// 获取参数类型列表</span></span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">params</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();<span class="comment">// 用于拼接参数字符串</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 拼接参数字符串，并获取参数类型</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; args.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (args[i] != <span class="literal">null</span>) &#123;</span><br><span class="line">                params.append(JSON.toJSONString(args[i]));<span class="comment">// 将参数转换为 JSON 字符串并拼接到参数字符串中</span></span><br><span class="line">                parameterTypes[i] = args[i].getClass();<span class="comment">// 获取参数的实际类型</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                parameterTypes[i] = <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> method.getAnnotation(Cache.class).name();<span class="comment">// 根据方法上的注解@Cache，获取缓存标识名称</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">className</span> <span class="operator">=</span> targetClass.getSimpleName();<span class="comment">// 类名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> method.getName();<span class="comment">// 方法名</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">paramStr</span> <span class="operator">=</span> DigestUtils.md5Hex(params.toString());<span class="comment">// 对参数字符串进行MD5加密</span></span><br><span class="line">        <span class="comment">// 获取 Redis 缓存的 key 值并返回</span></span><br><span class="line">        <span class="keyword">return</span> String.format(<span class="string">&quot;%s::%s::%s::%s&quot;</span>, name, className, methodName, paramStr);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用方式-1"><a href="#使用方式-1" class="headerlink" title="使用方式"></a>使用方式</h3><p>在需要打印日志的表现层接口中加上自定义的注解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Cache(name = &quot;getUserListCache&quot;, expire = 60 * 1000)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userService.getUserList();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="AOP接口限流"><a href="#AOP接口限流" class="headerlink" title="AOP接口限流"></a>AOP接口限流</h2><h3 id="引入依赖-2"><a href="#引入依赖-2" class="headerlink" title="引入依赖"></a>引入依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>x.x.x<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="自定义注解-2"><a href="#自定义注解-2" class="headerlink" title="自定义注解"></a>自定义注解</h3><p>自定义注解，注解中定义参数用于指定日志的描述信息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> AccessLimit &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 单位时间（秒）</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">seconds</span><span class="params">()</span> <span class="keyword">default</span> <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 单位时间最大请求次数</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> int</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">maxCount</span><span class="params">()</span> <span class="keyword">default</span> <span class="number">100</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="定义切面类-2"><a href="#定义切面类-2" class="headerlink" title="定义切面类"></a>定义切面类</h3><ol><li>定义切面类，使用@Aspect注解标识</li><li>在切面类中，使用自定义的注解作为切点，用于拦截注解标识的方法</li><li>在切面类中，编写环绕通知方法，在方法执行前后分别打印日志</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Slf4j</span><span class="comment">// 用于生成日志对象</span></span><br><span class="line"><span class="meta">@Aspect</span><span class="comment">// 标识切面类</span></span><br><span class="line"><span class="meta">@Component</span><span class="comment">// 标识普通组件，保证这个切面类能够放入IOC容器</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccessLimitAspect</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> RedisService redisService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Pointcut(&quot;@annotation(com.wen.aop.limit.AccessLimit)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">accessLimitPointCut</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 访问频率限制切面方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> joinPoint 切点对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 方法执行结果</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Throwable 异常信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Around(&quot;accessLimitPointCut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">around</span><span class="params">(ProceedingJoinPoint joinPoint)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="comment">// 获取被切面的方法对象</span></span><br><span class="line">        <span class="type">MethodSignature</span> <span class="variable">signature</span> <span class="operator">=</span> (MethodSignature) joinPoint.getSignature();</span><br><span class="line">        <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> signature.getMethod();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取方法上的AccessLimit注解</span></span><br><span class="line">        <span class="type">AccessLimit</span> <span class="variable">accessLimit</span> <span class="operator">=</span> method.getAnnotation(AccessLimit.class);</span><br><span class="line">        <span class="type">int</span> <span class="variable">seconds</span> <span class="operator">=</span> accessLimit.seconds();</span><br><span class="line">        <span class="type">int</span> <span class="variable">maxCount</span> <span class="operator">=</span> accessLimit.maxCount();</span><br><span class="line"></span><br><span class="line">        log.info(<span class="string">&quot;已经启用接口限流：&#123;&#125;秒只能请求&#123;&#125;次&quot;</span>, seconds, maxCount);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 生成唯一的key</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> generateKey(joinPoint);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 通过Redis对访问次数进行计数</span></span><br><span class="line">        <span class="type">long</span> <span class="variable">count</span> <span class="operator">=</span> redisService.incrExpire(key, seconds);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 判断访问次数是否超过阈值</span></span><br><span class="line">        <span class="keyword">if</span> (count &gt; maxCount) &#123;</span><br><span class="line">            log.error(<span class="string">&quot;访问频率超过设置的最大值&quot;</span>);</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;请求过于频繁，请稍候再试&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 执行原方法</span></span><br><span class="line">        <span class="keyword">return</span> joinPoint.proceed();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 生成唯一的key，用于标识请求</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> joinPoint 切点对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 生成的key</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> String <span class="title function_">generateKey</span><span class="params">(ProceedingJoinPoint joinPoint)</span> &#123;</span><br><span class="line">        <span class="comment">// 获取 IP 地址和方法名作为唯一 key</span></span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> ((ServletRequestAttributes) RequestContextHolder.getRequestAttributes()).getRequest();</span><br><span class="line">        <span class="type">String</span> <span class="variable">ip</span> <span class="operator">=</span> IpUtils.getIpAddress(request);</span><br><span class="line">        <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> joinPoint.getSignature().getName();</span><br><span class="line">        <span class="keyword">return</span> ip + methodName;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用方式-2"><a href="#使用方式-2" class="headerlink" title="使用方式"></a>使用方式</h3><p>在需要打印日志的表现层接口中加上自定义的注解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserService userService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AccessLimit(seconds = 60, maxCount = 1)</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;User&gt; <span class="title function_">getUserList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userService.getUserList();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="预加载"><a href="#预加载" class="headerlink" title="预加载"></a>预加载</h1><blockquote><p>预加载是指在应用程序启动时，提前加载一些资源或执行某些初始化操作，以提高系统的响应速度和用户体验</p></blockquote><h2 id="实现CommandLineRunner接口"><a href="#实现CommandLineRunner接口" class="headerlink" title="实现CommandLineRunner接口"></a>实现CommandLineRunner接口</h2><p>这是Spring Boot提供的一种预加载方案。通过实现CommandLineRunner接口，可以在Spring Boot应用程序启动后立即执行一些初始化操作。具体而言，实现该接口的类可以重写run方法，在该方法中编写需要在应用程序启动时执行的逻辑代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyCommandLineRunner</span> <span class="keyword">implements</span> <span class="title class_">CommandLineRunner</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(String... args)</span> &#123;</span><br><span class="line">        <span class="comment">// 在应用启动时执行的初始化操作</span></span><br><span class="line">        System.out.println(<span class="string">&quot;实现CommandLineRunner接口方案：执行初始化操作...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现ApplicationRunner-接口"><a href="#实现ApplicationRunner-接口" class="headerlink" title="实现ApplicationRunner 接口"></a>实现ApplicationRunner 接口</h2><p>ApplicationRunner接口也是Spring Boot提供的一种预加载方案。通过实现ApplicationRunner接口，同样可以在Spring Boot应用程序启动后执行一些初始化操作。不同的是，实现该接口的类需要重写run方法，并且该方法传入了一个ApplicationArguments对象，可以用于获取应用程序启动时的命令行参数</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyApplicationRunner</span> <span class="keyword">implements</span> <span class="title class_">ApplicationRunner</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">(ApplicationArguments args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 在应用启动时执行的初始化操作</span></span><br><span class="line">        System.out.println(<span class="string">&quot;实现ApplicationRunner 接口方案：执行初始化操作...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现InitializingBean接口"><a href="#实现InitializingBean接口" class="headerlink" title="实现InitializingBean接口"></a>实现InitializingBean接口</h2><p>这是Spring Framework提供的一种预加载方案。通过实现InitializingBean接口，可以在Spring Bean创建完成后进行初始化操作。具体而言，实现该接口的类需要重写afterPropertiesSet方法，在该方法中编写需要在Bean创建完成后执行的逻辑代码。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyInitializingBean</span> <span class="keyword">implements</span> <span class="title class_">InitializingBean</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterPropertiesSet</span><span class="params">()</span>  &#123;</span><br><span class="line">        <span class="comment">// 在Spring Bean创建完成后执行的初始化操作</span></span><br><span class="line">        System.out.println(<span class="string">&quot;实现InitializingBean接口方案：执行初始化操作...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="实现ApplicationListener接口"><a href="#实现ApplicationListener接口" class="headerlink" title="实现ApplicationListener接口"></a>实现ApplicationListener接口</h2><p>这是Spring Framework提供的另一种预加载方案。通过实现ApplicationListener接口，并监听ContextRefreshedEvent事件，可以在Spring容器刷新完成后执行一些初始化操作。具体而言，实现该接口的类需要重写onApplicationEvent方法，并在该方法中编写需要在容器刷新完成后执行的逻辑代码。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyApplicationListener</span> <span class="keyword">implements</span> <span class="title class_">ApplicationListener</span>&lt;ContextRefreshedEvent&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onApplicationEvent</span><span class="params">(ContextRefreshedEvent event)</span> &#123;</span><br><span class="line">        <span class="comment">// 在Spring容器刷新完成后执行的初始化操作</span></span><br><span class="line">        System.out.println(<span class="string">&quot;实现ApplicationListener&lt;ContextRefreshedEvent&gt;接口方案：执行初始化操作...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-PostConstruct注解"><a href="#使用-PostConstruct注解" class="headerlink" title="使用@PostConstruct注解"></a>使用@PostConstruct注解</h2><p>这是Java EE提供的一种预加载方案。通过在方法上添加@PostConstruct注解，可以在Bean创建完成后进行初始化操作。具体而言，被@PostConstruct注解修饰的方法会在Bean创建完成后自动执行，可以在该方法中编写需要进行的初始化逻辑代码</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyPostConstruct</span> &#123;</span><br><span class="line">    <span class="meta">@PostConstruct</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 在Spring Bean创建完成后执行的初始化操作</span></span><br><span class="line">        System.out.println(<span class="string">&quot;使用@PostConstruct注解方案：执行初始化操作...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="使用-EventListener注解"><a href="#使用-EventListener注解" class="headerlink" title="使用@EventListener注解"></a>使用@EventListener注解</h2><p>这是Spring Framework提供的另一种预加载方案。通过在方法上添加@EventListener注解，并指定相关的事件类型，可以在特定事件触发时执行初始化操作。具体而言，被@EventListener注解修饰的方法会在对应的事件触发时执行，可以通过该方法编写需要进行的初始化逻辑代码。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyEventListener</span> &#123;</span><br><span class="line">    <span class="meta">@EventListener</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleContextRefreshedEvent</span><span class="params">(ContextRefreshedEvent event)</span> &#123;</span><br><span class="line">        <span class="comment">// 在Spring容器刷新完成后执行的初始化操作</span></span><br><span class="line">        System.out.println(<span class="string">&quot;使用@EventListener注解方案：执行初始化操作...&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="任务调度"><a href="#任务调度" class="headerlink" title="任务调度"></a>任务调度</h1><h2 id="任务调度（定时任务）简介"><a href="#任务调度（定时任务）简介" class="headerlink" title="任务调度（定时任务）简介"></a>任务调度（定时任务）简介</h2><p>任务调度是指系统为了自动完成特定任务，在约定的特定时刻去执行任务的过程。通过任务调度，可以实现自动执行重复性、定时性或周期性的任务，从而提高效率和减少人力成本。</p><table><thead><tr><th>常见</th><th>举例</th></tr></thead><tbody><tr><td>时间驱动</td><td>在指定的时间点执行特定的任务。例如：定时发送优惠券、定时发送短信通知等</td></tr><tr><td>批量处理数据</td><td>定时执行批量任务来处理大量的数据，例如：每天定时统计上个月的账单、每周定时统计销售数据</td></tr><tr><td>固定频率</td><td>按固定的时间间隔执行任务。例如：每隔5分钟执行一次数据同步、每小时执行一次数据备份等。</td></tr></tbody></table><h2 id="任务调度常见实现方式"><a href="#任务调度常见实现方式" class="headerlink" title="任务调度常见实现方式"></a>任务调度常见实现方式</h2><ol><li><strong>多线程方式</strong>：手动开启一个线程，通过<code>Thread.sleep()</code>方法，实现任务的延时和定时执行</li><li><strong>JDK提供的java.util.Timer</strong>：使用TimerTask对象表示要执行的任务，并通过schedule()方法设置任务的执行时间和频率</li><li><strong>JDK提供的ScheduledExecutorService接口</strong>：提供了一个线程池，并且能够在指定的时间间隔或特定时间执行任务</li><li><strong>Quartz调度器</strong>：Quartz是一个功能强大的开源任务调度框架，提供了复杂的任务调度和作业管理功能</li><li><strong>Spring提供的注解</strong>：Spring框架提供了简化任务调度的注解@EnableScheduling和@Scheduled</li></ol><h2 id="多线程实现任务调度"><a href="#多线程实现任务调度" class="headerlink" title="多线程实现任务调度"></a>多线程实现任务调度</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TaskScheduler</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Timer</span> <span class="variable">timer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Timer</span>();</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 延迟1秒后开始执行，然后每隔5秒执行一次</span></span><br><span class="line">        timer.schedule(<span class="keyword">new</span> <span class="title class_">TimerTask</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="comment">// 执行具体的任务逻辑</span></span><br><span class="line">                System.out.println(<span class="string">&quot;Task executed at: &quot;</span> + System.currentTimeMillis());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="number">1000</span>, <span class="number">5000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="java-util-Timer实现任务调度"><a href="#java-util-Timer实现任务调度" class="headerlink" title="java.util.Timer实现任务调度"></a>java.util.Timer实现任务调度</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TaskScheduler</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ScheduledExecutorService</span> <span class="variable">scheduler</span> <span class="operator">=</span> Executors.newScheduledThreadPool(<span class="number">1</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 延迟1秒后开始执行任务，然后每隔5秒执行一次</span></span><br><span class="line">        scheduler.scheduleAtFixedRate(() -&gt; &#123;</span><br><span class="line">            <span class="comment">// 执行具体的任务逻辑</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Task executed at: &quot;</span> + System.currentTimeMillis());</span><br><span class="line">        &#125;, <span class="number">1</span>, <span class="number">5</span>, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="ScheduledExecutorService接口实现任务调度"><a href="#ScheduledExecutorService接口实现任务调度" class="headerlink" title="ScheduledExecutorService接口实现任务调度"></a>ScheduledExecutorService接口实现任务调度</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TaskScheduler</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ScheduledExecutorService</span> <span class="variable">scheduler</span> <span class="operator">=</span> Executors.newScheduledThreadPool(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 延迟1秒后开始执行任务，然后每隔5秒执行一次</span></span><br><span class="line">        scheduler.scheduleAtFixedRate(() -&gt; &#123;</span><br><span class="line">            <span class="comment">// 执行具体的任务逻辑</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Task executed at: &quot;</span> + System.currentTimeMillis());</span><br><span class="line">        &#125;, <span class="number">1</span>, <span class="number">5</span>, TimeUnit.SECONDS);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="第三方库Quartz实现任务调度"><a href="#第三方库Quartz实现任务调度" class="headerlink" title="第三方库Quartz实现任务调度"></a>第三方库Quartz实现任务调度</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TaskScheduler</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> SchedulerException &#123;</span><br><span class="line">        <span class="type">SchedulerFactory</span> <span class="variable">schedulerFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StdSchedulerFactory</span>();</span><br><span class="line">        <span class="type">Scheduler</span> <span class="variable">scheduler</span> <span class="operator">=</span> schedulerFactory.getScheduler();</span><br><span class="line"></span><br><span class="line">        <span class="type">JobDetail</span> <span class="variable">job</span> <span class="operator">=</span> JobBuilder.newJob(MyJob.class)</span><br><span class="line">                .withIdentity(<span class="string">&quot;myJob&quot;</span>, <span class="string">&quot;group1&quot;</span>)</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        <span class="type">Trigger</span> <span class="variable">trigger</span> <span class="operator">=</span> TriggerBuilder.newTrigger()</span><br><span class="line">                .withIdentity(<span class="string">&quot;myTrigger&quot;</span>, <span class="string">&quot;group1&quot;</span>)</span><br><span class="line">                .startNow()</span><br><span class="line">                .withSchedule(SimpleScheduleBuilder.simpleSchedule()</span><br><span class="line">                        .withIntervalInSeconds(<span class="number">5</span>) <span class="comment">// 每隔5秒执行一次</span></span><br><span class="line">                        .repeatForever())</span><br><span class="line">                .build();</span><br><span class="line"></span><br><span class="line">        scheduler.scheduleJob(job, trigger);</span><br><span class="line">        scheduler.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MyJob</span> <span class="keyword">implements</span> <span class="title class_">Job</span> &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">execute</span><span class="params">(JobExecutionContext context)</span> <span class="keyword">throws</span> JobExecutionException &#123;</span><br><span class="line">            <span class="comment">// 执行具体的任务逻辑</span></span><br><span class="line">            System.out.println(<span class="string">&quot;Task executed at: &quot;</span> + System.currentTimeMillis());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="Spring提供的注解实现任务调度"><a href="#Spring提供的注解实现任务调度" class="headerlink" title="Spring提供的注解实现任务调度"></a>Spring提供的注解实现任务调度</h2><h3 id="Spring定时任务实现步骤"><a href="#Spring定时任务实现步骤" class="headerlink" title="Spring定时任务实现步骤"></a>Spring定时任务实现步骤</h3><p>Spring Boot提供了@EnableScheduling注解，用来开启定时任务功能，一般我们会在主启动类开启定时任务功能</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableScheduling</span> <span class="comment">// 开启定时任务功能</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Application</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        SpringApplication.run(Application.class, args);</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当开启定时任务功能后，只需创建要执行的定时任务类，并在需要定时执行的方法上添加@Scheduled注解即可使用</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyScheduledTask</span> &#123;</span><br><span class="line">    <span class="meta">@Scheduled(cron = &quot;0 0 * * * ?&quot;)</span> <span class="comment">// 每小时触发一次 </span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myTask</span><span class="params">()</span> &#123; </span><br><span class="line">        <span class="comment">// 需要定时执行的任务逻辑 </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Scheduled注解说明"><a href="#Scheduled注解说明" class="headerlink" title="@Scheduled注解说明"></a>@Scheduled注解说明</h3><p>@Scheduled注解是Spring框架提供的用于配置定时任务的注解，用于指定方法的执行时间和执行频率</p><table><thead><tr><th>常用属性</th><th>简介</th></tr></thead><tbody><tr><td>fixedDelay</td><td>固定延迟时间，表示在上一次任务执行完成后，等待指定的时间间隔后再执行下一次任务。时间间隔单位为毫秒</td></tr><tr><td>fixedRate</td><td>固定执行速率，表示以固定的速率执行任务，不论上一次任务是否完成。时间间隔单位为毫秒</td></tr><tr><td>initialDelay</td><td>初始延迟时间，表示首次执行任务前的延迟时间。时间间隔单位为毫秒</td></tr><tr><td>cron</td><td>使用cron表达式配置任务执行时间。cron表达式可以精确到秒级，更灵活地定义任务的执行时间</td></tr><tr><td>zone</td><td>指定cron表达式的时区，默认为服务器所在时区</td></tr></tbody></table><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyScheduledTask</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 延迟5秒后执行</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Scheduled(fixedDelay = 5000)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myTask1</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;延迟5秒后执行=====&gt;&gt;&gt;&gt;&gt;&quot;</span> + LocalDateTime.now());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 每隔5秒执行</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Scheduled(fixedRate = 5000)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myTask2</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;每隔5秒执行=====&gt;&gt;&gt;&gt;&gt;&quot;</span> + LocalDateTime.now());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始延迟3秒，然后每隔5秒执行</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Scheduled(initialDelay = 3000, fixedRate = 5000)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myTask3</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;初始延迟3秒，然后每隔5秒执行=====&gt;&gt;&gt;&gt;&gt;&quot;</span> + LocalDateTime.now());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 每小时触发一次</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Scheduled(cron = &quot;0 0 * * * ?&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myTask4</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;每小时触发一次=====&gt;&gt;&gt;&gt;&gt;&quot;</span> + LocalDateTime.now());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 使用上海时区触发每小时一次</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Scheduled(cron = &quot;0 0 * * * ?&quot;, zone = &quot;Asia/Shanghai&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">myTask5</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;使用上海时区触发每小时一次=====&gt;&gt;&gt;&gt;&gt;&quot;</span> + LocalDateTime.now());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Cron表达式"><a href="#Cron表达式" class="headerlink" title="Cron表达式"></a>Cron表达式</h3><blockquote><p>Cron表达式是一种用于定义定时任务执行时间的字符串格式。</p></blockquote><p>Cron表达式由6或7个字段组成，表示秒、分钟、小时、天（月份中的某一天）、月份和星期几，语法如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Scheduled(cron = &quot; &#123;秒数&#125; &#123;分钟&#125; &#123;小时&#125; &#123;日期&#125; &#123;月份&#125; &#123;星期&#125; &#123;年份(可为空)&#125; &quot;)</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>字段</th><th>简介</th></tr></thead><tbody><tr><td>Seconds（秒）</td><td>可以用数字0－59 表示，不允许为空值</td></tr><tr><td>Minutes（分）</td><td>可以用数字0－59 表示，不允许为空值</td></tr><tr><td>Hours（时）</td><td>可以用数字0-23表示，不允许为空值</td></tr><tr><td>Day-of-Month（天）</td><td>可以用数字1-31表示，但要注意一些特别的月份，不允许为空值</td></tr><tr><td>Month（月）</td><td>可以用0-11表示，还可以使用字符串 “JAN, FEB, MAR, APR, MAY, JUN, JUL, AUG, SEP, OCT, NOV and DEC” 表示，不允许为空值</td></tr><tr><td>Day-of-Week（每周）</td><td>可以用数字1-7（1 ＝ 星期日）表示，还可以使用字符串“SUN, MON, TUE, WED, THU, FRI and SAT”表示，不允许为空值</td></tr><tr><td>Year（年）</td><td>1970~2099 ，允许为空</td></tr></tbody></table><p>Cron表达式支持以下特殊符号和通配符</p><table><thead><tr><th>符号</th><th>含义</th></tr></thead><tbody><tr><td><code>*</code></td><td>该字段的每个可能值。例如，*在分钟字段表示每分钟触发。</td></tr><tr><td><code>/</code></td><td>用于定义增量步长。例如，0&#x2F;15在秒字段表示从0秒开始，每隔15秒触发一次。</td></tr><tr><td><code>,</code></td><td>用于指定多个值。例如，1,3,5在小时字段表示1点、3点和5点触发。</td></tr><tr><td><code>-</code></td><td>用于指定范围。例如，10-15在分钟字段表示从第10分钟到第15分钟触发。</td></tr><tr><td><code>?</code></td><td>用于天和星期字段，表示不指定具体值。例如，?在天字段表示不关心天数，只关心星期几。</td></tr><tr><td><code>L</code></td><td>用于天和星期字段，表示最后一天或最后一个星期几。例如，L在天字段表示每个月的最后一天触发。</td></tr></tbody></table><p>Cron表达式一般不需要自己写，可以使用<a target="_blank" rel="noopener" href="https://www.pppet.net/">在线Cron表达式生成器</a>生成，一些示例Cron表达式如下</p><table><thead><tr><th>表达式</th><th>简介</th></tr></thead><tbody><tr><td>*&#x2F;5 * * * * ?</td><td>每隔5秒执行一次</td></tr><tr><td>0 0 5-15 * * ?</td><td>每三分钟触发一次</td></tr><tr><td>0 0 12 ? * WED</td><td>每个星期三中午12点触发一次</td></tr></tbody></table><h2 id="Async异步任务"><a href="#Async异步任务" class="headerlink" title="Async异步任务"></a>Async异步任务</h2><p>当定时任务增多时，如果一个任务卡死，可能会导致其他任务也无法执行，从而影响系统的正常运行。为了解决这个问题，可以使用配置类添加异步任务的配置，将每个任务的执行逻辑放在独立的线程中进行，这样即使某个任务出现问题，也不会影响其他任务的正常执行</p><p>（1）创建一个异步任务执行的线程池配置类，并使用@EnableAsync 注解开启异步方法执行的支持</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 异步任务执行的线程池配置类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@EnableAsync</span><span class="comment">// 开启异步事件的支持</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AsyncConfig</span> &#123;</span><br><span class="line">    <span class="comment">// 此处成员变量建议从配置文件中读取</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">corePoolSize</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">maxPoolSize</span> <span class="operator">=</span> <span class="number">200</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">queueCapacity</span> <span class="operator">=</span> Integer.MAX_VALUE;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="variable">keepAliveSeconds</span> <span class="operator">=</span> <span class="number">60</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 配置异步任务执行的线程池</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Executor 线程池实例</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Executor <span class="title function_">taskExecutor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ThreadPoolTaskExecutor</span> <span class="variable">executor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ThreadPoolTaskExecutor</span>();</span><br><span class="line">        executor.setCorePoolSize(corePoolSize); <span class="comment">// 设置核心线程数</span></span><br><span class="line">        executor.setMaxPoolSize(maxPoolSize);  <span class="comment">// 设置核心线程数</span></span><br><span class="line">        executor.setQueueCapacity(queueCapacity); <span class="comment">// 配置队列大小</span></span><br><span class="line">        executor.setKeepAliveSeconds(keepAliveSeconds); <span class="comment">// 设置线程活跃时间（秒）</span></span><br><span class="line">        executor.setThreadNamePrefix(<span class="string">&quot;Async-Executor-&quot;</span>); <span class="comment">// 线程名称前缀</span></span><br><span class="line">        executor.setWaitForTasksToCompleteOnShutdown(<span class="literal">true</span>); <span class="comment">// 等待所有任务结束后再关闭线程池</span></span><br><span class="line">        executor.setRejectedExecutionHandler(<span class="keyword">new</span> <span class="title class_">ThreadPoolExecutor</span>.CallerRunsPolicy()); <span class="comment">// 拒绝策略（一共四种）</span></span><br><span class="line">        executor.initialize();<span class="comment">// 执行初始化，这一步千万不能忘了，否则报错： java.lang.IllegalStateException: ThreadPoolTaskExecutor not initialized</span></span><br><span class="line">        <span class="keyword">return</span> executor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>（2）配置异步任务后，可以使用@Async注解来标识需要异步执行的方法。通过在方法上添加@Async注解，Spring框架会将该方法放入线程池中执行，而不会阻塞当前线程。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AsyncTask</span> &#123;</span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">asyncMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 异步执行的逻辑代码</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="跨域问题"><a href="#跨域问题" class="headerlink" title="跨域问题"></a>跨域问题</h1><h2 id="跨域问题简介"><a href="#跨域问题简介" class="headerlink" title="跨域问题简介"></a>跨域问题简介</h2><blockquote><p>跨域指的是不同服务器之间，不能相互访问各自的资源或者数据</p></blockquote><ul><li>不同协议的网站不能相互访问：例如<code>https://baidu.com</code>不能访问<code>http://baidu.com</code>，因为它们一个是HTTPS协议，一个是HTTP协议</li><li>不同IP的网站不能相互访问：例如<code>http://10.111.115.31</code>不能访问<code>http://12.889.64.31</code>，因为它们是不同的 IP 地址，属于不同的网络</li><li>域名与对应IP的网址不能相互访问：虽然<code>http://baidu.com</code>和<code>http://39.156.66.14/</code>都指向百度的资源，但由于域名和 IP 地址不一致，因此视为跨域访问。</li><li>不同子域名下的网站不能相互访问：例如<code>https://www.example.com</code>不能访问<code>https://api.example.com</code></li><li>不同顶级域名下的网站不能相互访问：例如<code>https://example.com</code>不能访问<code>https://example.net</code></li><li>同一台服务器不同端口互相访问：比如<code>http://localhost:80</code>不能访问<code>http://localhost:8080</code></li></ul><h2 id="跨域出现的原因"><a href="#跨域出现的原因" class="headerlink" title="跨域出现的原因"></a>跨域出现的原因</h2><p>跨域（Cross-Origin）出现的原因主要是为了保护用户的信息安全和防止恶意攻击。</p><p>浏览器所实施的跨域限制是基于同源策略（Same-Origin Policy），它规定了不同源之间的访问权限。</p><ol><li><strong>协议相同</strong>：两个网页的协议必须相同，如都是使用 HTTP 或者 HTTPS。</li><li><strong>域名相同</strong>：两个网页的域名必须相同，包括子域名也必须相同。</li><li><strong>端口相同</strong>：两个网页的端口号必须相同，如果没有显式指定端口，默认为80。</li></ol><h2 id="解决跨域问题的方案"><a href="#解决跨域问题的方案" class="headerlink" title="解决跨域问题的方案"></a>解决跨域问题的方案</h2><ol><li>JSONP（JSON with Padding）：在前端使用动态创建 <code>&lt;script&gt;</code> 标签来加载跨域的 JavaScript 资源，通过回调函数方式获取数据。</li><li>CORS（Cross-Origin Resource Sharing）：在服务器端设置响应头，允许特定域名的跨域请求。</li><li>代理服务器：将跨域请求发送到自己的服务器，再由服务器转发请求并返回结果。</li><li>WebSocket：WebSocket 协议不受同源策略限制，可以实现跨域通信。</li><li>使用服务器端中间件进行跨域设置。</li></ol><h2 id="Java解决跨域的方式"><a href="#Java解决跨域的方式" class="headerlink" title="Java解决跨域的方式"></a>Java解决跨域的方式</h2><h3 id="使用-CrossOrigin注解"><a href="#使用-CrossOrigin注解" class="headerlink" title="使用@CrossOrigin注解"></a>使用@CrossOrigin注解</h3><p>在控制器方法上使用<code>@CrossOrigin</code>注解可以指定允许跨域的域名、请求头等信息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CrossOrigin(origins = &quot;http://example.com&quot;)</span></span><br><span class="line"><span class="meta">@GetMapping(&quot;/api/data&quot;)</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">getData</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="comment">// 处理逻辑</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="实现-WebMvcConfigurer-接口"><a href="#实现-WebMvcConfigurer-接口" class="headerlink" title="实现 WebMvcConfigurer 接口"></a>实现 WebMvcConfigurer 接口</h3><p>通过实现<code>WebMvcConfigurer</code>接口并重写<code>addCorsMappings</code>方法，配置跨域规则</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> <span class="keyword">implements</span> <span class="title class_">WebMvcConfigurer</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> &#123;</span><br><span class="line">        registry.addMapping(<span class="string">&quot;/api/**&quot;</span>)</span><br><span class="line">                .allowedOrigins(<span class="string">&quot;http://example.com&quot;</span>)</span><br><span class="line">                .allowedMethods(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;POST&quot;</span>)</span><br><span class="line">                .allowedHeaders(<span class="string">&quot;header1&quot;</span>, <span class="string">&quot;header2&quot;</span>)</span><br><span class="line">                .allowCredentials(<span class="literal">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="自定义拦截器"><a href="#自定义拦截器" class="headerlink" title="自定义拦截器"></a>自定义拦截器</h3><p>通过自定义拦截器，在请求过程中处理跨域相关逻辑</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CorsInterceptor</span> <span class="keyword">extends</span> <span class="title class_">HandlerInterceptorAdapter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        response.setHeader(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="string">&quot;http://example.com&quot;</span>);</span><br><span class="line">        response.setHeader(<span class="string">&quot;Access-Control-Allow-Methods&quot;</span>, <span class="string">&quot;GET, POST&quot;</span>);</span><br><span class="line">        response.setHeader(<span class="string">&quot;Access-Control-Allow-Headers&quot;</span>, <span class="string">&quot;header1, header2&quot;</span>);</span><br><span class="line">        response.setHeader(<span class="string">&quot;Access-Control-Allow-Credentials&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="自定义过滤器"><a href="#自定义过滤器" class="headerlink" title="自定义过滤器"></a>自定义过滤器</h3><p>通过自定义 Filter，在请求过程中添加跨域相关的响应头信息</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CorsFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="type">HttpServletResponse</span> <span class="variable">httpResponse</span> <span class="operator">=</span> (HttpServletResponse) response;</span><br><span class="line">        httpResponse.addHeader(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>, <span class="string">&quot;http://example.com&quot;</span>);</span><br><span class="line">        httpResponse.addHeader(<span class="string">&quot;Access-Control-Allow-Methods&quot;</span>, <span class="string">&quot;GET, POST&quot;</span>);</span><br><span class="line">        httpResponse.addHeader(<span class="string">&quot;Access-Control-Allow-Headers&quot;</span>, <span class="string">&quot;header1, header2&quot;</span>);</span><br><span class="line">        httpResponse.addHeader(<span class="string">&quot;Access-Control-Allow-Credentials&quot;</span>, <span class="string">&quot;true&quot;</span>);</span><br><span class="line">        chain.doFilter(request, response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用Spring-Web的CorsFilter过滤器"><a href="#使用Spring-Web的CorsFilter过滤器" class="headerlink" title="使用Spring Web的CorsFilter过滤器"></a>使用Spring Web的CorsFilter过滤器</h3><p>在 Spring Web 配置中添加<code>CorsFilter</code>过滤器，并配置跨域规则</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WebConfig</span> &#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> CorsFilter <span class="title function_">corsFilter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">CorsConfiguration</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CorsConfiguration</span>();</span><br><span class="line">        config.addAllowedOrigin(<span class="string">&quot;http://example.com&quot;</span>);</span><br><span class="line">        config.addAllowedMethod(<span class="string">&quot;GET&quot;</span>);</span><br><span class="line">        config.addAllowedHeader(<span class="string">&quot;header1&quot;</span>);</span><br><span class="line">        config.setAllowCredentials(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">UrlBasedCorsConfigurationSource</span> <span class="variable">source</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UrlBasedCorsConfigurationSource</span>();</span><br><span class="line">        source.registerCorsConfiguration(<span class="string">&quot;/api/**&quot;</span>, config);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">CorsFilter</span>(source);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用Spring-Cloud-Gateway跨域配置"><a href="#使用Spring-Cloud-Gateway跨域配置" class="headerlink" title="使用Spring Cloud Gateway跨域配置"></a>使用Spring Cloud Gateway跨域配置</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">cloud:</span></span><br><span class="line">    <span class="attr">gateway:</span></span><br><span class="line">      <span class="attr">globalcors:</span></span><br><span class="line">        <span class="attr">corsConfigurations:</span></span><br><span class="line">          <span class="string">&#x27;[/**]&#x27;</span><span class="string">:</span></span><br><span class="line">            <span class="attr">allowedOrigins:</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">http://example.com</span></span><br><span class="line">            <span class="attr">allowedMethods:</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">GET</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">POST</span></span><br><span class="line">            <span class="attr">allowedHeaders:</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">header1</span></span><br><span class="line">              <span class="bullet">-</span> <span class="string">header2</span></span><br><span class="line">            <span class="attr">allowCredentials:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h3 id="使用Nginx配置"><a href="#使用Nginx配置" class="headerlink" title="使用Nginx配置"></a>使用Nginx配置</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">location /api/ &#123;</span><br><span class="line">    add_header Access-Control-Allow-Origin http://example.com;</span><br><span class="line">    add_header Access-Control-Allow-Methods GET, POST;</span><br><span class="line">    add_header Access-Control-Allow-Headers header1, header2;</span><br><span class="line">    add_header Access-Control-Allow-Credentials <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="日期格式问题"><a href="#日期格式问题" class="headerlink" title="日期格式问题"></a>日期格式问题</h1><h2 id="问题说明"><a href="#问题说明" class="headerlink" title="问题说明"></a>问题说明</h2><ul><li><strong>问题一</strong>：<code>后端</code>从数据库获取日期时间<code>传到前端</code>进行展示的时候，发现有时候日期格式发生了变化。从数据库获取出来日期为：2022-01-01T00:00:00.000+00:00，但有时候传递到前端后日期格式变为了时间戳：1640995200000，而一般需要的日期格式为：<code>yyyy-MM-dd</code>或<code>yyyy-MM-dd HH:mm:ss</code></li><li><strong>问题二</strong>：<code>前端传入</code>日期时间<code>给后端</code>时，日期时间格式也可能会有格式转换问题</li></ul><h2 id="问题一解决方案"><a href="#问题一解决方案" class="headerlink" title="问题一解决方案"></a>问题一解决方案</h2><p>（1）如果项目中使用的日期时间的字段类型只有Date类型，可以使用Springboot的配置文件application.yml配置日期时间的格式</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">jackson:</span></span><br><span class="line">    <span class="attr">date-format:</span> <span class="string">yyyy-MM-dd</span> <span class="string">HH:mm:ss</span></span><br><span class="line">    <span class="attr">time-zone:</span> <span class="string">GMT+8</span></span><br></pre></td></tr></table></figure><p>（2）如果项目中用到的时间和日期API 比较混乱， java.util.Date、 java.util.Calendar 和 java.time LocalDateTime 都存在，可以使用@JsonFormat注解解决</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Example</span> &#123;</span><br><span class="line">    <span class="meta">@JsonFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;, timezone = &quot;GMT+8&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Date datetime;</span><br><span class="line">    <span class="comment">// 其他属性及方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="问题二解决方案"><a href="#问题二解决方案" class="headerlink" title="问题二解决方案"></a>问题二解决方案</h2><p>可以使用@RequestParam注解和@DateTimeFormat注解来指定日期时间的格式</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@PostMapping(&quot;/example&quot;)</span> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">example</span><span class="params">(<span class="meta">@RequestParam(&quot;datetime&quot;)</span> <span class="meta">@DateTimeFormat(pattern = &quot;yyyy-MM-dd HH:mm:ss&quot;)</span> Date datetime)</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="自定义JSON序列化器或反序列化器"><a href="#自定义JSON序列化器或反序列化器" class="headerlink" title="自定义JSON序列化器或反序列化器"></a>自定义JSON序列化器或反序列化器</h2><p>使用@JsonFormat注解和@DateTimeFormat注解只能单一针对一个日期时间属性生效，每个日期时间属性都配置的话有些麻烦，这时可以考虑使用统一配置，如果项目中存在复杂的日期时间转换需求，可以考虑自定义JSON序列化器（Serializer）和反序列化器（Deserializer）来处理。这样可以更加灵活地控制日期时间的格式转换。</p><ul><li>@JsonComponent注解：注册自定义的JSON序列化器（Serializer）或反序列化器（Deserializer）</li><li>@Configuration注解：利用配置类统一配置时间类型装换</li></ul><h3 id="使用-JsonComponent注解自定义的序列化器或反序列化器"><a href="#使用-JsonComponent注解自定义的序列化器或反序列化器" class="headerlink" title="使用@JsonComponent注解自定义的序列化器或反序列化器"></a>使用@JsonComponent注解自定义的序列化器或反序列化器</h3><p>@JsonComponent注解是Spring框架提供的注解，用于注册自定义的JSON序列化器（Serializer）或反序列化器（Deserializer）作为全局组件。当进行对象的JSON序列化或反序列化时，Spring会自动识别被@JsonComponent注解标记的类，并在对象转换过程中自动调用这些组件。这样就实现了自定义序列化器或反序列化器的全局生效，而无需显式地在每个需要进行对象转换的地方进行配置。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 全局时间格式化类，用于处理java.util.Date、java.util.Calendar和java.time.LocalDateTime等类型的时间对象序列化。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@JsonComponent</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalDateTimeSerializer</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">SimpleDateFormat</span> <span class="variable">DATE_FORMAT</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">SimpleDateFormat</span> <span class="variable">DATE_TIME_FORMAT</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">DateTimeFormatter</span> <span class="variable">LOCAL_DATE_TIME_FORMATTER</span> <span class="operator">=</span> DateTimeFormatter.ofPattern(<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用于将java.util.Date类型的时间对象序列化为yyyy-MM-dd HH:mm:ss格式的字符串。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">DateSerializer</span> <span class="keyword">extends</span> <span class="title class_">JsonSerializer</span>&lt;Date&gt; &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">serialize</span><span class="params">(Date date, JsonGenerator jsonGenerator, SerializerProvider serializerProvider)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">            jsonGenerator.writeString(DATE_TIME_FORMAT.format(date));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用于将java.time.LocalDateTime类型的时间对象序列化为yyyy-MM-dd HH:mm:ss格式的字符串。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">LocalDateTimeSerializer</span> <span class="keyword">extends</span> <span class="title class_">JsonSerializer</span>&lt;LocalDateTime&gt; &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">serialize</span><span class="params">(LocalDateTime localDateTime, JsonGenerator jsonGenerator, SerializerProvider serializerProvider)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">            jsonGenerator.writeString(LOCAL_DATE_TIME_FORMATTER.format(localDateTime));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 用于将java.util.Calendar类型的时间对象序列化为yyyy-MM-dd格式的字符串。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">CalendarSerializer</span> <span class="keyword">extends</span> <span class="title class_">JsonSerializer</span>&lt;Calendar&gt; &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">serialize</span><span class="params">(Calendar calendar, JsonGenerator jsonGenerator, SerializerProvider serializerProvider)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">            jsonGenerator.writeString(DATE_FORMAT.format(calendar.getTime()));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="使用-Configuration注解统一配置时间类型装换"><a href="#使用-Configuration注解统一配置时间类型装换" class="headerlink" title="使用@Configuration注解统一配置时间类型装换"></a>使用@Configuration注解统一配置时间类型装换</h3><p>配置后所有的日期字段都会格式化成：yyyy-MM-dd HH:mm:ss 格式，如果需要：yyyy-MM-dd 格式，可配合注解</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 配置类，用于处理日期和时间的转换</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DateHandlerConfig</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 默认日期时间格式</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DATE_TIME_FORMAT</span> <span class="operator">=</span> <span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 默认日期格式</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">DATE_FORMAT</span> <span class="operator">=</span> <span class="string">&quot;yyyy-MM-dd&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 默认时间格式</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">String</span> <span class="variable">TIME_FORMAT</span> <span class="operator">=</span> <span class="string">&quot;HH:mm:ss&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Date转换器，将字符串转换为Date对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Converter&lt;String, Date&gt; <span class="title function_">dateConverter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Converter</span>&lt;String, Date&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Date <span class="title function_">convert</span><span class="params">(String source)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> DateUtil.parse(source.trim()); <span class="comment">// 调用DateUtil类的parse方法将字符串转换为Date对象</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * LocalDate转换器，将字符串转换为LocalDate对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Converter&lt;String, LocalDate&gt; <span class="title function_">localDateConverter</span><span class="params">()</span> &#123;</span><br><span class="line">        Converter&lt;String, LocalDate&gt; converter = <span class="keyword">new</span> <span class="title class_">Converter</span>&lt;String, LocalDate&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> LocalDate <span class="title function_">convert</span><span class="params">(String source)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> LocalDate.parse(source, DateTimeFormatter.ofPattern(DATE_FORMAT)); <span class="comment">// 使用指定的日期格式解析字符串为LocalDate对象</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span> converter;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * LocalTime转换器，将字符串转换为LocalTime对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Converter&lt;String, LocalTime&gt; <span class="title function_">localTimeConverter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Converter</span>&lt;String, LocalTime&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> LocalTime <span class="title function_">convert</span><span class="params">(String source)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> LocalTime.parse(source, DateTimeFormatter.ofPattern(TIME_FORMAT)); <span class="comment">// 使用指定的时间格式解析字符串为LocalTime对象</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * LocalDateTime转换器，将字符串转换为LocalDateTime对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> Converter&lt;String, LocalDateTime&gt; <span class="title function_">localDateTimeConverter</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Converter</span>&lt;String, LocalDateTime&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> LocalDateTime <span class="title function_">convert</span><span class="params">(String source)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> LocalDateTime.parse(source, DateTimeFormatter.ofPattern(DATE_TIME_FORMAT)); <span class="comment">// 使用指定的日期时间格式解析字符串为LocalDateTime对象</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Json序列化和反序列化转换器</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> ObjectMapper <span class="title function_">objectMapper</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>(); <span class="comment">// 创建ObjectMapper对象</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建JavaTimeModule对象，用于处理Java 8日期和时间类型的序列化和反序列化</span></span><br><span class="line">        <span class="type">JavaTimeModule</span> <span class="variable">javaTimeModule</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JavaTimeModule</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 向JavaTimeModule对象注册序列化器，将LocalDate对象格式化为指定的日期格式</span></span><br><span class="line">        javaTimeModule.addSerializer(LocalDate.class, <span class="keyword">new</span> <span class="title class_">LocalDateSerializer</span>(DateTimeFormatter.ofPattern(DATE_FORMAT)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 向JavaTimeModule对象注册序列化器，将LocalTime对象格式化为指定的时间格式</span></span><br><span class="line">        javaTimeModule.addSerializer(LocalTime.class, <span class="keyword">new</span> <span class="title class_">LocalTimeSerializer</span>(DateTimeFormatter.ofPattern(TIME_FORMAT)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 向JavaTimeModule对象注册序列化器，将LocalDateTime对象格式化为指定的日期时间格式</span></span><br><span class="line">        javaTimeModule.addSerializer(LocalDateTime.class, <span class="keyword">new</span> <span class="title class_">LocalDateTimeSerializer</span>(DateTimeFormatter.ofPattern(DATE_TIME_FORMAT)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 向JavaTimeModule对象注册反序列化器，将字符串解析为LocalDate对象</span></span><br><span class="line">        javaTimeModule.addDeserializer(LocalDate.class, <span class="keyword">new</span> <span class="title class_">LocalDateDeserializer</span>(DateTimeFormatter.ofPattern(DATE_FORMAT)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 向JavaTimeModule对象注册反序列化器，将字符串解析为LocalTime对象</span></span><br><span class="line">        javaTimeModule.addDeserializer(LocalTime.class, <span class="keyword">new</span> <span class="title class_">LocalTimeDeserializer</span>(DateTimeFormatter.ofPattern(TIME_FORMAT)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 向JavaTimeModule对象注册反序列化器，将字符串解析为LocalDateTime对象</span></span><br><span class="line">        javaTimeModule.addDeserializer(LocalDateTime.class, <span class="keyword">new</span> <span class="title class_">LocalDateTimeDeserializer</span>(DateTimeFormatter.ofPattern(DATE_TIME_FORMAT)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将JavaTimeModule注册到ObjectMapper中</span></span><br><span class="line">        objectMapper.registerModule(<span class="keyword">new</span> <span class="title class_">ParameterNamesModule</span>())</span><br><span class="line">                .registerModule(<span class="keyword">new</span> <span class="title class_">Jdk8Module</span>())</span><br><span class="line">                .registerModule(javaTimeModule);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 关闭对日期的序列化为时间戳的支持</span></span><br><span class="line">        objectMapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 禁用调整日期为上下文时区的功能</span></span><br><span class="line">        objectMapper.disable(DeserializationFeature.ADJUST_DATES_TO_CONTEXT_TIME_ZONE);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 禁用未知属性失败的功能</span></span><br><span class="line">        objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 禁用空对象序列化失败的功能</span></span><br><span class="line">        objectMapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 启用输出缩进的功能</span></span><br><span class="line">        objectMapper.configure(SerializationFeature.INDENT_OUTPUT, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置序列化时包含非空属性</span></span><br><span class="line">        objectMapper.setSerializationInclusion(JsonInclude.Include.NON_NULL);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置时区为GMT+8:00</span></span><br><span class="line">        objectMapper.setTimeZone(TimeZone.getTimeZone(<span class="string">&quot;GMT+8:00&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置默认的日期格式化模式</span></span><br><span class="line">        objectMapper.setDateFormat(<span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(DATE_TIME_FORMAT));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> objectMapper;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h1><h2 id="自定义异常处理类"><a href="#自定义异常处理类" class="headerlink" title="自定义异常处理类"></a>自定义异常处理类</h2><p>自定义系统异常处理类 <code>SystemException</code>，用于处理系统中特定的异常情况</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 自定义异常处理类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Getter</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SystemException</span> <span class="keyword">extends</span> <span class="title class_">RuntimeException</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> code;<span class="comment">// 异常状态码</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String msg;<span class="comment">// 异常信息</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 构造方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> httpCodeEnum 自定义枚举类，封装 状态码 与 返回信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">SystemException</span><span class="params">(AppHttpCodeEnum httpCodeEnum)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(httpCodeEnum.getMsg());</span><br><span class="line">        <span class="built_in">this</span>.code = httpCodeEnum.getCode();</span><br><span class="line">        <span class="built_in">this</span>.msg = httpCodeEnum.getMsg();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>自定义系统异常处理类 <code>SystemException</code>使用方式</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式一：使用构造方法创建异常对象</span></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(<span class="number">500</span>, <span class="string">&quot;服务器内部错误&quot;</span>);</span><br><span class="line"><span class="comment">// 方式二：使用枚举类 AppHttpCodeEnum 创建异常对象</span></span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">SystemException</span>(AppHttpCodeEnum.INTERNAL_SERVER_ERROR);</span><br></pre></td></tr></table></figure><h2 id="全局异常处理类"><a href="#全局异常处理类" class="headerlink" title="全局异常处理类"></a>全局异常处理类</h2><p>程序在运行的过程中，不可避免的会产生各种各样的错误，当程序抛异常时，为了日志的可读性，排查 Bug简单，以及更好的用户体验性，要对全局异常进行处理</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 全局异常处理，出现的异常只要在其中声明即可捕获</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="meta">@RestControllerAdvice</span><span class="comment">// 声明全局异常处理类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">GlobalExceptionHandler</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 拦截未知异常，并进行相应处理</span></span><br><span class="line"><span class="comment">     * 注解<span class="doctag">@ExceptionHandler</span>用于指定要处理的异常类型，并在方法中进行相应的处理</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> e Exception 异常对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 封装的响应结果</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@ExceptionHandler(Exception.class)</span></span><br><span class="line">    <span class="keyword">public</span> ResponseResult <span class="title function_">exceptionHandler</span><span class="params">(Exception e)</span> &#123;</span><br><span class="line">        <span class="comment">// 打印异常信息</span></span><br><span class="line">        log.error(<span class="string">&quot;出现了异常！ &#123;&#125;&quot;</span>, e.getMessage());</span><br><span class="line">        <span class="comment">// 从异常对象中获取提示信息封装返回</span></span><br><span class="line">        <span class="keyword">return</span> ResponseResult.errorResult(<span class="number">500</span>, e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="统一请求响应模型"><a href="#统一请求响应模型" class="headerlink" title="统一请求响应模型"></a>统一请求响应模型</h1><h2 id="统一响应模型（Result）"><a href="#统一响应模型（Result）" class="headerlink" title="统一响应模型（Result）"></a>统一响应模型（Result）</h2><p>在开发SpringBoot后端服务时，一般需要给前端统一响应格式，方便前端调试及配置错误提示等等</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Getter</span><span class="comment">// 自动生成属性的getter方法</span></span><br><span class="line"><span class="meta">@Setter</span><span class="comment">// 自动生成属性的setter方法</span></span><br><span class="line"><span class="meta">@JsonInclude(JsonInclude.Include.NON_NULL)</span><span class="comment">// 为null的字段不序列化</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Result</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">    <span class="keyword">private</span> Integer code; <span class="comment">// 封装操作结果到flag中（状态码）</span></span><br><span class="line">    <span class="keyword">private</span> String msg; <span class="comment">// 封装特殊消息到message 属性msg中（状态信息）</span></span><br><span class="line">    <span class="keyword">private</span> T data; <span class="comment">// 封装数据到data属性中（数据内容）</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 无参构造方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 带参构造方法，设置状态码和状态信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code 状态码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg  状态信息</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">(Integer code, String msg)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 带参构造方法，设置状态码和数据内容</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code 状态码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data 数据内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">(Integer code, T data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 带参构造方法，设置状态码、状态信息和数据内容</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code 状态码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg  状态信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data 数据内容</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Result</span><span class="params">(Integer code, String msg, T data)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.code = code;</span><br><span class="line">        <span class="built_in">this</span>.msg = msg;</span><br><span class="line">        <span class="built_in">this</span>.data = data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回一个操作成功的Result对象，不带数据内容</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt; Result对象的泛型类型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 操作成功的Result对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(<span class="number">200</span>, <span class="string">&quot;操作成功&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回一个操作成功的Result对象，带数据内容</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data 数据内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;  Result对象的泛型类型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 操作成功的Result对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">(T data)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(<span class="number">200</span>, <span class="string">&quot;操作成功&quot;</span>, data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回一个操作成功的Result对象，带自定义状态码和状态信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code 状态码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg  状态信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;  Result对象的泛型类型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 操作成功的Result对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">success</span><span class="params">(<span class="type">int</span> code, String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(code, msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回一个出现错误的Result对象，不带状态信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt; Result对象的泛型类型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 出现错误的Result对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">error</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(<span class="number">500</span>, <span class="string">&quot;出现错误&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回一个出现错误的Result对象，带自定义状态信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg 状态信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt; Result对象的泛型类型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 出现错误的Result对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">error</span><span class="params">(String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(<span class="number">500</span>, msg);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 返回一个出现错误的Result对象，带自定义状态码和状态信息</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> code 状态码</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> msg  状态信息</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> &lt;T&gt;  Result对象的泛型类型</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 出现错误的Result对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; Result&lt;T&gt; <span class="title function_">error</span><span class="params">(<span class="type">int</span> code, String msg)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Result</span>&lt;&gt;(code, msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="分页响应模型（PageResult）"><a href="#分页响应模型（PageResult）" class="headerlink" title="分页响应模型（PageResult）"></a>分页响应模型（PageResult）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageResult</span>&lt;T&gt; <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> total; <span class="comment">// 总记录数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> pageNum; <span class="comment">// 当前页码</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> pageSize; <span class="comment">// 每页记录数</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;T&gt; records; <span class="comment">// 当前页的数据列表</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="分页请求模型（PageParams）"><a href="#分页请求模型（PageParams）" class="headerlink" title="分页请求模型（PageParams）"></a>分页请求模型（PageParams）</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PageParams</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">long</span> <span class="variable">serialVersionUID</span> <span class="operator">=</span> <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;当前页码&quot;, example = &quot;1&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="variable">pageNum</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ApiModelProperty(value = &quot;每页记录数&quot;, example = &quot;10&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> <span class="variable">pageSize</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="非空判断和为空判断"><a href="#非空判断和为空判断" class="headerlink" title="非空判断和为空判断"></a>非空判断和为空判断</h1><h2 id="常见的-isBlank-和-isEmpty-方法"><a href="#常见的-isBlank-和-isEmpty-方法" class="headerlink" title="常见的 isBlank() 和 isEmpty() 方法"></a>常见的 isBlank() 和 isEmpty() 方法</h2><p>不同的工具类中可能实现细节有些区别，但功能一般都一样。</p><ul><li><strong>isBlank()方法</strong>：判断字符串是否为空或者只包含空白字符（例如空格、制表符、换行符等）。如果字符串为 <code>null</code>，或者长度为 0，或者只包含空白字符，则返回 <code>true</code>，否则返回 <code>false</code>。</li><li><strong>isEmpty()方法</strong>：判断字符串是否为空。如果字符串为 <code>null</code>，或者长度为 0，则返回 <code>true</code>，否则返回 <code>false</code>。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">str1</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>; <span class="comment">// 空字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">str2</span> <span class="operator">=</span> <span class="string">&quot; &quot;</span>; <span class="comment">// 只包含空格的字符串</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">str3</span> <span class="operator">=</span> <span class="literal">null</span>; <span class="comment">// null</span></span><br><span class="line"></span><br><span class="line">        System.out.println(StrUtil.isBlank(str1)); <span class="comment">// true</span></span><br><span class="line">        System.out.println(StrUtil.isBlank(str2)); <span class="comment">// true</span></span><br><span class="line">        System.out.println(StrUtil.isBlank(str3)); <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">        System.out.println(StrUtil.isEmpty(str1)); <span class="comment">// true</span></span><br><span class="line">        System.out.println(StrUtil.isEmpty(str2)); <span class="comment">// false</span></span><br><span class="line">        System.out.println(StrUtil.isEmpty(str3)); <span class="comment">// true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><h3 id="字符串非空判断"><a href="#字符串非空判断" class="headerlink" title="字符串非空判断"></a>字符串非空判断</h3><p>方式一：使用原生判断</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 字符串非空判断</span></span><br><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;example&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(Objects.nonNull(str) &amp;&amp; !str.trim().isEmpty()) &#123;&#125; <span class="comment">// 推荐使用：Objects类中的静态辅助方法</span></span><br><span class="line"><span class="keyword">if</span>(Objects.nonNull(str) &amp;&amp; !str.isEmpty()) &#123;&#125; <span class="comment">// 推荐使用：Objects类中的静态辅助方法</span></span><br><span class="line"><span class="keyword">if</span>(str != <span class="literal">null</span> &amp;&amp; !str.trim().isEmpty())&#123;&#125;<span class="comment">// 推荐使用：判断字符串不为 null，并且经过去除首尾空格后长度大于 0</span></span><br><span class="line"><span class="keyword">if</span>(str != <span class="literal">null</span> &amp;&amp; !str.isEmpty())&#123;&#125;<span class="comment">// 推荐使用：判断字符串不为 null，并且长度大于 0</span></span><br><span class="line"><span class="keyword">if</span>(str != <span class="literal">null</span> &amp;&amp; str.trim().length() &gt; <span class="number">0</span>)&#123;&#125;<span class="comment">// 不推荐使用：虽然能实现非空判断，但推荐使用 isEmpty() 方法来判断字符串是否为空</span></span><br><span class="line"><span class="keyword">if</span>(str != <span class="literal">null</span> &amp;&amp; str.length() &gt; <span class="number">0</span>)&#123;&#125;<span class="comment">// 不推荐使用：虽然能实现非空判断，但没有考虑到字符串中可能存在空格的情况</span></span><br><span class="line"><span class="keyword">if</span>(str != <span class="literal">null</span> &amp;&amp; !str.trim().equals(<span class="string">&quot;&quot;</span>))&#123;&#125;<span class="comment">// 不推荐使用：虽然能实现非空判断，但推荐使用 isEmpty() 方法来判断字符串是否为空</span></span><br><span class="line"><span class="keyword">if</span>(str != <span class="literal">null</span> &amp;&amp; !str.equals(<span class="string">&quot;&quot;</span>))&#123;&#125;<span class="comment">// 不推荐使用：虽然能实现非空判断，但推荐使用 isEmpty() 方法来判断字符串是否为空</span></span><br></pre></td></tr></table></figure><p>方式二：使用工具类判断</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;example&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(StrUtil.isNotEmpty(str))&#123;&#125;<span class="comment">// cn.hutool.core.util.StrUtil工具类</span></span><br><span class="line"><span class="keyword">if</span>(!Strings.isNullOrEmpty(str))&#123;&#125;<span class="comment">// com.google.common.base.Strings工具类</span></span><br><span class="line"><span class="keyword">if</span>(!StringUtils.isEmpty(str))&#123;&#125;<span class="comment">// org.springframework.util.StringUtils工具类</span></span><br><span class="line"><span class="keyword">if</span>(StringUtils.isNotBlank(str))&#123;&#125;<span class="comment">// org.apache.commons.lang3.StringUtils工具类</span></span><br><span class="line"><span class="keyword">if</span>(StringUtils.isNotBlank(str))&#123;&#125;<span class="comment">// com.baomidou.mybatisplus.core.toolkit.StringUtils工具类</span></span><br></pre></td></tr></table></figure><h3 id="字符串为空判断"><a href="#字符串为空判断" class="headerlink" title="字符串为空判断"></a>字符串为空判断</h3><p>方式一：使用原生判断</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;example&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(str == <span class="literal">null</span> || str.trim().isEmpty())&#123;&#125;</span><br><span class="line"><span class="keyword">if</span>(str == <span class="literal">null</span> || str.isEmpty())&#123;&#125;</span><br><span class="line"><span class="keyword">if</span>(str == <span class="literal">null</span> || str.trim().length() &lt;= <span class="number">0</span>)&#123;&#125;</span><br><span class="line"><span class="keyword">if</span>(str == <span class="literal">null</span> || str.length() &lt;= <span class="number">0</span>)&#123;&#125;</span><br><span class="line"><span class="keyword">if</span>(str == <span class="literal">null</span> || str.trim().equals(<span class="string">&quot;&quot;</span>))&#123;&#125;</span><br><span class="line"><span class="keyword">if</span>(str == <span class="literal">null</span> || str.equals(<span class="string">&quot;&quot;</span>))&#123;&#125;</span><br><span class="line"><span class="keyword">if</span>(str == <span class="literal">null</span> || str == <span class="string">&quot; &quot;</span>)&#123;&#125;</span><br></pre></td></tr></table></figure><p>方式二：使用工具类判断</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;example&quot;</span>;</span><br><span class="line"><span class="keyword">if</span>(StrUtil.isEmpty())&#123;&#125;<span class="comment">// cn.hutool.core.util.StrUtil工具类</span></span><br><span class="line"><span class="keyword">if</span>(Strings.isNullOrEmpty(str))&#123;&#125;<span class="comment">// com.google.common.base.Strings工具类</span></span><br><span class="line"><span class="keyword">if</span>(StringUtils.isEmpty(str))&#123;&#125;<span class="comment">// org.springframework.util.StringUtils工具类</span></span><br><span class="line"><span class="keyword">if</span>(StringUtils.isBlank(str))&#123;&#125;<span class="comment">// org.apache.commons.lang3.StringUtils工具类</span></span><br><span class="line"><span class="keyword">if</span>(StringUtils.isBlank(str))&#123;&#125;<span class="comment">// com.baomidou.mybatisplus.core.toolkit.StringUtils工具类</span></span><br></pre></td></tr></table></figure><h2 id="List集合"><a href="#List集合" class="headerlink" title="List集合"></a>List集合</h2><h3 id="非空判断"><a href="#非空判断" class="headerlink" title="非空判断"></a>非空判断</h3><p>方式一：使用原生判断</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;Object&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">if</span>(<span class="literal">null</span> != list &amp;&amp; list.size() &gt; <span class="number">0</span>)&#123;&#125;</span><br><span class="line"><span class="keyword">if</span>(<span class="literal">null</span> != list &amp;&amp; !list.isEmpty())&#123;&#125;</span><br></pre></td></tr></table></figure><p>方式二：使用工具类判断</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;Object&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">if</span>(CollUtil.isNotEmpty(list))&#123;&#125;<span class="comment">// cn.hutool.core.util.CollUtil工具类</span></span><br><span class="line"><span class="keyword">if</span>(!CollectionUtils.isEmpty(list))&#123;&#125;<span class="comment">// org.springframework.util.CollectionUtils工具类</span></span><br><span class="line"><span class="keyword">if</span>(CollectionUtils.isNotEmpty(list))&#123;&#125;<span class="comment">// org.apache.commons.collections4.CollectionUtils工具类</span></span><br><span class="line"><span class="keyword">if</span>(CollectionUtils.isNotEmpty(list))&#123;&#125;<span class="comment">// com.baomidou.mybatisplus.core.toolkit.CollectionUtils工具类</span></span><br></pre></td></tr></table></figure><h3 id="为空判断"><a href="#为空判断" class="headerlink" title="为空判断"></a>为空判断</h3><p>方式一：使用原生判断</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;Object&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">if</span>(<span class="literal">null</span> == list || list.size() == <span class="number">0</span>)&#123;&#125;</span><br><span class="line"><span class="keyword">if</span>(<span class="literal">null</span> == list || list.isEmpty())&#123;&#125;</span><br></pre></td></tr></table></figure><p>方式二：使用工具类判断</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;Object&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">if</span>(CollUtil.isEmpty(list))&#123;&#125;<span class="comment">// cn.hutool.core.util.CollUtil工具类</span></span><br><span class="line"><span class="keyword">if</span>(CollectionUtils.isEmpty(list))&#123;&#125;<span class="comment">// org.springframework.util.CollectionUtils工具类</span></span><br><span class="line"><span class="keyword">if</span>(CollectionUtils.isEmpty(list))&#123;&#125;<span class="comment">// org.apache.commons.collections4.CollectionUtils工具类</span></span><br><span class="line"><span class="keyword">if</span>(CollectionUtils.isEmpty(list))&#123;&#125;<span class="comment">// com.baomidou.mybatisplus.core.toolkit.CollectionUtils工具类</span></span><br></pre></td></tr></table></figure><h1 id="对象之间的拷贝"><a href="#对象之间的拷贝" class="headerlink" title="对象之间的拷贝"></a>对象之间的拷贝</h1><h2 id="对象拷贝概念"><a href="#对象拷贝概念" class="headerlink" title="对象拷贝概念"></a>对象拷贝概念</h2><p>在Java开发中，对象拷贝常见于各个表现层数据的转换（如PO、DTO、DO、VO之间的转换）以及系统交互过程中的序列化和反序列化。</p><h2 id="对象拷贝常见方案"><a href="#对象拷贝常见方案" class="headerlink" title="对象拷贝常见方案"></a>对象拷贝常见方案</h2><p>常见的Bean拷贝方案有：Apache的BeanUtils、Spring的BeanUtils、CGLib的BeanCopier、对象映射器Orika、对象映射器MapStruct、</p><ol><li><strong>Apache的BeanUtils</strong>：Apache的BeanUtils提供了一组工具方法，可以在不同的JavaBean之间进行属性拷贝。它使用反射机制来实现属性的读取和赋值，可以进行浅拷贝。</li><li><strong>Spring的BeanUtils</strong>：Spring的BeanUtils是基于Apache的BeanUtils进行了进一步封装，提供了更多的功能和扩展性。它也使用反射机制进行属性拷贝，并支持浅拷贝。</li><li><strong>CGLib的BeanCopier</strong>：CGLib的BeanCopier是一个高性能的Bean拷贝工具，使用字节码生成技术实现。它通过生成字节码来直接拷贝对象属性，避免了反射的性能开销。它也只支持浅拷贝。</li><li><strong>对象映射器的Dozer</strong>：Dozer是一个功能丰富的Java对象映射器，可以处理复杂的对象映射关系。它支持深拷贝和浅拷贝，并提供了灵活的转换选项。Dozer使用配置文件或注解来定义映射规则。</li><li><strong>对象映射器ModelMapper</strong>：ModelMapper是一个流行的Java对象映射库，旨在简化不同类型的Java对象之间的属性拷贝和转换。它提供了简洁的API和灵活的配置选项，使开发者能够轻松地进行对象映射操作。ModelMapper可以自动匹配相同字段名的属性，并支持自定义转换器来处理复杂的类型转换需求。</li><li><strong>对象映射器Orika</strong>：Orika是一个流行的Java对象映射器，它使用代码生成技术来实现高性能的对象映射。它支持基于注解或XML配置的映射规则，并具有高度的灵活性。Orika可以处理复杂的映射关系，包括嵌套对象和集合类型，并支持深拷贝和浅拷贝。</li><li><strong>对象映射器JMapper</strong>：JMapper是一个快速和简单的Java对象映射器，支持深拷贝和浅拷贝。它通过将源对象的属性复制到目标对象来实现映射，可以基于注解或者XML文件进行配置。</li><li><strong>对象映射器Selma</strong>：Selma也是一个Java对象映射库，专注于性能和易用性。它提供了简单而直观的注解驱动方式，用于指定对象之间的映射关系。Selma生成高效的字节码，以实现快速的对象映射，同时支持自定义转换器和高级映射功能。</li><li><strong>对象映射器MapStruct</strong>：MapStruct是一个注解驱动的Java对象映射器，它在编译时生成映射代码，以提供更高的性能。它使用接口声明映射方法，自动生成实现类，并提供了易于使用的API。MapStruct支持深拷贝和浅拷贝，并支持自定义转换器来处理复杂的映射场景。</li></ol><h2 id="对象拷贝常见方案性能对比"><a href="#对象拷贝常见方案性能对比" class="headerlink" title="对象拷贝常见方案性能对比"></a>对象拷贝常见方案性能对比</h2><p>CGLib的BeanCopier和MapStruct通常在性能上表现较好，适合大规模数据拷贝。而Apache的BeanUtils、Spring的BeanUtils、Dozer、Orika、ModelMapper、JMapper和Selma等方案在不同场景下也可以根据需求选择使用。</p><table><thead><tr><th align="left">方案</th><th align="center">性能（1,000,000次拷贝耗时）</th><th>说明</th></tr></thead><tbody><tr><td align="left">Apache的BeanUtils</td><td align="center">约15秒</td><td>使用反射机制，性能较低</td></tr><tr><td align="left">Spring的BeanUtils</td><td align="center">约12秒</td><td>基于Apache的BeanUtils封装，性能相对较低</td></tr><tr><td align="left">CGLib的BeanCopier</td><td align="center">约2.5秒</td><td>使用字节码生成技术，性能较高，只支持浅拷贝</td></tr><tr><td align="left">对象映射器Dozer</td><td align="center">约3.5秒</td><td>功能强大，支持深拷贝和浅拷贝，性能较高</td></tr><tr><td align="left">对象映射器ModelMapper</td><td align="center">约1.8秒</td><td>简洁易用，性能一般，支持深拷贝和浅拷贝</td></tr><tr><td align="left">对象映射器Orika</td><td align="center">约1.5秒</td><td>使用代码生成技术，性能优秀，支持深拷贝和浅拷贝</td></tr><tr><td align="left">对象映射器JMapper</td><td align="center">约1.1秒</td><td>简单快捷，性能较好，支持深拷贝和浅拷贝</td></tr><tr><td align="left">对象映射器Selma</td><td align="center">约1.1秒</td><td>注解驱动，性能较好，支持深拷贝和浅拷贝</td></tr><tr><td align="left">对象映射器MapStruct</td><td align="center">约0.9秒</td><td>注解驱动，编译时生成映射代码，性能较高，支持深拷贝和浅拷贝</td></tr></tbody></table><h2 id="对象拷贝常见方案使用案例"><a href="#对象拷贝常见方案使用案例" class="headerlink" title="对象拷贝常见方案使用案例"></a>对象拷贝常见方案使用案例</h2><h3 id="Apache的BeanUtils"><a href="#Apache的BeanUtils" class="headerlink" title="Apache的BeanUtils"></a>Apache的BeanUtils</h3><p>Maven依赖添加：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Apache Commons BeanUtils库，用于操作JavaBean的工具类 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-beanutils<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-beanutils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.4<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用案例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InvocationTargetException, IllegalAccessException &#123;</span><br><span class="line">        <span class="comment">// 定义源对象和目标对象</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;小明&quot;</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="type">UserVO</span> <span class="variable">userVO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserVO</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用BeanUtils进行属性拷贝（浅拷贝）</span></span><br><span class="line">        org.apache.commons.beanutils.BeanUtils.copyProperties(userVO, user);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 输出结果</span></span><br><span class="line">        System.out.println(<span class="string">&quot;源对象：&quot;</span> + user);</span><br><span class="line">        System.out.println(<span class="string">&quot;目标对象：&quot;</span> + userVO);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Spring的BeanUtils"><a href="#Spring的BeanUtils" class="headerlink" title="Spring的BeanUtils"></a>Spring的BeanUtils</h3><p>Maven依赖添加：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Spring框架的核心包，用于处理bean管理和依赖注入 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-beans<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.3.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用案例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 定义源对象和目标对象</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;小明&quot;</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="type">UserVO</span> <span class="variable">userVO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserVO</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用BeanUtils进行属性拷贝（浅拷贝）</span></span><br><span class="line">        org.springframework.beans.BeanUtils.copyProperties(user, userVO);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 输出结果</span></span><br><span class="line">        System.out.println(<span class="string">&quot;源对象：&quot;</span> + user);</span><br><span class="line">        System.out.println(<span class="string">&quot;目标对象：&quot;</span> + userVO);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="CGLib的BeanCopier"><a href="#CGLib的BeanCopier" class="headerlink" title="CGLib的BeanCopier"></a>CGLib的BeanCopier</h3><p>Maven依赖添加：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- CGLIB库，提供了动态代理和代码生成的功能 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cglib<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用案例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 定义源对象和目标对象</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;小明&quot;</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="type">UserVO</span> <span class="variable">userVO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserVO</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建BeanCopier对象实例</span></span><br><span class="line">        <span class="type">BeanCopier</span> <span class="variable">copier</span> <span class="operator">=</span> org.springframework.cglib.beans.BeanCopier.create(User.class, UserVO.class, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用BeanCopier进行属性拷贝（浅拷贝）</span></span><br><span class="line">        copier.copy(user, userVO, <span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 输出结果</span></span><br><span class="line">        System.out.println(<span class="string">&quot;源对象：&quot;</span> + user);</span><br><span class="line">        System.out.println(<span class="string">&quot;目标对象：&quot;</span> + userVO);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="对象映射器Dozer"><a href="#对象映射器Dozer" class="headerlink" title="对象映射器Dozer"></a>对象映射器Dozer</h3><p>Maven依赖添加：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Dozer Mapper库，用于Java对象之间的映射转换 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.dozermapper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>dozer-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>6.5.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用案例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 定义源对象和目标对象</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;小明&quot;</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="type">UserVO</span> <span class="variable">userVO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserVO</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建DozerMapper对象实例</span></span><br><span class="line">        <span class="type">Mapper</span> <span class="variable">mapper</span> <span class="operator">=</span> DozerBeanMapperBuilder.buildDefault();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用DozerMapper进行属性拷贝（浅拷贝）</span></span><br><span class="line">        mapper.map(user, userVO);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 输出结果</span></span><br><span class="line">        System.out.println(<span class="string">&quot;源对象：&quot;</span> + user);</span><br><span class="line">        System.out.println(<span class="string">&quot;目标对象：&quot;</span> + userVO);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="对象映射器ModelMapper"><a href="#对象映射器ModelMapper" class="headerlink" title="对象映射器ModelMapper"></a>对象映射器ModelMapper</h3><p>Maven依赖添加：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ModelMapper库，提供了Java对象之间的属性映射和转换功能 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.modelmapper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>modelmapper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用案例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 定义源对象和目标对象</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;小明&quot;</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="type">UserVO</span> <span class="variable">userVO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserVO</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建ModelMapper对象实例</span></span><br><span class="line">        <span class="type">ModelMapper</span> <span class="variable">modelMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelMapper</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用ModelMapper进行属性拷贝</span></span><br><span class="line">        modelMapper.map(user, userVO);</span><br><span class="line">        <span class="comment">// 输出结果</span></span><br><span class="line">        System.out.println(<span class="string">&quot;源对象：&quot;</span> + user);</span><br><span class="line">        System.out.println(<span class="string">&quot;目标对象：&quot;</span> + userVO);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="对象映射器Orika"><a href="#对象映射器Orika" class="headerlink" title="对象映射器Orika"></a>对象映射器Orika</h3><p>Maven依赖添加：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Orika库，提供了高性能的Java对象映射框架 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ma.glasnost.orika<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>orika-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用案例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 定义源对象和目标对象</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;小明&quot;</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="type">UserVO</span> <span class="variable">userVO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserVO</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建MapperFactory对象实例</span></span><br><span class="line">        <span class="type">MapperFactory</span> <span class="variable">mapperFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultMapperFactory</span>.Builder().build();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 定义MapperFacade对象</span></span><br><span class="line">        <span class="type">MapperFacade</span> <span class="variable">mapperFacade</span> <span class="operator">=</span> mapperFactory.getMapperFacade();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 使用MapperFacade进行属性拷贝</span></span><br><span class="line">        mapperFacade.map(user, userVO);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 输出结果</span></span><br><span class="line">        System.out.println(<span class="string">&quot;源对象：&quot;</span> + user);</span><br><span class="line">        System.out.println(<span class="string">&quot;目标对象：&quot;</span> + userVO);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="对象映射器JMapper"><a href="#对象映射器JMapper" class="headerlink" title="对象映射器JMapper"></a>对象映射器JMapper</h3><p>Maven依赖添加：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- JMapper库，用于Java对象之间的映射转换 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.googlecode.jmapper-framework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jmapper-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.6.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用案例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 定义源对象和目标对象</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;小明&quot;</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="type">UserVO</span> <span class="variable">userVO</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">UserVO</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建JMapperAPI实例</span></span><br><span class="line">        <span class="type">JMapperAPI</span> <span class="variable">api</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JMapperAPI</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 定义映射规则</span></span><br><span class="line">        api.add(JMapperAPI.mappedClass(User.class).add(JMapperAPI.attribute(<span class="string">&quot;name&quot;</span>)));</span><br><span class="line">        api.add(JMapperAPI.mappedClass(User.class).add(JMapperAPI.attribute(<span class="string">&quot;age&quot;</span>)));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建JMapper实例</span></span><br><span class="line">        JMapper&lt;UserVO, User&gt; mapper = <span class="keyword">new</span> <span class="title class_">JMapper</span>&lt;&gt;(UserVO.class, User.class, api);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 执行映射</span></span><br><span class="line">        userVO = mapper.getDestination(user);</span><br><span class="line">        <span class="comment">// 输出结果</span></span><br><span class="line">        System.out.println(<span class="string">&quot;源对象：&quot;</span> + user);</span><br><span class="line">        System.out.println(<span class="string">&quot;目标对象：&quot;</span> + userVO);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="对象映射器Selma"><a href="#对象映射器Selma" class="headerlink" title="对象映射器Selma"></a>对象映射器Selma</h3><p>Maven依赖添加：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Selma库，提供了简单、快速和可扩展的Java对象映射框架 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>fr.xebia.extras<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>selma-processor<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Selma库 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>fr.xebia.extras<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>selma<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用案例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 定义源对象和目标对象</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;小明&quot;</span>, <span class="number">20</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建Selma映射器实例</span></span><br><span class="line">        <span class="type">Mapper</span> <span class="variable">mapper</span> <span class="operator">=</span> Selma.builder(Mapper.class).build();</span><br><span class="line">        <span class="comment">// 使用Selma映射器将源对象映射为目标对象</span></span><br><span class="line">        <span class="type">UserVO</span> <span class="variable">userVO</span> <span class="operator">=</span> mapper.asUserVO(user);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 输出结果</span></span><br><span class="line">        System.out.println(<span class="string">&quot;源对象：&quot;</span> + user);</span><br><span class="line">        System.out.println(<span class="string">&quot;目标对象：&quot;</span> + userVO);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义映射器接口</span></span><br><span class="line"><span class="meta">@fr</span>.xebia.extras.selma.Mapper</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Mapper</span> &#123;</span><br><span class="line">    UserVO <span class="title function_">asUserVO</span><span class="params">(User user)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="对象映射器MapStruct"><a href="#对象映射器MapStruct" class="headerlink" title="对象映射器MapStruct"></a>对象映射器MapStruct</h3><p>Maven依赖添加：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- MapStruct库，用于Java对象之间的映射转换 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mapstruct<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mapstruct<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.5.5.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p>使用案例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建源对象</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;小明&quot;</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="comment">// 调用映射方法将源对象映射为目标对象</span></span><br><span class="line">        <span class="type">UserVO</span> <span class="variable">userVO</span> <span class="operator">=</span> UserMapper.INSTANCE.userToUserVO(user);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 输出结果</span></span><br><span class="line">        System.out.println(<span class="string">&quot;源对象：&quot;</span> + user);</span><br><span class="line">        System.out.println(<span class="string">&quot;目标对象：&quot;</span> + userVO);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="type">UserMapper</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> Mappers.getMapper(UserMapper.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Mapping(source = &quot;name&quot;, target = &quot;name&quot;)</span> <span class="comment">// 指定属性映射关系</span></span><br><span class="line">    <span class="meta">@Mapping(source = &quot;age&quot;, target = &quot;age&quot;)</span> <span class="comment">// 指定属性映射关系</span></span><br><span class="line">    UserVO <span class="title function_">userToUserVO</span><span class="params">(User user)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="常用Excel操作相关库"><a href="#常用Excel操作相关库" class="headerlink" title="常用Excel操作相关库"></a>常用Excel操作相关库</h1><h2 id="Excel"><a href="#Excel" class="headerlink" title="Excel"></a>Excel</h2><h3 id="Excel简介"><a href="#Excel简介" class="headerlink" title="Excel简介"></a>Excel简介</h3><p>Excel 是一种电子表格软件，由 Microsoft 公司开发。它是最常用的办公软件之一，广泛用于各种任务，包括数据分析、数据处理、建立图表、制作报告和计算等。</p><h3 id="Excel相关概念"><a href="#Excel相关概念" class="headerlink" title="Excel相关概念"></a>Excel相关概念</h3><p>在 Excel 中，工作簿（Workbook）是一个文件，它可以包含一个或多个工作表（Worksheet）。每个工作表都由行（Row）和列（Column）组成，行和列的交叉点形成了单元格（Cell）。</p><ul><li><strong>工作簿（Workbook）</strong>：在 Excel 中，工作簿是一个文件，用于存储和管理数据。一个工作簿可以包含一个或多个工作表，通常以.xlsx或.xls等文件格式保存。</li><li><strong>工作表（Worksheet）</strong>：工作表是工作簿中的一个分页，用于组织和展示数据。每个工作表由行和列组成，并且每个工作表都有一个唯一的名称，例如Sheet1、Sheet2等。</li><li><strong>行（Row）</strong>：行是水平方向上的排列单元格的序列。行由数字表示，从1开始逐渐递增，用于标识不同的行号。</li><li><strong>列（Column）</strong>：列是垂直方向上的排列单元格的序列。列由字母表示，从A开始逐渐递增，用于标识不同的列标。</li><li><strong>单元格（Cell）</strong>：单元格是行和列的交叉点，它是 Excel 表格中最小的单位。每个单元格可以存储文本、数字、日期、公式等数据，并且可以应用各种格式和样式。每个单元格都有一个唯一的地址，由列标和行号组成，例如A1、B2等。</li></ul><h3 id="Java操作Excel常见方式"><a href="#Java操作Excel常见方式" class="headerlink" title="Java操作Excel常见方式"></a>Java操作Excel常见方式</h3><p>在Java中，实现导入导出Excel有几种方法，分别是使用JExcelApi、Apache POI、EasyPOI、EasyExcel</p><ul><li><strong>JExcelApi（JXL）</strong>：开源 Excel 处理库，主要用于读取、写入和操作 Excel 文件，支持处理 XLS 格式的文件，已经停止维护</li><li><strong>Apache POI</strong>：开源的Java API，可以用于读取、写入和操作Microsoft Office格式的文档，包括Excel、Word和PowerPoint等。虽然Apache POI功能强大，但是代码书写冗余繁杂，学习使用成本较高，在读写大文件耗费内存较大。</li><li><strong>EasyPOI</strong>：基于Apache POI封装的一个Java开发工具包，提供了简化的API和更友好的操作方式，使得处理Excel文件变得更加容易。</li><li><strong>EasyExcel</strong>：EasyExcel 是一个基于 Apache POI 的 Java 处理 Excel 文件的开源库，减少内存占用。</li></ul><h2 id="Apache-POI"><a href="#Apache-POI" class="headerlink" title="Apache POI"></a>Apache POI</h2><h3 id="Apache-POI简介"><a href="#Apache-POI简介" class="headerlink" title="Apache POI简介"></a>Apache POI简介</h3><p>Apache POI是一个开源的Java类库，用于操作Microsoft Office文档格式，包括Excel、Word和PowerPoint等。它提供了许多API，可用于读取、写入和操作这些文档的内容、格式和样式。Apache POI是Apache软件基金会的顶级项目之一，已经成为Java处理Office文档的行业标准。Apache POI主要用途包括如下几种：</p><ol><li>自动化处理Excel、Word等Office文档</li><li>读取、分析和转换Office文件中的数据</li><li>根据模板自动生成报表、表格等</li><li>批量生成和操作Office文档</li><li>创建和编辑复杂的Office文档</li></ol><h3 id="Apache-POI相关依赖"><a href="#Apache-POI相关依赖" class="headerlink" title="Apache POI相关依赖"></a>Apache POI相关依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--处理旧版本的Excel文件（.xls格式），提供了HSSFAPI--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--处理较新版本的Excel文件（.xlsx格式），提供了XSSFAPI--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.poi<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>poi-ooxml<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="Apache-POI相关类库"><a href="#Apache-POI相关类库" class="headerlink" title="Apache POI相关类库"></a>Apache POI相关类库</h3><p>Apache POI 针对不同 Microsoft Office 格式文件的读写功能，提供了相应的类来支持不同格式的文件操作。根据需要选择适当的类，可以实现对 Excel、Word、PowerPoint 等不同类型文件的读写操作，主要有以下几种：</p><ol><li><strong>HSSF</strong>（Horrible Spreadsheet Format）：用于读写 Microsoft Excel 97-2003 格式的 <code>.xls</code> 文件。由于 <code>.xls</code> 格式的限制，HSSF 最多只支持 65536 行和 256 列数据。</li><li><strong>XSSF</strong>（XML Spreadsheet Format）：用于读写 Microsoft Excel 2007 及以上版本的 <code>.xlsx</code> 文件。XSSF支持大批量数据导出，最大可以有 1048576 行和 16384 列数据。但是数据会先写入内存再进行导出，对于大规模数据集，可能会导致内存占用过高，进而引发内存溢出的问题。</li><li><strong>SXSSF</strong>：SXSSF方式是XSSF方式的一种延伸，也用于读写 Microsoft Excel 2007 及以上版本的 <code>.xlsx</code> 文件。数据会先写入到磁盘缓存中，然后再进行导出，从而避免了内存溢出的问题，但是涉及磁盘写入操作，运行速度可能会较慢。</li><li><strong>HWPF</strong>（Horrible Word Processor Format）：用于读写 Microsoft Word 97-2003 格式的 <code>.doc</code> 文件。</li><li><strong>XWPF</strong>（XML Word Processor Format）：用于读写 Microsoft Word 2007 及以上版本的 <code>.docx</code> 文件。</li><li><strong>HSLF</strong>（Horrible Slide Layout Format）：用于读写 Microsoft PowerPoint 格式的 <code>.ppt</code> 文件。</li><li><strong>HDGF</strong>（Horrible DiaGram Format）：用于读取 Microsoft Visio 格式的 <code>.vsd</code> 文件。</li><li><strong>HPBF</strong>（Horrible Publisher Format）：用于读取 Microsoft Publisher 格式的 <code>.pub</code> 文件。</li><li><strong>HSMF</strong>（Horrible Stupid Mail Format）：用于读取 Microsoft Outlook 格式的 <code>.msg</code> 文件。</li></ol><h3 id="Apache-POI操作Excel常用的类"><a href="#Apache-POI操作Excel常用的类" class="headerlink" title="Apache POI操作Excel常用的类"></a>Apache POI操作Excel常用的类</h3><ol><li><strong>Workbook</strong>：Workbook 是 Excel 文件的顶级对象，代表整个工作簿。它可以用于创建新的工作簿、读取现有的工作簿以及对工作簿进行保存。常见的 Workbook 子类包括 HSSFWorkbook（操作 .xls 格式文件）和 XSSFWorkbook（操作 .xlsx 格式文件）。</li><li><strong>Sheet</strong>：Sheet 代表工作簿中的一个工作表。可以使用 Workbook 对象的 getSheet() 或 createSheet() 方法来获取或创建 Sheet 对象。</li><li><strong>Row</strong>：Row 代表工作表中的一行数据。可以使用 Sheet 对象的 getRow() 或 createRow() 方法来获取或创建 Row 对象。</li><li><strong>Cell</strong>：Cell 代表工作表中的一个单元格。可以使用 Row 对象的 getCell() 或 createCell() 方法来获取或创建 Cell 对象。</li><li><strong>CellStyle</strong>：CellStyle 代表单元格的样式，如字体、背景色、边框等。可以使用 Workbook 对象的 createCellStyle() 方法创建 CellStyle 对象，并将其应用于 Cell 对象。</li><li><strong>DataFormat</strong>：DataFormat 用于处理单元格中的数据格式，如日期、数字等。可以使用 Workbook 对象的 createDataFormat() 方法创建 DataFormat 对象，并将其应用于 CellStyle 对象。</li><li><strong>FormulaEvaluator</strong>：用于计算 Excel 单元格中的公式的类。</li><li><strong>CreationHelper</strong>：用于创建各种对象，如绘图对象、注释等。</li></ol><h3 id="Apache-POI导入Excel"><a href="#Apache-POI导入Excel" class="headerlink" title="Apache POI导入Excel"></a>Apache POI导入Excel</h3><p>方式一：HSSF方式导入Excel</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExcelRead2003Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 读取 Excel 文件</span></span><br><span class="line">            <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;POI/src/Excel/HSSF方式-用户信息表.xls&quot;</span>);</span><br><span class="line">            <span class="comment">// 创建 工作簿（HSSFWorkbook）对象</span></span><br><span class="line">            <span class="type">HSSFWorkbook</span> <span class="variable">workbook</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HSSFWorkbook</span>(fis);</span><br><span class="line">            <span class="comment">// 获取工作表数量</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">numberOfSheets</span> <span class="operator">=</span> workbook.getNumberOfSheets();</span><br><span class="line">            <span class="comment">// 遍历每个工作表</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; numberOfSheets; i++) &#123;</span><br><span class="line">                <span class="comment">// 获取工作表对象</span></span><br><span class="line">                <span class="type">HSSFSheet</span> <span class="variable">sheet</span> <span class="operator">=</span> workbook.getSheetAt(i);</span><br><span class="line">                <span class="comment">// 获取行数</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">numberOfRows</span> <span class="operator">=</span> sheet.getPhysicalNumberOfRows();</span><br><span class="line">                <span class="comment">// 遍历每一行</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; numberOfRows; j++) &#123;</span><br><span class="line">                    <span class="comment">// 获取行对象</span></span><br><span class="line">                    <span class="type">HSSFRow</span> <span class="variable">row</span> <span class="operator">=</span> sheet.getRow(j);</span><br><span class="line">                    <span class="comment">// 获取列数</span></span><br><span class="line">                    <span class="type">int</span> <span class="variable">numberOfColumns</span> <span class="operator">=</span> row.getPhysicalNumberOfCells();</span><br><span class="line">                    <span class="comment">// 遍历每一列</span></span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; numberOfColumns; k++) &#123;</span><br><span class="line">                        <span class="comment">// 获取单元格对象</span></span><br><span class="line">                        <span class="type">HSSFCell</span> <span class="variable">cell</span> <span class="operator">=</span> row.getCell(k);</span><br><span class="line">                        <span class="comment">// 获取单元格中的值并输出</span></span><br><span class="line">                        System.out.print(cell.toString() + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 关闭 工作簿（Workbook） 和文件流</span></span><br><span class="line">            workbook.close();</span><br><span class="line">            fis.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>方式二：XSSF方式导入Excel</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExcelRead2007Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// 读取 Excel 文件</span></span><br><span class="line">            <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;POI/src/Excel/XSSF方式-用户信息表.xlsx&quot;</span>);</span><br><span class="line">            <span class="comment">// 创建 工作簿（HSSFWorkbook）对象</span></span><br><span class="line">            <span class="type">XSSFWorkbook</span> <span class="variable">workbook</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XSSFWorkbook</span>(fis);</span><br><span class="line">            <span class="comment">// 获取工作表数量</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">numberOfSheets</span> <span class="operator">=</span> workbook.getNumberOfSheets();</span><br><span class="line">            <span class="comment">// 遍历每个工作表</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; numberOfSheets; i++) &#123;</span><br><span class="line">                <span class="comment">// 获取工作表对象</span></span><br><span class="line">                <span class="type">XSSFSheet</span> <span class="variable">sheet</span> <span class="operator">=</span> workbook.getSheetAt(i);</span><br><span class="line">                <span class="comment">// 获取行数</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">numberOfRows</span> <span class="operator">=</span> sheet.getPhysicalNumberOfRows();</span><br><span class="line">                <span class="comment">// 遍历每一行</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; numberOfRows; j++) &#123;</span><br><span class="line">                    <span class="comment">// 获取行对象</span></span><br><span class="line">                    <span class="type">XSSFRow</span> <span class="variable">row</span> <span class="operator">=</span> sheet.getRow(j);</span><br><span class="line">                    <span class="comment">// 获取列数</span></span><br><span class="line">                    <span class="type">int</span> <span class="variable">numberOfColumns</span> <span class="operator">=</span> row.getPhysicalNumberOfCells();</span><br><span class="line">                    <span class="comment">// 遍历每一列</span></span><br><span class="line">                    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; numberOfColumns; k++) &#123;</span><br><span class="line">                        <span class="comment">// 获取单元格对象</span></span><br><span class="line">                        <span class="type">XSSFCell</span> <span class="variable">cell</span> <span class="operator">=</span> row.getCell(k);</span><br><span class="line">                        <span class="comment">// 获取单元格中的值并输出</span></span><br><span class="line">                        System.out.print(cell.toString() + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                    System.out.println();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 关闭 工作簿（Workbook） 和文件流</span></span><br><span class="line">            workbook.close();</span><br><span class="line">            fis.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>方式三：SXSSF方式导入Excel</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExcelReadSXSSFTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 获取文件流</span></span><br><span class="line">        <span class="type">OPCPackage</span> <span class="variable">opcPackage</span> <span class="operator">=</span> OPCPackage.open(<span class="string">&quot;POI/src/Excel/SXSSF方式-用户信息表.xlsx&quot;</span>);</span><br><span class="line">        <span class="comment">// 读取 Excel 文件</span></span><br><span class="line">        <span class="type">FileInputStream</span> <span class="variable">fis</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileInputStream</span>(<span class="string">&quot;POI/src/Excel/XSSF方式-用户信息表.xlsx&quot;</span>);</span><br><span class="line">        <span class="comment">// 创建工作簿对象</span></span><br><span class="line">        <span class="type">XSSFWorkbook</span> <span class="variable">workbook</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XSSFWorkbook</span>(fis);</span><br><span class="line">        <span class="comment">// 获取工作表数量</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">numberOfSheets</span> <span class="operator">=</span> workbook.getNumberOfSheets();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 遍历每个工作表</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; numberOfSheets; i++) &#123;</span><br><span class="line">            <span class="comment">// 获取工作表对象</span></span><br><span class="line">            <span class="type">XSSFSheet</span> <span class="variable">sheet</span> <span class="operator">=</span> workbook.getSheetAt(i);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 获取有效行数</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">lastRowNum</span> <span class="operator">=</span> sheet.getLastRowNum();</span><br><span class="line">            <span class="comment">// 获取第一行对象</span></span><br><span class="line">            <span class="type">XSSFRow</span> <span class="variable">firstRow</span> <span class="operator">=</span> sheet.getRow(<span class="number">0</span>);</span><br><span class="line">            <span class="type">int</span> <span class="variable">numberOfColumns</span> <span class="operator">=</span> firstRow.getPhysicalNumberOfCells();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 遍历每一行</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">1</span>; j &lt;= lastRowNum; j++) &#123;</span><br><span class="line">                <span class="comment">// 获取行对象</span></span><br><span class="line">                <span class="type">XSSFRow</span> <span class="variable">row</span> <span class="operator">=</span> sheet.getRow(j);</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 遍历每一列</span></span><br><span class="line">                <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; numberOfColumns; k++) &#123;</span><br><span class="line">                    <span class="comment">// 获取单元格对象</span></span><br><span class="line">                    <span class="type">XSSFCell</span> <span class="variable">cell</span> <span class="operator">=</span> row.getCell(k);</span><br><span class="line"></span><br><span class="line">                    <span class="comment">// 获取单元格中的值并输出</span></span><br><span class="line">                    System.out.print(cell.toString() + <span class="string">&quot;\t&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Apache-POI导出Excel"><a href="#Apache-POI导出Excel" class="headerlink" title="Apache POI导出Excel"></a>Apache POI导出Excel</h3><p>方式一：HSSF方式导出Excel</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExcelWrite2003Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis(); <span class="comment">// 获取程序开始执行的时间戳</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建 工作簿（HSSFWorkbook）对象</span></span><br><span class="line">        <span class="type">HSSFWorkbook</span> <span class="variable">workbook</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HSSFWorkbook</span>();</span><br><span class="line">        <span class="comment">// 创建 工作表（Sheet）</span></span><br><span class="line">        <span class="type">HSSFSheet</span> <span class="variable">sheet</span> <span class="operator">=</span> workbook.createSheet(<span class="string">&quot;Sheet1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建数据</span></span><br><span class="line">        Object[][] data = &#123;</span><br><span class="line">                &#123;<span class="string">&quot;姓名&quot;</span>, <span class="string">&quot;年龄&quot;</span>, <span class="string">&quot;性别&quot;</span>&#125;,</span><br><span class="line">                &#123;<span class="string">&quot;张三&quot;</span>, <span class="number">25</span>, <span class="string">&quot;男&quot;</span>&#125;,</span><br><span class="line">                &#123;<span class="string">&quot;李四&quot;</span>, <span class="number">30</span>, <span class="string">&quot;女&quot;</span>&#125;,</span><br><span class="line">                &#123;<span class="string">&quot;王五&quot;</span>, <span class="number">28</span>, <span class="string">&quot;男&quot;</span>&#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 写入数据</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; data.length; i++) &#123;</span><br><span class="line">            <span class="comment">// 创建行对象</span></span><br><span class="line">            <span class="type">HSSFRow</span> <span class="variable">row</span> <span class="operator">=</span> sheet.createRow(i);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; data[i].length; j++) &#123;</span><br><span class="line">                <span class="comment">// 创建单元格对象</span></span><br><span class="line">                <span class="type">HSSFCell</span> <span class="variable">cell</span> <span class="operator">=</span> row.createCell(j);</span><br><span class="line">                <span class="comment">// 设置单元格的值</span></span><br><span class="line">                cell.setCellValue(String.valueOf(data[i][j]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 输出到文件</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;POI/src/Excel/HSSF方式-用户信息表.xls&quot;</span>);</span><br><span class="line">        workbook.write(fos);</span><br><span class="line">        <span class="comment">// 关闭 Workbook 和文件流</span></span><br><span class="line">        workbook.close();</span><br><span class="line">        fos.close();</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis(); <span class="comment">// 获取程序结束执行的时间戳</span></span><br><span class="line">        System.out.println(<span class="string">&quot;写入完成，共耗时：&quot;</span> + (<span class="type">double</span>) (end - begin) / <span class="number">1000</span> + <span class="string">&quot;秒&quot;</span>);<span class="comment">// 耗时0.157秒</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>方式二：XSSF方式导出Excel</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExcelWrite2007Test</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis(); <span class="comment">// 获取程序开始执行的时间戳</span></span><br><span class="line">        <span class="comment">// 创建 工作簿（HSSFWorkbook）对象</span></span><br><span class="line">        <span class="type">XSSFWorkbook</span> <span class="variable">workbook</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">XSSFWorkbook</span>();</span><br><span class="line">        <span class="comment">// 创建 作表（Sheet）</span></span><br><span class="line">        <span class="type">XSSFSheet</span> <span class="variable">sheet</span> <span class="operator">=</span> workbook.createSheet(<span class="string">&quot;Sheet1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建数据</span></span><br><span class="line">        Object[][] data = &#123;</span><br><span class="line">                &#123;<span class="string">&quot;姓名&quot;</span>, <span class="string">&quot;年龄&quot;</span>, <span class="string">&quot;性别&quot;</span>&#125;,</span><br><span class="line">                &#123;<span class="string">&quot;张三&quot;</span>, <span class="number">25</span>, <span class="string">&quot;男&quot;</span>&#125;,</span><br><span class="line">                &#123;<span class="string">&quot;李四&quot;</span>, <span class="number">30</span>, <span class="string">&quot;女&quot;</span>&#125;,</span><br><span class="line">                &#123;<span class="string">&quot;王五&quot;</span>, <span class="number">28</span>, <span class="string">&quot;男&quot;</span>&#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 写入数据</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; data.length; i++) &#123;</span><br><span class="line">            <span class="comment">// 创建行对象</span></span><br><span class="line">            <span class="type">XSSFRow</span> <span class="variable">row</span> <span class="operator">=</span> sheet.createRow(i);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; data[i].length; j++) &#123;</span><br><span class="line">                <span class="comment">// 创建单元格对象</span></span><br><span class="line">                <span class="type">XSSFCell</span> <span class="variable">cell</span> <span class="operator">=</span> row.createCell(j);</span><br><span class="line">                <span class="comment">// 设置单元格的值</span></span><br><span class="line">                cell.setCellValue(String.valueOf(data[i][j]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 输出到文件</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;POI/src/Excel/XSSF方式-用户信息表.xlsx&quot;</span>);</span><br><span class="line">        workbook.write(fos);</span><br><span class="line">        <span class="comment">// 关闭 Workbook 和文件流</span></span><br><span class="line">        workbook.close();</span><br><span class="line">        fos.close();</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis(); <span class="comment">// 获取程序结束执行的时间戳</span></span><br><span class="line">        System.out.println(<span class="string">&quot;写入完成，共耗时：&quot;</span> + (<span class="type">double</span>) (end - begin) / <span class="number">1000</span> + <span class="string">&quot;秒&quot;</span>);<span class="comment">// 耗时0.452秒</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>方式三：SXSSF方式导出Excel</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExcelWriteSXSSFTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis(); <span class="comment">// 获取程序开始执行的时间戳</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建 工作簿（HSSFWorkbook）对象</span></span><br><span class="line">        <span class="type">SXSSFWorkbook</span> <span class="variable">workbook</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SXSSFWorkbook</span>();</span><br><span class="line">        <span class="comment">// 创建 作表（Sheet）</span></span><br><span class="line">        <span class="type">SXSSFSheet</span> <span class="variable">sheet</span> <span class="operator">=</span> workbook.createSheet(<span class="string">&quot;Sheet1&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 创建数据</span></span><br><span class="line">        Object[][] data = &#123;</span><br><span class="line">                &#123;<span class="string">&quot;姓名&quot;</span>, <span class="string">&quot;年龄&quot;</span>, <span class="string">&quot;性别&quot;</span>&#125;,</span><br><span class="line">                &#123;<span class="string">&quot;张三&quot;</span>, <span class="number">25</span>, <span class="string">&quot;男&quot;</span>&#125;,</span><br><span class="line">                &#123;<span class="string">&quot;李四&quot;</span>, <span class="number">30</span>, <span class="string">&quot;女&quot;</span>&#125;,</span><br><span class="line">                &#123;<span class="string">&quot;王五&quot;</span>, <span class="number">28</span>, <span class="string">&quot;男&quot;</span>&#125;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 写入数据</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; data.length; i++) &#123;</span><br><span class="line">            <span class="comment">// 创建行对象</span></span><br><span class="line">            <span class="type">SXSSFRow</span> <span class="variable">row</span> <span class="operator">=</span> sheet.createRow(i);</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; data[i].length; j++) &#123;</span><br><span class="line">                <span class="comment">// 创建单元格对象</span></span><br><span class="line">                <span class="type">SXSSFCell</span> <span class="variable">cell</span> <span class="operator">=</span> row.createCell(j);</span><br><span class="line">                <span class="comment">// 设置单元格的值</span></span><br><span class="line">                cell.setCellValue(String.valueOf(data[i][j]));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 输出到文件</span></span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;POI/src/Excel/SXSSF方式-用户信息表.xlsx&quot;</span>);</span><br><span class="line">        workbook.write(fos);</span><br><span class="line">        <span class="comment">// 关闭 Workbook 和文件流</span></span><br><span class="line">        workbook.close();</span><br><span class="line">        fos.close();</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis(); <span class="comment">// 获取程序结束执行的时间戳</span></span><br><span class="line">        System.out.println(<span class="string">&quot;写入完成，共耗时：&quot;</span> + (<span class="type">double</span>) (end - begin) / <span class="number">1000</span> + <span class="string">&quot;秒&quot;</span>);<span class="comment">// 耗时1.138秒</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="EasyPOI"><a href="#EasyPOI" class="headerlink" title="EasyPOI"></a>EasyPOI</h2><h3 id="EasyPOI简介"><a href="#EasyPOI简介" class="headerlink" title="EasyPOI简介"></a>EasyPOI简介</h3><p>EasyPOI是基于Apache POI封装的一个Java开发工具包，提供了简化的API和更友好的操作方式，使得处理Excel文件变得更加容易。</p><h3 id="EasyPOI相关依赖"><a href="#EasyPOI相关依赖" class="headerlink" title="EasyPOI相关依赖"></a>EasyPOI相关依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- EasyPoi的基础库 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.afterturn<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>easypoi-base<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- EasyPoi Web是EasyPoi的Web扩展库 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.afterturn<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>easypoi-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- EasyPoi的注解支持库 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.afterturn<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>easypoi-annotation<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="EasyPOI常用注解"><a href="#EasyPOI常用注解" class="headerlink" title="EasyPOI常用注解"></a>EasyPOI常用注解</h3><p><code>@Excel</code>: 用于将字段标记为导出或导入的 Excel 列。</p><ul><li>name: Excel 列的标题名称。</li><li>orderNum: Excel 列的顺序，默认按照从小到大排序。</li><li>width: Excel 列的宽度，默认为 10。</li><li>format: Excel 列的数据格式，如日期格式、数字格式等。</li></ul><p><code>@ExcelCollection</code>: 用于标记子对象集合，表示该字段需要作为子表格导出或导入。</p><ul><li>name: 子表格的表名。</li><li>type: 子表格的类型，支持 List、Set 和 Map。</li><li>width: 子表格的宽度，默认为 5000。</li><li>orderNum: 子表格的顺序，默认按照从小到大排序。</li></ul><p><code>@ExcelEntity</code>: 用于标记子对象，表示该字段需要作为子表格中的一行导出或导入。</p><ul><li>name: 子表格中的每行的标记名称。</li><li>orderNum: 子表格中的每行的顺序，默认按照从小到大排序。</li></ul><p><code>@ExcelIgnore</code>: 用于标记忽略不导出或导入的字段。</p><p><code>@ExcelTarget</code>: 用于标记实体类，表示该类可进行 Excel 导出或导入操作。</p><h3 id="EasyPOI导入Excel"><a href="#EasyPOI导入Excel" class="headerlink" title="EasyPOI导入Excel"></a>EasyPOI导入Excel</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExcelReadTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="comment">// 读取 Excel 文件</span></span><br><span class="line">        <span class="type">File</span> <span class="variable">file</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;EasyPOI/src/Excel/用户信息表.xlsx&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置导入参数</span></span><br><span class="line">        <span class="type">ImportParams</span> <span class="variable">params</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ImportParams</span>();</span><br><span class="line">        params.setTitleRows(<span class="number">0</span>);  <span class="comment">// 忽略标题行</span></span><br><span class="line">        params.setHeadRows(<span class="number">1</span>);   <span class="comment">// 表头占用的行数</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 执行导入</span></span><br><span class="line">        List&lt;User&gt; userList = ExcelImportUtil.importExcel(file, User.class, params);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 处理导入的数据</span></span><br><span class="line">        <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="EasyPOI导出Excel"><a href="#EasyPOI导出Excel" class="headerlink" title="EasyPOI导出Excel"></a>EasyPOI导出Excel</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExcelWriteTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis(); <span class="comment">// 获取程序开始执行的时间戳</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 模拟从数据库获取用户列表数据</span></span><br><span class="line">        List&lt;User&gt; userList = User.getUserList();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 导出设置</span></span><br><span class="line">        <span class="type">ExportParams</span> <span class="variable">exportParams</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ExportParams</span>();</span><br><span class="line">        exportParams.setType(ExcelType.XSSF);<span class="comment">// 设置类型（可选HSSF或XSSF）</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 写入Excel文件</span></span><br><span class="line">        <span class="type">Workbook</span> <span class="variable">workbook</span> <span class="operator">=</span> ExcelExportUtil.exportExcel(exportParams, User.class, userList);</span><br><span class="line">        <span class="type">FileOutputStream</span> <span class="variable">fos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;EasyPOI/src/Excel/用户信息表.xlsx&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 关闭 Workbook 和文件流</span></span><br><span class="line">        workbook.write(fos);</span><br><span class="line">        fos.close();</span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis(); <span class="comment">// 获取程序结束执行的时间戳</span></span><br><span class="line">        System.out.println(<span class="string">&quot;写入完成，共耗时：&quot;</span> + (<span class="type">double</span>) (end - begin) / <span class="number">1000</span> + <span class="string">&quot;秒&quot;</span>);<span class="comment">// 耗时1.233秒</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="EasyExcel"><a href="#EasyExcel" class="headerlink" title="EasyExcel"></a>EasyExcel</h2><h3 id="EasyExcel简介"><a href="#EasyExcel简介" class="headerlink" title="EasyExcel简介"></a>EasyExcel简介</h3><h3 id="EasyExcel相关依赖"><a href="#EasyExcel相关依赖" class="headerlink" title="EasyExcel相关依赖"></a>EasyExcel相关依赖</h3><p>EasyExcel 2.x 版本：Java 7 &amp; Java 6 版本支持</p><p>EasyExcel 3.x 版本：Java 8 版本支持</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- EasyExcel（3.x版本）--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>easyexcel<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="EasyExcel常用注解"><a href="#EasyExcel常用注解" class="headerlink" title="EasyExcel常用注解"></a>EasyExcel常用注解</h3><p><code>@ExcelProperty</code> 注解：用于定义实体类字段与 Excel 文件中列的映射关系。</p><ul><li><strong>value属性</strong>：指定 Excel 列的索引或者列名，支持跨行跨列合并。</li><li><strong>index属性</strong>：指定 Excel 列的索引，从0开始计数。</li><li><strong>format属性</strong>：指定数据的格式，例如日期格式、数值格式等。</li><li><strong>converter属性</strong>：指定字段值转换器，用于在读写 Excel 时进行特定值的转换。</li></ul><p><code>@ExcelIgnore</code> 注解：用于忽略某个字段，不参与 Excel 文件的读写操作。</p><p><code>@ExcelIgnoreUnannotated</code> 注解：用于标记实体类，表示在处理 Excel 时忽略未标记 <code>@ExcelProperty</code> 注解的字段。</p><p><code>@ExcelSheet</code> 注解：用于指定读取或写入的 sheet 名称。</p><p><code>@ExcelHeadRowNumber</code> 注解：用于标记实体类，指定作为表头行的行号，默认从 0 开始。</p><p><code>@DateTimeFormat</code> 注解：用于标记日期类型的字段，指定读写日期时的格式。例如，<code>@DateTimeFormat(&quot;yyyy-MM-dd&quot;)</code>。</p><p><code>@NumberFormat</code> 注解：用于标记数字类型的字段，指定读写数字时的格式。例如，<code>@NumberFormat(&quot;#,###.00&quot;)</code>。</p><p><code>@HeadRowHeight</code> 注解：指定表头行的高度。</p><p><code>@ContentRowHeight</code> 注解：指定内容行的高度。</p><p><code>@Table</code> 注解：用于设置全局表格样式，包括表格名称、表格头部样式、表格内容样式等。</p><h3 id="EasyExcel监听器"><a href="#EasyExcel监听器" class="headerlink" title="EasyExcel监听器"></a>EasyExcel监听器</h3><p>EasyExcel提供了两个监听器接口，分别是<code>ReadListener</code>和<code>AnalysisEventListener</code>。都可以用于方便地监听Excel文件的读取过程，并对读取的数据进行处理。一般来说，推荐使用<code>AnalysisEventListener</code>，因为它提供了更多的事件回调方法，能够更灵活地处理Excel文件的读取过程。</p><ul><li><strong>ReadListener</strong>：基础的文件解析监听器接口，可以监听到Excel文件的读取过程，并对读取的数据进行处理。</li><li><strong>AnalysisEventListener</strong>：ReadListener的子接口，在ReadListener的基础上增加了对读取完成后的处理，包括表头解析完成和全部数据解析完成等事件。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 读取监听器（通用）</span></span><br><span class="line"><span class="comment"> * 监听Excel文件的解析过程，并将解析得到的数据对象添加到数据列表中</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExcelReadListener</span>&lt;T&gt; <span class="keyword">extends</span> <span class="title class_">AnalysisEventListener</span>&lt;T&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 存储解析完成后的数据集合</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> List&lt;T&gt; dataList = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Excel每解析一行数据，就会调用一次该方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> data    解析得到的数据对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context 数据解析上下文</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">invoke</span><span class="params">(T data, AnalysisContext context)</span> &#123;</span><br><span class="line">        dataList.add(data);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 所有数据解析完成后的回调方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context 数据解析上下文</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doAfterAllAnalysed</span><span class="params">(AnalysisContext context)</span> &#123;</span><br><span class="line">        <span class="comment">// 解析完成后的回调方法，可以在这里进行后续处理，比如关闭资源等</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 读取到表头后，会调用此方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> headMap 表头部数据，key为表头所在列的索引，value为表头内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context 数据解析上下文</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">invokeHead</span><span class="params">(Map&lt;Integer, ReadCellData&lt;?&gt;&gt; headMap, AnalysisContext context)</span> &#123;</span><br><span class="line">        <span class="comment">// 在这里可以处理表头数据，比如校验表头是否符合要求，获取表头信息等</span></span><br><span class="line">        <span class="built_in">super</span>.invokeHead(headMap, context);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解析过程中读取到表头后，会调用此方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> headMap 表头部数据，key为表头所在列的索引，value为表头内容</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context 数据解析上下文</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">invokeHeadMap</span><span class="params">(Map&lt;Integer, String&gt; headMap, AnalysisContext context)</span> &#123;</span><br><span class="line">        <span class="comment">// 在这里可以处理表头数据，比如校验表头是否符合要求，获取表头信息等</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 解析过程如果发生异常，会调用此方法</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> exception 解析过程中抛出的异常</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> context   数据解析上下文</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">onException</span><span class="params">(Exception exception, AnalysisContext context)</span> &#123;</span><br><span class="line">        <span class="comment">// 异常处理逻辑</span></span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;Excel解析发生异常&quot;</span>, exception);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取解析后的数据列表</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 解析后的数据列表</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;T&gt; <span class="title function_">getSheetDataList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dataList;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="EasyExcel导入Excel"><a href="#EasyExcel导入Excel" class="headerlink" title="EasyExcel导入Excel"></a>EasyExcel导入Excel</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExcelWriteTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">begin</span> <span class="operator">=</span> System.currentTimeMillis(); <span class="comment">// 获取程序开始执行的时间戳</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 模拟从数据库获取用户列表数据</span></span><br><span class="line">        List&lt;User&gt; userList = User.getUserList();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 定义导出文件路径</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fileName</span> <span class="operator">=</span> <span class="string">&quot;EasyExcel/src/Excel/用户信息表.xlsx&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sheetName</span> <span class="operator">=</span> <span class="string">&quot;Sheet1&quot;</span>;</span><br><span class="line">        EasyExcel.write(fileName, User.class)<span class="comment">// 指定文件名和数据类型</span></span><br><span class="line">                .sheet(sheetName)<span class="comment">// 设置工作表名称，默认为 Sheet1</span></span><br><span class="line">                .doWrite(userList);<span class="comment">// 写入数据</span></span><br><span class="line"></span><br><span class="line">        <span class="type">long</span> <span class="variable">end</span> <span class="operator">=</span> System.currentTimeMillis(); <span class="comment">// 获取程序结束执行的时间戳</span></span><br><span class="line">        System.out.println(<span class="string">&quot;写入完成，共耗时：&quot;</span> + (<span class="type">double</span>) (end - begin) / <span class="number">1000</span> + <span class="string">&quot;秒&quot;</span>);<span class="comment">// 耗时1.402秒</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="EasyExcel导出Excel"><a href="#EasyExcel导出Excel" class="headerlink" title="EasyExcel导出Excel"></a>EasyExcel导出Excel</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ExcelReadTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">// 创建读取监听器</span></span><br><span class="line">        AnalysisEventListener&lt;User&gt; listener = <span class="keyword">new</span> <span class="title class_">AnalysisEventListener</span>&lt;User&gt;() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">invoke</span><span class="params">(User user, AnalysisContext context)</span> &#123;</span><br><span class="line">                <span class="comment">// 处理每一行数据，可以在这里进行业务逻辑操作</span></span><br><span class="line">                System.out.println(<span class="string">&quot;读取到用户数据：&quot;</span> + user);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doAfterAllAnalysed</span><span class="params">(AnalysisContext context)</span> &#123;</span><br><span class="line">                <span class="comment">// 数据读取完成后的操作，可以在这里进行一些清理工作</span></span><br><span class="line">                System.out.println(<span class="string">&quot;数据导入完成&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="comment">// 导入 Excel 文件</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">filePath</span> <span class="operator">=</span> <span class="string">&quot;EasyExcel/src/Excel/用户信息表.xlsx&quot;</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sheetName</span> <span class="operator">=</span> <span class="string">&quot;Sheet1&quot;</span>;</span><br><span class="line">        List&lt;User&gt; userList = EasyExcel.read(filePath, User.class, listener)<span class="comment">// 读取 Excel 文件中的数据</span></span><br><span class="line">                .head(User.class)<span class="comment">// 指定目标类型</span></span><br><span class="line">                .sheet(sheetName)<span class="comment">// 设置读取的工作表名称，默认为 Sheet1</span></span><br><span class="line">                .doReadSync();<span class="comment">// 同步读取 Excel 文件中的数据</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 处理导入的数据</span></span><br><span class="line">        <span class="keyword">for</span> (User user : userList) &#123;</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="常用JSON相关库"><a href="#常用JSON相关库" class="headerlink" title="常用JSON相关库"></a>常用JSON相关库</h1><h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h2><h3 id="JSON简介"><a href="#JSON简介" class="headerlink" title="JSON简介"></a>JSON简介</h3><p>JSON（JavaScript Object Notation）是一种轻量级的数据交换格式，具有易于阅读和编写的特点。它以键值对的形式组织数据，并使用大括号 <code>&#123;&#125;</code> 来表示对象，用方括号 <code>[]</code> 来表示数组。</p><h3 id="基本语法规则"><a href="#基本语法规则" class="headerlink" title="基本语法规则"></a>基本语法规则</h3><p><strong>键值对</strong>：JSON使用键值对表示数据</p><ul><li>键必须是字符串，使用双引号 “” 括起来。</li><li>值可以是字符串、数值、布尔值、空值、对象或者数组。</li></ul><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">30</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;isStudent&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;price&quot;</span><span class="punctuation">:</span> <span class="number">9.99</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;person&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;gender&quot;</span><span class="punctuation">:</span> <span class="string">&quot;male&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;phone&quot;</span><span class="punctuation">:</span> <span class="string">&quot;13888888888&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;hobbies&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;reading&quot;</span><span class="punctuation">,</span> <span class="string">&quot;swimming&quot;</span><span class="punctuation">,</span> <span class="string">&quot;traveling&quot;</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>字符串</strong>：字符串是由双引号或单引号括起来的一段文本内容。可以包含任意字符，特殊字符需要使用转义字符进行表示。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;message&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Hello, World!&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;escaped&quot;</span><span class="punctuation">:</span> <span class="string">&quot;This string contains a \&quot;quote\&quot; character.&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>数值</strong>：数值可以是整数或浮点数。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">30</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;price&quot;</span><span class="punctuation">:</span> <span class="number">9.99</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>布尔值</strong>：布尔值表示真或假，可以是 <code>true</code> 或 <code>false</code>。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;isStudent&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;isEmployed&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>空值</strong>：空值表示一个不存在的值，可以用 <code>null</code> 表示。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;address&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">null</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>对象</strong>：JSONObject（JSON对象）是一个无序的键值对集合，其中键是字符串，值可以是任意合法的JSON数据类型。JSON对象使用大括号 <code>&#123;&#125;</code> 包裹，键值对之间使用冒号 <code>:</code> 分隔，每个键值对之间使用逗号 <code>,</code> 分隔。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;person1&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三&quot;</span><span class="punctuation">,</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">30</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;person2&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;李四&quot;</span><span class="punctuation">,</span><span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">40</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>数组</strong>：JSONArray（JSON数组）是一个有序的、包含多个元素的数据集合。JSON数组使用方括号 <code>[]</code> 包裹，每个元素之间使用逗号 <code>,</code> 分隔。每个元素可以是任意合法的JSON数据类型。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;张三&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">30</span><span class="punctuation">&#125;</span><span class="punctuation">,</span> </span><br><span class="line">    <span class="punctuation">&#123;</span><span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;李四&quot;</span><span class="punctuation">,</span> <span class="attr">&quot;age&quot;</span><span class="punctuation">:</span> <span class="number">40</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">]</span></span><br></pre></td></tr></table></figure><h3 id="常用的-JSON-库"><a href="#常用的-JSON-库" class="headerlink" title="常用的 JSON 库"></a>常用的 JSON 库</h3><p>Java中没有内置JSON的解析，因此使用JSON需要借助第三方类库，常用的有<a target="_blank" rel="noopener" href="https://github.com/alibaba/fastjson">FastJson</a>、<a target="_blank" rel="noopener" href="https://github.com/FasterXML/jackson">Jackson</a> 和 <a target="_blank" rel="noopener" href="http://code.google.com/p/google-gson">Gson</a></p><ol><li><strong>FastJson</strong>：FastJson 是阿里巴巴开发的一款高性能 JSON 解析库。它具有极快的解析速度和较低的内存消耗，而且支持各种数据类型（包括复杂的嵌套对象和集合）。FastJson 也提供了灵活的 API，使得 JSON 的解析和生成变得简单而高效。</li><li><strong>Jackson</strong>：Jackson 是一个社区活跃度高且更新速度快的 JSON 解析库。它提供了多种功能强大的特性，包括对 JSON 和 Java 对象之间的双向转换、注解支持、流式处理等。Jackson 的性能也非常出色，是许多 Java 开发者的首选。</li><li><strong>Gson</strong>：Gson 是谷歌开发的一款功能丰富的 JSON 解析库。它可以方便地将 Java 对象和 JSON 进行互相转换，并且支持复杂对象的序列化和反序列化。Gson 也提供了易于使用的 API，使得 JSON 的解析和生成变得简单明了。</li></ol><h3 id="JSON-库性能对比"><a href="#JSON-库性能对比" class="headerlink" title="JSON 库性能对比"></a>JSON 库性能对比</h3><p>解析速度：FastJson &gt; Jackson &gt; Gson</p><ul><li>FastJson：FastJson 的解析速度非常快，因为它使用了一些高效的算法和优化技术。通常情况下，FastJson 的解析速度比其他库要更快一些。</li><li>Jackson：Jackson 的解析速度也很快，尤其是在处理大型 JSON 数据时表现出色。</li><li>Gson：Gson 的解析速度相对较慢，当处理大量数据时可能会比其他库稍微慢一些。</li></ul><p>内存消耗：FastJson &lt; Jackson &lt; Gson</p><ul><li>FastJson：FastJson 在内存消耗方面表现出色，通常比较省内存。</li><li>Jackson：Jackson 的内存消耗也相对较低，特别是在处理大型 JSON 数据时有优势。</li><li>Gson：Gson 在内存消耗方面可能稍高，当处理大量数据时可能会占用更多内存。</li></ul><h3 id="相关资料"><a href="#相关资料" class="headerlink" title="相关资料"></a>相关资料</h3><p>在GitHub中，<a target="_blank" rel="noopener" href="https://github.com/burningtree/awesome-json">awesome-json</a>项目汇集了与 JSON 相关的各种库、工具、教程和资源</p><ul><li>JSON 库：列出了多种编程语言中常用的 JSON 库和解析器，例如 Jackson、Gson、Fastjson 等。</li><li>文档和教程：提供了有关 JSON 的官方文档、教程和学习资源，可以帮助你深入了解 JSON 的各个方面和用法。</li><li>命令行工具：收录了一些命令行工具，可以用于处理和转换 JSON 数据。</li><li>在线工具和编辑器：介绍了一些在线的 JSON 工具和编辑器，方便你在线验证、格式化、压缩和编辑 JSON 数据。</li><li>可视化工具：推荐了一些用于可视化 JSON 数据的工具和库，可以以图表、树形结构等方式展示 JSON 数据。</li><li>校验和验证工具：提供了一些验证和校验 JSON 数据格式的工具和库，帮助你确保 JSON 数据的有效性和一致性。</li></ul><h2 id="JSON字符串与Java中字符串互相转换"><a href="#JSON字符串与Java中字符串互相转换" class="headerlink" title="JSON字符串与Java中字符串互相转换"></a>JSON字符串与Java中字符串互相转换</h2><h3 id="使用Fastjson"><a href="#使用Fastjson" class="headerlink" title="使用Fastjson"></a>使用Fastjson</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JSON转换为字符串</span></span><br><span class="line"><span class="type">String</span> <span class="variable">jsonString</span> <span class="operator">=</span> JSON.toJSONString(jsonObject);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串转换为JSON</span></span><br><span class="line"><span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> JSON.parseObject(jsonString);</span><br></pre></td></tr></table></figure><h3 id="使用Jackson"><a href="#使用Jackson" class="headerlink" title="使用Jackson"></a>使用Jackson</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// JSON转换为字符串</span></span><br><span class="line"><span class="type">String</span> <span class="variable">jsonString</span> <span class="operator">=</span> objectMapper.writeValueAsString(jsonObject);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串转换为JSON</span></span><br><span class="line"><span class="type">JsonNode</span> <span class="variable">jsonNode</span> <span class="operator">=</span> objectMapper.readTree(jsonString);</span><br></pre></td></tr></table></figure><h3 id="使用Gson"><a href="#使用Gson" class="headerlink" title="使用Gson"></a>使用Gson</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// JSON转换为字符串</span></span><br><span class="line"><span class="type">String</span> <span class="variable">jsonString</span> <span class="operator">=</span> gson.toJson(jsonObject);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串转换为JSON</span></span><br><span class="line"><span class="type">JsonElement</span> <span class="variable">jsonElement</span> <span class="operator">=</span> gson.fromJson(jsonString, JsonElement.class);</span><br></pre></td></tr></table></figure><h2 id="JSON数组与Java中List集合互相转换"><a href="#JSON数组与Java中List集合互相转换" class="headerlink" title="JSON数组与Java中List集合互相转换"></a>JSON数组与Java中List集合互相转换</h2><h3 id="使用Fastjson-1"><a href="#使用Fastjson-1" class="headerlink" title="使用Fastjson"></a>使用Fastjson</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JSON数组转换为List集合</span></span><br><span class="line">List&lt;MyEntity&gt; list = JSON.parseArray(jsonArrayString, MyEntity.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// List集合转换为JSON数组</span></span><br><span class="line"><span class="type">JSONArray</span> <span class="variable">jsonArray</span> <span class="operator">=</span> JSONArray.parseArray(JSON.toJSONString(list));</span><br></pre></td></tr></table></figure><h3 id="使用Jackson-1"><a href="#使用Jackson-1" class="headerlink" title="使用Jackson"></a>使用Jackson</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// JSON数组转换为List集合</span></span><br><span class="line">List&lt;MyEntity&gt; list = objectMapper.readValue(jsonArrayString, <span class="keyword">new</span> <span class="title class_">TypeReference</span>&lt;List&lt;MyEntity&gt;&gt;() &#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// List集合转换为JSON数组</span></span><br><span class="line"><span class="type">String</span> <span class="variable">jsonArrayString</span> <span class="operator">=</span> objectMapper.writeValueAsString(list);</span><br></pre></td></tr></table></figure><h3 id="使用Gson-1"><a href="#使用Gson-1" class="headerlink" title="使用Gson"></a>使用Gson</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// JSON数组转换为List集合</span></span><br><span class="line">List&lt;MyEntity&gt; list = gson.fromJson(jsonArrayString, <span class="keyword">new</span> <span class="title class_">TypeToken</span>&lt;List&lt;MyEntity&gt;&gt;() &#123;&#125;.getType());</span><br><span class="line"></span><br><span class="line"><span class="comment">// List集合转换为JSON数组</span></span><br><span class="line"><span class="type">String</span> <span class="variable">jsonArrayString</span> <span class="operator">=</span> gson.toJson(list);</span><br></pre></td></tr></table></figure><h2 id="JSON对象与Java中Map集合互相转换"><a href="#JSON对象与Java中Map集合互相转换" class="headerlink" title="JSON对象与Java中Map集合互相转换"></a>JSON对象与Java中Map集合互相转换</h2><h3 id="使用Fastjson-2"><a href="#使用Fastjson-2" class="headerlink" title="使用Fastjson"></a>使用Fastjson</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JSON对象转换为Map集合</span></span><br><span class="line">Map&lt;String, Object&gt; map = JSON.parseObject(jsonObjectString);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Map集合转换为JSON对象</span></span><br><span class="line"><span class="type">JSONObject</span> <span class="variable">jsonObject</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">JSONObject</span>(map);</span><br></pre></td></tr></table></figure><h3 id="使用Jackson-2"><a href="#使用Jackson-2" class="headerlink" title="使用Jackson"></a>使用Jackson</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// JSON对象转换为Map集合</span></span><br><span class="line">Map&lt;String, Object&gt; map = objectMapper.readValue(jsonObjectString, Map.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Map集合转换为JSON对象</span></span><br><span class="line"><span class="type">String</span> <span class="variable">jsonObjectString</span> <span class="operator">=</span> objectMapper.writeValueAsString(map);</span><br></pre></td></tr></table></figure><h3 id="使用Gson-2"><a href="#使用Gson-2" class="headerlink" title="使用Gson"></a>使用Gson</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// JSON对象转换为Map集合</span></span><br><span class="line">Map&lt;String, Object&gt; map = gson.fromJson(jsonObjectString, <span class="keyword">new</span> <span class="title class_">TypeToken</span>&lt;Map&lt;String, Object&gt;&gt;() &#123;&#125;.getType());</span><br><span class="line"></span><br><span class="line"><span class="comment">// Map集合转换为JSON对象</span></span><br><span class="line"><span class="type">String</span> <span class="variable">jsonObjectString</span> <span class="operator">=</span> gson.toJson(map);</span><br></pre></td></tr></table></figure><h2 id="JSON对象与Java中实体类互相转换"><a href="#JSON对象与Java中实体类互相转换" class="headerlink" title="JSON对象与Java中实体类互相转换"></a>JSON对象与Java中实体类互相转换</h2><h3 id="使用Fastjson-3"><a href="#使用Fastjson-3" class="headerlink" title="使用Fastjson"></a>使用Fastjson</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JSON转换为实体类对象</span></span><br><span class="line"><span class="type">MyEntity</span> <span class="variable">myEntity</span> <span class="operator">=</span> JSON.parseObject(jsonString, MyEntity.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实体类对象转换为JSON</span></span><br><span class="line"><span class="type">String</span> <span class="variable">jsonString</span> <span class="operator">=</span> JSON.toJSONString(myEntity);</span><br></pre></td></tr></table></figure><h3 id="使用Jackson-3"><a href="#使用Jackson-3" class="headerlink" title="使用Jackson"></a>使用Jackson</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ObjectMapper</span> <span class="variable">objectMapper</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectMapper</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// JSON转换为实体类对象</span></span><br><span class="line"><span class="type">MyEntity</span> <span class="variable">myEntity</span> <span class="operator">=</span> objectMapper.readValue(jsonString, MyEntity.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实体类对象转换为JSON</span></span><br><span class="line"><span class="type">String</span> <span class="variable">jsonString</span> <span class="operator">=</span> objectMapper.writeValueAsString(myEntity);</span><br></pre></td></tr></table></figure><h3 id="使用Gson-3"><a href="#使用Gson-3" class="headerlink" title="使用Gson"></a>使用Gson</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Gson</span> <span class="variable">gson</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Gson</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// JSON转换为实体类对象</span></span><br><span class="line"><span class="type">MyEntity</span> <span class="variable">myEntity</span> <span class="operator">=</span> gson.fromJson(jsonString, MyEntity.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 实体类对象转换为JSON</span></span><br><span class="line"><span class="type">String</span> <span class="variable">jsonString</span> <span class="operator">=</span> gson.toJson(myEntity);</span><br></pre></td></tr></table></figure><h1 id="常用日志相关库"><a href="#常用日志相关库" class="headerlink" title="常用日志相关库"></a>常用日志相关库</h1><h2 id="日志概述"><a href="#日志概述" class="headerlink" title="日志概述"></a>日志概述</h2><h3 id="日志简介"><a href="#日志简介" class="headerlink" title="日志简介"></a>日志简介</h3><p>日志是指记录程序运行过程中产生的重要信息的一种技术手段。在软件开发和维护过程中，我们通常使用日志来记录程序的运行状态、错误信息、异常情况等等。</p><h3 id="日志作用"><a href="#日志作用" class="headerlink" title="日志作用"></a>日志作用</h3><p>日志有以下几个作用：</p><ol><li><strong>故障排查和问题定位</strong>：当系统或应用程序发生错误、异常或故障时，日志可以提供关键的信息来帮助开发人员定位问题的根源和修复错误。</li><li><strong>性能分析与优化</strong>：通过分析日志，可以了解系统或应用程序的性能瓶颈、资源利用情况和潜在的瓶颈点，从而进行优化和改进，提高系统性能。</li><li><strong>安全审计与追踪</strong>：记录用户的操作日志和事件可以用于安全审计和追踪。当出现安全漏洞、入侵威胁或数据泄露时，日志可以提供审计证据和追踪攻击路径。</li><li><strong>业务分析与决策支持</strong>：通过分析用户行为日志和业务日志，可以获取有关用户行为、偏好和需求的信息，帮助企业做出准确的决策和制定合适的业务策略。</li><li><strong>监控和预警</strong>：监控系统和应用程序的日志可以提供实时的运行状态信息，用于监测系统是否正常运行并及时发现潜在的问题，在关键事件发生时触发预警机制。</li></ol><h3 id="日志级别"><a href="#日志级别" class="headerlink" title="日志级别"></a>日志级别</h3><p>Java日志系统使用不同的日志级别来表示日志信息的重要性和严重程度。常见的日志级别包括：</p><ul><li><strong>TRACE（跟踪）</strong>：最低级别，提供最详细的日志信息，适用于追踪程序的执行流程。</li><li><strong>DEBUG（调试）</strong>：用于调试目的的详细信息，例如变量值、方法调用等。</li><li><strong>INFO（信息）</strong>：用于记录程序运行时的一般信息，如应用程序启动、某个操作完成等。</li><li><strong>WARN（警告）</strong>：表示可能存在潜在问题或异常情况，但不会导致程序崩溃。</li><li><strong>ERROR（错误）</strong>：指示出现了错误或异常情况，可能导致程序无法正常运行。</li><li><strong>FATAL（严重错误）</strong>：最高级别，表示致命错误，可能导致应用程序崩溃。</li></ul><h2 id="日志库"><a href="#日志库" class="headerlink" title="日志库"></a>日志库</h2><h3 id="日志库简介"><a href="#日志库简介" class="headerlink" title="日志库简介"></a>日志库简介</h3><p>在日志相关库中，通常存在两种概念：日志系统和日志门面。</p><ul><li><strong>日志系统</strong>（Logging System）：日志系统通常是指实现了日志记录功能的库或组件。日志系统定义了日志记录的级别（例如调试、信息、警告、错误等），并提供了将日志消息写入不同目标（如控制台输出、文件、数据库等）的方法。常见的日志系统有Java Util Logging（JUL）、Log4j、Log4j 2、Logback等。</li><li><strong>日志门面</strong>（Logging Facade）：日志门面是一个抽象层，不实现日志功能，仅整合日志系统，提供统一的API接口。日志门面的目的是将具体的日志系统与应用程序解耦，使开发人员能够以统一的方式编写日志代码，而无需关注底层日志系统的具体实现细节。通过使用日志门面，应用程序可以方便地切换底层日志系统，而不会对代码产生太大的影响。常见的日志门面有SLF4J、Apache Commons Logging等。</li></ul><h3 id="日志系统"><a href="#日志系统" class="headerlink" title="日志系统"></a>日志系统</h3><p>常见的日志系统有JUL、Log4j、Log4j 2、Logback等。</p><ul><li><strong>Java Util Logging（JUL）</strong>：JUL 是 Java 标准库自带的日志系统，提供了基本的日志功能。JUL 的优点是简单易用，无需引入额外的依赖，可以通过配置文件或代码进行配置。但功能相对较为简单，不如其他日志系统提供的特性丰富。</li><li><strong>Log4j</strong>：<a target="_blank" rel="noopener" href="https://logging.apache.org/log4j/2.x/">Log4j</a> 是Apache 的一个开源项目，具有广泛的功能和灵活的配置选项。支持多种输出目标（如文件、控制台、Socket）和日志级别，可以通过配置文件进行配置。Log4j 还提供了丰富的过滤器和格式化选项，可以灵活地控制日志记录的行为。</li><li><strong>Log4j2</strong>：<a target="_blank" rel="noopener" href="https://logging.apache.org/log4j/2.x/">Log4j 2</a> 是 Log4j 的升级版本，提供了更高的性能和更丰富的特性。Log4j 2 支持异步日志记录，可以大大提高应用程序的性能。还引入了插件机制，使得扩展和定制变得更加容易，同时支持灵活的归档策略，可以方便地管理和维护日志文件。</li><li><strong>Logback</strong>：<a target="_blank" rel="noopener" href="https://logback.qos.ch/">Logback</a> 是一个功能强大且高性能的日志组件，是 Log4j 的继任者。支持多线程环境和异步日志记录，并提供了丰富的配置选项。还支持通过 Groovy 脚本进行配置，使得配置更加灵活和动态化。Logback 的性能表现优秀，可以适用于高负载的应用程序。</li></ul><h3 id="日志门面"><a href="#日志门面" class="headerlink" title="日志门面"></a>日志门面</h3><p>常见的日志门面有SLF4J、Apache Commons Logging等。</p><ul><li><strong>SLF4J</strong>：<a target="_blank" rel="noopener" href="http://www.slf4j.org/">SLF4J</a>（Simple Logging Facade for Java）：提供了一个简单的日志门面接口，可以与多种日志实现框架集成。通过使用 SLF4J，开发人员可以在应用程序中使用统一的日志 API 进行日志记录操作，而不需要直接依赖特定的日志实现。SLF4J 可以与其他日志系统（如Log4j、Log4j 2、Logback）无缝集成，通过配置文件或代码来指定具体的日志实现。</li><li><strong>Commons Logging</strong>：Apache 的一个顶级项目，最初名为Jakarta Commons Logging（JCL），后来更名为<a target="_blank" rel="noopener" href="https://commons.apache.org/proper/commons-logging/">Apache Commons Logging</a> 提供了简单的API用于在应用程序中进行日志记录。可以与多种日志系统集成，如JCL、SLF4J等。通过配置文件或代码来指定底层的日志实现，开发人员可以根据需要选择合适的日志系统。</li></ul><h2 id="日志库使用"><a href="#日志库使用" class="headerlink" title="日志库使用"></a>日志库使用</h2><h3 id="方案一：SLF4J-Logback"><a href="#方案一：SLF4J-Logback" class="headerlink" title="方案一：SLF4J + Logback"></a>方案一：SLF4J + Logback</h3><p>步骤一：引入依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- SLF4J API --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.slf4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>slf4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.7.32<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Logback Classic (实现了SLF4J的API) --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.6<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>步骤二：配置文件，创建一个logback.xml或logback-spring.xml文件，用于配置Logback的日志输出方式、格式等。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;console&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss&#125; [%thread] %-5level %logger&#123;36&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;console&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>步骤三：使用 API</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOG</span> <span class="operator">=</span> LoggerFactory.getLogger(MyClass.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span> &#123;</span><br><span class="line">        LOG.debug(<span class="string">&quot;Debug message&quot;</span>);</span><br><span class="line">        LOG.info(<span class="string">&quot;Info message&quot;</span>);</span><br><span class="line">        LOG.warn(<span class="string">&quot;Warning message&quot;</span>);</span><br><span class="line">        LOG.error(<span class="string">&quot;Error message&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="方案二：Commons-Logging-Log4j2"><a href="#方案二：Commons-Logging-Log4j2" class="headerlink" title="方案二：Commons Logging + Log4j2"></a>方案二：Commons Logging + Log4j2</h3><p>步骤一：引入依赖</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Commons Logging --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Log4j Core --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Log4j API --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br></pre></td></tr></table></figure><p>步骤二：配置文件，创建一个log4j2.xml文件，用于配置Log4j2的日志输出方式、格式等。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Configuration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Appenders</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Console</span> <span class="attr">name</span>=<span class="string">&quot;console&quot;</span> <span class="attr">target</span>=<span class="string">&quot;SYSTEM_OUT&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">PatternLayout</span> <span class="attr">pattern</span>=<span class="string">&quot;%d&#123;yyyy-MM-dd HH:mm:ss&#125; [%thread] %-5level %logger&#123;36&#125; - %msg%n&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Console</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Appenders</span>&gt;</span></span><br><span class="line">    </span><br><span class="line">    <span class="tag">&lt;<span class="name">Loggers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Root</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">AppenderRef</span> <span class="attr">ref</span>=<span class="string">&quot;console&quot;</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Loggers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Configuration</span>&gt;</span></span><br></pre></td></tr></table></figure><p>步骤三：使用 API</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyClass</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Log</span> <span class="variable">LOG</span> <span class="operator">=</span> LogFactory.getLog(MyClass.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span> &#123;</span><br><span class="line">        LOG.debug(<span class="string">&quot;Debug message&quot;</span>);</span><br><span class="line">        LOG.info(<span class="string">&quot;Info message&quot;</span>);</span><br><span class="line">        LOG.warn(<span class="string">&quot;Warning message&quot;</span>);</span><br><span class="line">        LOG.error(<span class="string">&quot;Error message&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="单元测试相关"><a href="#单元测试相关" class="headerlink" title="单元测试相关"></a>单元测试相关</h1><h2 id="单元测试概括"><a href="#单元测试概括" class="headerlink" title="单元测试概括"></a>单元测试概括</h2><h3 id="单元测试简介"><a href="#单元测试简介" class="headerlink" title="单元测试简介"></a>单元测试简介</h3><p>单元测试是软件开发中的一种测试方法，用于验证程序的最小可测试单元（通常是函数或方法）是否按照预期进行工作。</p><h3 id="Java常用的单元测试框架"><a href="#Java常用的单元测试框架" class="headerlink" title="Java常用的单元测试框架"></a>Java常用的单元测试框架</h3><p>在Java开发中，常用的测试框架有以下几种：</p><ol><li><strong>JUnit</strong>：JUnit是Java中最常用的单元测试框架。它提供了一套用于编写和运行单元测试的API，并支持断言（assertions）和测试装置（test fixtures）等功能。JUnit可以与各种开发工具和持续集成系统集成，是Java开发中必备的测试框架。</li><li><strong>TestNG</strong>：TestNG是一个灵活的测试框架，可以用于编写各种类型的测试，包括单元测试、集成测试和端到端测试等。它支持并行执行测试，提供了丰富的注解和配置选项，可以方便地管理测试用例和测试报告。</li><li><strong>Mockito</strong>：Mockito是一个用于Java单元测试中模拟（mock）对象的框架。它能够创建和操作模拟对象，以便更容易地进行测试驱动开发。Mockito提供了简洁的API，使得模拟对象的创建和行为设置变得简单而直观。</li><li><strong>PowerMock</strong>：PowerMock是一个扩展了Mockito和其他测试框架的工具，可以用于处理一些更复杂的测试场景，例如对静态方法、私有方法和构造函数进行模拟。它提供了一些特殊的注解和API，使得在单元测试中处理这些特殊情况更加方便。</li></ol><h2 id="JUnit4"><a href="#JUnit4" class="headerlink" title="JUnit4"></a>JUnit4</h2><h3 id="JUnit4简介"><a href="#JUnit4简介" class="headerlink" title="JUnit4简介"></a>JUnit4简介</h3><p>JUnit是Java中最常用的单元测试框架。它提供了一套用于编写和运行单元测试的API，并支持断言（assertions）和测试装置（test fixtures）等功能。JUnit可以与各种开发工具和持续集成系统集成，是Java开发中必备的测试框架。Maven依赖如下</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- JUnit 单元测试 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.13.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="JUnit4注解"><a href="#JUnit4注解" class="headerlink" title="JUnit4注解"></a>JUnit4注解</h3><ol><li><code>@Test</code>: 用于标记一个测试方法。被标记的方法应该是公共的、无参数的，并且没有返回值。</li><li><code>@Before</code>: 用于标记在每个测试方法执行之前需要执行的方法。通常用于设置测试的前提条件。</li><li><code>@After</code>: 用于标记在每个测试方法执行之后需要执行的方法。通常用于清理测试过程中创建的资源。</li><li><code>@BeforeClass</code>: 用于标记在所有测试方法执行之前需要执行的方法。被标记的方法必须是静态的。</li><li><code>@AfterClass</code>: 用于标记在所有测试方法执行之后需要执行的方法。被标记的方法必须是静态的。</li><li><code>@Ignore</code>: 用于标记一个测试方法或测试类，表示忽略该方法或类的测试。</li><li><code>@RunWith</code>: 用于指定自定义的测试运行器。测试运行器负责控制测试的执行流程。</li><li><code>@Rule</code>: 用于定义测试规则，例如 Timeout 规则、Expected Exception 规则等。</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RunWith(JUnit4.class)</span><span class="comment">// 告诉JUnit使用JUnit4作为测试运行器来运行当前的测试类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JunitTest</span> &#123;</span><br><span class="line">    <span class="comment">// 创建一个全局超时规则，设置最大执行时间为 1 秒</span></span><br><span class="line">    <span class="meta">@Rule</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">Timeout</span> <span class="variable">globalTimeout</span> <span class="operator">=</span> Timeout.seconds(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Ignore</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">ignoredTestMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;被忽略的测试方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BeforeClass</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">setUpClass</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在所有测试方法执行之前执行一次的静态方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUp</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在每个测试方法执行之前执行的方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testMethod1</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;第一个测试方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testMethod2</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;第二个测试方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">tearDown</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在每个测试方法执行之后执行的方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@AfterClass</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">tearDownClass</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在所有测试方法执行之后执行一次的静态方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="JUnit4断言"><a href="#JUnit4断言" class="headerlink" title="JUnit4断言"></a>JUnit4断言</h3><p>JUnit 4中常用的断言方法如下：</p><ol><li>**assertEquals(expected, actual)**：比较两个值是否相等。使用该断言时，如果预期值与实际值不相等，则测试将失败。</li><li>**assertNotEquals(unexpected, actual)**：比较两个值是否不相等。使用该断言时，如果预期值与实际值相等，则测试将失败。</li><li>**assertSame(expected, actual)**：验证两个对象是否为同一个对象（引用相等）。如果 <code>expected</code> 和 <code>actual</code> 不是同一个对象，则测试将失败。</li><li>**assertNotSame(unexpected, actual)**：验证两个对象是否不是同一个对象（引用不相等）。如果 <code>unexpected</code> 和 <code>actual</code> 是同一个对象，则测试将失败。</li><li>**assertTrue(condition)**：验证条件是否为真。使用该断言时，如果条件为假，则测试将失败。</li><li>**assertFalse(condition)**：验证条件是否为假。使用该断言时，如果条件为真，则测试将失败。</li><li>**assertNull(object)**：验证对象是否为null。使用该断言时，如果对象不为null，则测试将失败。</li><li>**assertNotNull(object)**：验证对象是否不为null。使用该断言时，如果对象为null，则测试将失败。</li><li>**assertArrayEquals(expectedArray, actualArray)**：比较两个数组是否相等。使用该断言时，如果预期数组与实际数组不相等，则测试将失败。</li><li>**assertThrows(expectedType, executable)**：验证代码块是否会抛出预期的异常。使用该断言时，如果代码块没有抛出预期的异常，则测试将失败。</li><li>**fail()**：标记测试失败。使用该断言时，无论条件如何，测试都将失败。</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testAddition</span><span class="params">()</span> &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;JunitTest&quot;</span>);</span><br><span class="line">    assertEquals(<span class="number">5</span>, <span class="number">3</span>);<span class="comment">// 比较两个值是否相等</span></span><br><span class="line">    assertNotEquals(<span class="number">5</span>, <span class="number">3</span>);<span class="comment">// 比较两个值是否不相等</span></span><br><span class="line"></span><br><span class="line">    assertSame(<span class="keyword">new</span> <span class="title class_">Object</span>(), <span class="keyword">new</span> <span class="title class_">Object</span>());<span class="comment">// 比较两个对象是否为同一个对象，即引用相等</span></span><br><span class="line">    assertNotSame(<span class="keyword">new</span> <span class="title class_">Object</span>(), <span class="keyword">new</span> <span class="title class_">Object</span>());<span class="comment">// 比较两个对象是否不为同一个对象，即引用不相等</span></span><br><span class="line"></span><br><span class="line">    assertTrue(<span class="literal">true</span>);<span class="comment">// 验证条件是否为真</span></span><br><span class="line">    assertFalse(<span class="literal">true</span>);<span class="comment">// 验证条件是否为假</span></span><br><span class="line"></span><br><span class="line">    assertNull(<span class="literal">null</span>);<span class="comment">// 验证对象是否为null</span></span><br><span class="line">    assertNotNull(<span class="literal">null</span>);<span class="comment">// 验证对象是否不为null</span></span><br><span class="line"></span><br><span class="line">    assertArrayEquals(<span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;, <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;);<span class="comment">// 比较两个数组是否相等</span></span><br><span class="line">    assertThrows(ArithmeticException.class, () -&gt; &#123; <span class="type">int</span> <span class="variable">result</span> <span class="operator">=</span> <span class="number">10</span> / <span class="number">0</span>; &#125;);<span class="comment">// 验证代码块是否会抛出预期的异常</span></span><br><span class="line">    fail(<span class="string">&quot;This test intentionally fails&quot;</span>);<span class="comment">// 标记测试失败</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="JUnit5"><a href="#JUnit5" class="headerlink" title="JUnit5"></a>JUnit5</h2><h3 id="JUnit5简介"><a href="#JUnit5简介" class="headerlink" title="JUnit5简介"></a>JUnit5简介</h3><p>JUnit 5是JUnit测试框架的最新版本，提供了一些新的功能和改进</p><h3 id="JUnit5注解"><a href="#JUnit5注解" class="headerlink" title="JUnit5注解"></a>JUnit5注解</h3><p>JUnit 5引入了一组新的注解，使用更一致的命名规则。</p><ol><li><strong>@Test</strong>：标记一个测试方法。</li><li><strong>@BeforeAll</strong>：标记一个静态方法，在所有测试方法之前执行一次。</li><li><strong>@BeforeEach</strong>：标记一个非静态方法，在每个测试方法之前执行一次。</li><li><strong>@AfterEach</strong>：标记一个非静态方法，在每个测试方法之后执行一次。</li><li><strong>@AfterAll</strong>：标记一个静态方法，在所有测试方法之后执行一次。</li><li><strong>@DisplayName</strong>：为测试类或测试方法指定展示名称。</li><li><strong>@Disabled</strong>：标记一个测试类或测试方法为禁用状态，不会执行该测试。</li><li><strong>@Tag</strong>：为测试类或测试方法添加标签，以便于在测试运行时进行筛选和分组。</li><li><strong>@Timeout</strong>：设置测试方法的超时时间。如果测试方法执行时间超过指定的时间，测试将被认为失败。</li><li><strong>@RepeatedTest</strong>：指定一个测试方法重复执行的次数。</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Tag(&quot;unit&quot;)</span><span class="comment">// 为测试类或测试方法添加标签，以便于在测试运行时进行筛选和分组。</span></span><br><span class="line"><span class="meta">@DisplayName(&quot;Junit5Test&quot;)</span><span class="comment">// 为测试类或测试方法指定展示名称</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Junit5Test</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span><span class="comment">// 标记一个测试方法</span></span><br><span class="line">    <span class="meta">@Disabled</span><span class="comment">// 标记一个测试类或测试方法为禁用状态，不会执行该测试。</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testMethod1</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 测试方法的代码</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span><span class="comment">// 标记一个测试方法</span></span><br><span class="line">    <span class="meta">@Timeout(5)</span><span class="comment">// 执行时间超过5秒会导致测试失败</span></span><br><span class="line">    <span class="meta">@RepeatedTest(3)</span><span class="comment">// 这个测试方法将重复执行3次</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testMethod2</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 测试方法的代码</span></span><br><span class="line">        System.out.println(<span class="string">&quot;测试方法的代码&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BeforeAll</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">setupAll</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在所有测试方法之前执行一次&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@BeforeEach</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">setup</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在每个测试方法之前执行一次&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@AfterEach</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">cleanup</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在每个测试方法之后执行一次&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@AfterAll</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">cleanupAll</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;在所有测试方法之后执行一次&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="TestNG"><a href="#TestNG" class="headerlink" title="TestNG"></a>TestNG</h2><p>TestNG是一个灵活的测试框架，可以用于编写各种类型的测试，包括单元测试、集成测试和端到端测试等。它支持并行执行测试，提供了丰富的注解和配置选项，可以方便地管理测试用例和测试报告。</p><h2 id="Mockito"><a href="#Mockito" class="headerlink" title="Mockito"></a>Mockito</h2><p>Mockito是一个用于Java单元测试中模拟（mock）对象的框架。它能够创建和操作模拟对象，以便更容易地进行测试驱动开发。Mockito提供了简洁的API，使得模拟对象的创建和行为设置变得简单而直观。</p><h2 id="PowerMock"><a href="#PowerMock" class="headerlink" title="PowerMock"></a>PowerMock</h2><p>PowerMock是一个扩展了Mockito和其他测试框架的工具，可以用于处理一些更复杂的测试场景，例如对静态方法、私有方法和构造函数进行模拟。它提供了一些特殊的注解和API，使得在单元测试中处理这些特殊情况更加方便。</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://w_e_n.gitee.io">wen</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://w_e_n.gitee.io/2023/01/01/%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3/">https://w_e_n.gitee.io/2023/01/01/%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://w_e_n.gitee.io" target="_blank">远方の博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="./tags/%E9%A1%B9%E7%9B%AE/">项目</a></div><div class="post_share"><div class="social-share" data-image="./2023/01/01/%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3/%E9%A1%B9%E7%9B%AE%E7%9B%B8%E5%85%B3.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="./2023/01/01/%E9%9D%A2%E8%AF%95%E9%A2%98-JavaSE/" title="面试题-JavaSE"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="./2023/01/01/%E9%9D%A2%E8%AF%95%E9%A2%98-JavaSE/%E9%9D%A2%E8%AF%95%E9%A2%98.png" onerror='onerror=null,src="./img/404.png"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">面试题-JavaSE</div></div></a></div><div class="next-post pull-right"><a href="./2022/01/01/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" title="计算机组成原理"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="./2022/01/01/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86.png" onerror='onerror=null,src="./img/404.png"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">计算机组成原理</div></div></a></div></nav><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div id="comment-switch"><span class="first-comment">Gitalk</span><span class="switch-btn"></span><span class="second-comment">Valine</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="./img/%E5%A4%B4%E5%83%8F.png" onerror='this.onerror=null,this.src="./img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">wen</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="./archives/"><div class="headline">文章</div><div class="length-num">62</div></a><a href="./tags/"><div class="headline">标签</div><div class="length-num">35</div></a><a href="./categories/"><div class="headline">分类</div><div class="length-num">9</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/wen53231323"><i class="fab fa-github"></i><span>我的仓库</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">暂无</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#AOP%E5%BA%94%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text">AOP应用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#AOP%E6%97%A5%E5%BF%97%E8%AE%B0%E5%BD%95"><span class="toc-number">1.1.</span> <span class="toc-text">AOP日志记录</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96"><span class="toc-number">1.1.1.</span> <span class="toc-text">引入依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3"><span class="toc-number">1.1.2.</span> <span class="toc-text">自定义注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%88%87%E9%9D%A2%E7%B1%BB"><span class="toc-number">1.1.3.</span> <span class="toc-text">定义切面类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">1.1.4.</span> <span class="toc-text">使用方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AOP%E7%BC%93%E5%AD%98%E4%BC%98%E5%8C%96"><span class="toc-number">1.2.</span> <span class="toc-text">AOP缓存优化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96-1"><span class="toc-number">1.2.1.</span> <span class="toc-text">引入依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3-1"><span class="toc-number">1.2.2.</span> <span class="toc-text">自定义注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%88%87%E9%9D%A2%E7%B1%BB-1"><span class="toc-number">1.2.3.</span> <span class="toc-text">定义切面类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F-1"><span class="toc-number">1.2.4.</span> <span class="toc-text">使用方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AOP%E6%8E%A5%E5%8F%A3%E9%99%90%E6%B5%81"><span class="toc-number">1.3.</span> <span class="toc-text">AOP接口限流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96-2"><span class="toc-number">1.3.1.</span> <span class="toc-text">引入依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%B3%A8%E8%A7%A3-2"><span class="toc-number">1.3.2.</span> <span class="toc-text">自定义注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E5%88%87%E9%9D%A2%E7%B1%BB-2"><span class="toc-number">1.3.3.</span> <span class="toc-text">定义切面类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F-2"><span class="toc-number">1.3.4.</span> <span class="toc-text">使用方式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%A2%84%E5%8A%A0%E8%BD%BD"><span class="toc-number">2.</span> <span class="toc-text">预加载</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0CommandLineRunner%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.1.</span> <span class="toc-text">实现CommandLineRunner接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0ApplicationRunner-%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.2.</span> <span class="toc-text">实现ApplicationRunner 接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0InitializingBean%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.3.</span> <span class="toc-text">实现InitializingBean接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0ApplicationListener%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.4.</span> <span class="toc-text">实现ApplicationListener接口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-PostConstruct%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.5.</span> <span class="toc-text">使用@PostConstruct注解</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-EventListener%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.6.</span> <span class="toc-text">使用@EventListener注解</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6"><span class="toc-number">3.</span> <span class="toc-text">任务调度</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%EF%BC%88%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%EF%BC%89%E7%AE%80%E4%BB%8B"><span class="toc-number">3.1.</span> <span class="toc-text">任务调度（定时任务）简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6%E5%B8%B8%E8%A7%81%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F"><span class="toc-number">3.2.</span> <span class="toc-text">任务调度常见实现方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E5%AE%9E%E7%8E%B0%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6"><span class="toc-number">3.3.</span> <span class="toc-text">多线程实现任务调度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#java-util-Timer%E5%AE%9E%E7%8E%B0%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6"><span class="toc-number">3.4.</span> <span class="toc-text">java.util.Timer实现任务调度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ScheduledExecutorService%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6"><span class="toc-number">3.5.</span> <span class="toc-text">ScheduledExecutorService接口实现任务调度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93Quartz%E5%AE%9E%E7%8E%B0%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6"><span class="toc-number">3.6.</span> <span class="toc-text">第三方库Quartz实现任务调度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E6%8F%90%E4%BE%9B%E7%9A%84%E6%B3%A8%E8%A7%A3%E5%AE%9E%E7%8E%B0%E4%BB%BB%E5%8A%A1%E8%B0%83%E5%BA%A6"><span class="toc-number">3.7.</span> <span class="toc-text">Spring提供的注解实现任务调度</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="toc-number">3.7.1.</span> <span class="toc-text">Spring定时任务实现步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Scheduled%E6%B3%A8%E8%A7%A3%E8%AF%B4%E6%98%8E"><span class="toc-number">3.7.2.</span> <span class="toc-text">@Scheduled注解说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Cron%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">3.7.3.</span> <span class="toc-text">Cron表达式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Async%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1"><span class="toc-number">3.8.</span> <span class="toc-text">Async异步任务</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98"><span class="toc-number">4.</span> <span class="toc-text">跨域问题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E7%AE%80%E4%BB%8B"><span class="toc-number">4.1.</span> <span class="toc-text">跨域问题简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B7%A8%E5%9F%9F%E5%87%BA%E7%8E%B0%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="toc-number">4.2.</span> <span class="toc-text">跨域出现的原因</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E9%97%AE%E9%A2%98%E7%9A%84%E6%96%B9%E6%A1%88"><span class="toc-number">4.3.</span> <span class="toc-text">解决跨域问题的方案</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Java%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-number">4.4.</span> <span class="toc-text">Java解决跨域的方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-CrossOrigin%E6%B3%A8%E8%A7%A3"><span class="toc-number">4.4.1.</span> <span class="toc-text">使用@CrossOrigin注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-WebMvcConfigurer-%E6%8E%A5%E5%8F%A3"><span class="toc-number">4.4.2.</span> <span class="toc-text">实现 WebMvcConfigurer 接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">4.4.3.</span> <span class="toc-text">自定义拦截器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">4.4.4.</span> <span class="toc-text">自定义过滤器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Spring-Web%E7%9A%84CorsFilter%E8%BF%87%E6%BB%A4%E5%99%A8"><span class="toc-number">4.4.5.</span> <span class="toc-text">使用Spring Web的CorsFilter过滤器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Spring-Cloud-Gateway%E8%B7%A8%E5%9F%9F%E9%85%8D%E7%BD%AE"><span class="toc-number">4.4.6.</span> <span class="toc-text">使用Spring Cloud Gateway跨域配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Nginx%E9%85%8D%E7%BD%AE"><span class="toc-number">4.4.7.</span> <span class="toc-text">使用Nginx配置</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F%E9%97%AE%E9%A2%98"><span class="toc-number">5.</span> <span class="toc-text">日期格式问题</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E8%AF%B4%E6%98%8E"><span class="toc-number">5.1.</span> <span class="toc-text">问题说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E4%B8%80%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">5.2.</span> <span class="toc-text">问题一解决方案</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E4%BA%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">5.3.</span> <span class="toc-text">问题二解决方案</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89JSON%E5%BA%8F%E5%88%97%E5%8C%96%E5%99%A8%E6%88%96%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%99%A8"><span class="toc-number">5.4.</span> <span class="toc-text">自定义JSON序列化器或反序列化器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-JsonComponent%E6%B3%A8%E8%A7%A3%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9A%84%E5%BA%8F%E5%88%97%E5%8C%96%E5%99%A8%E6%88%96%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%99%A8"><span class="toc-number">5.4.1.</span> <span class="toc-text">使用@JsonComponent注解自定义的序列化器或反序列化器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Configuration%E6%B3%A8%E8%A7%A3%E7%BB%9F%E4%B8%80%E9%85%8D%E7%BD%AE%E6%97%B6%E9%97%B4%E7%B1%BB%E5%9E%8B%E8%A3%85%E6%8D%A2"><span class="toc-number">5.4.2.</span> <span class="toc-text">使用@Configuration注解统一配置时间类型装换</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-number">6.</span> <span class="toc-text">异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%B1%BB"><span class="toc-number">6.1.</span> <span class="toc-text">自定义异常处理类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86%E7%B1%BB"><span class="toc-number">6.2.</span> <span class="toc-text">全局异常处理类</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%9F%E4%B8%80%E8%AF%B7%E6%B1%82%E5%93%8D%E5%BA%94%E6%A8%A1%E5%9E%8B"><span class="toc-number">7.</span> <span class="toc-text">统一请求响应模型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%9F%E4%B8%80%E5%93%8D%E5%BA%94%E6%A8%A1%E5%9E%8B%EF%BC%88Result%EF%BC%89"><span class="toc-number">7.1.</span> <span class="toc-text">统一响应模型（Result）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E5%93%8D%E5%BA%94%E6%A8%A1%E5%9E%8B%EF%BC%88PageResult%EF%BC%89"><span class="toc-number">7.2.</span> <span class="toc-text">分页响应模型（PageResult）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E8%AF%B7%E6%B1%82%E6%A8%A1%E5%9E%8B%EF%BC%88PageParams%EF%BC%89"><span class="toc-number">7.3.</span> <span class="toc-text">分页请求模型（PageParams）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%9E%E7%A9%BA%E5%88%A4%E6%96%AD%E5%92%8C%E4%B8%BA%E7%A9%BA%E5%88%A4%E6%96%AD"><span class="toc-number">8.</span> <span class="toc-text">非空判断和为空判断</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84-isBlank-%E5%92%8C-isEmpty-%E6%96%B9%E6%B3%95"><span class="toc-number">8.1.</span> <span class="toc-text">常见的 isBlank() 和 isEmpty() 方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">8.2.</span> <span class="toc-text">字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E9%9D%9E%E7%A9%BA%E5%88%A4%E6%96%AD"><span class="toc-number">8.2.1.</span> <span class="toc-text">字符串非空判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%BA%E7%A9%BA%E5%88%A4%E6%96%AD"><span class="toc-number">8.2.2.</span> <span class="toc-text">字符串为空判断</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#List%E9%9B%86%E5%90%88"><span class="toc-number">8.3.</span> <span class="toc-text">List集合</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%9E%E7%A9%BA%E5%88%A4%E6%96%AD"><span class="toc-number">8.3.1.</span> <span class="toc-text">非空判断</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E7%A9%BA%E5%88%A4%E6%96%AD"><span class="toc-number">8.3.2.</span> <span class="toc-text">为空判断</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E4%B9%8B%E9%97%B4%E7%9A%84%E6%8B%B7%E8%B4%9D"><span class="toc-number">9.</span> <span class="toc-text">对象之间的拷贝</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%8B%B7%E8%B4%9D%E6%A6%82%E5%BF%B5"><span class="toc-number">9.1.</span> <span class="toc-text">对象拷贝概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%8B%B7%E8%B4%9D%E5%B8%B8%E8%A7%81%E6%96%B9%E6%A1%88"><span class="toc-number">9.2.</span> <span class="toc-text">对象拷贝常见方案</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%8B%B7%E8%B4%9D%E5%B8%B8%E8%A7%81%E6%96%B9%E6%A1%88%E6%80%A7%E8%83%BD%E5%AF%B9%E6%AF%94"><span class="toc-number">9.3.</span> <span class="toc-text">对象拷贝常见方案性能对比</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%8B%B7%E8%B4%9D%E5%B8%B8%E8%A7%81%E6%96%B9%E6%A1%88%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B"><span class="toc-number">9.4.</span> <span class="toc-text">对象拷贝常见方案使用案例</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Apache%E7%9A%84BeanUtils"><span class="toc-number">9.4.1.</span> <span class="toc-text">Apache的BeanUtils</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Spring%E7%9A%84BeanUtils"><span class="toc-number">9.4.2.</span> <span class="toc-text">Spring的BeanUtils</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CGLib%E7%9A%84BeanCopier"><span class="toc-number">9.4.3.</span> <span class="toc-text">CGLib的BeanCopier</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%98%A0%E5%B0%84%E5%99%A8Dozer"><span class="toc-number">9.4.4.</span> <span class="toc-text">对象映射器Dozer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%98%A0%E5%B0%84%E5%99%A8ModelMapper"><span class="toc-number">9.4.5.</span> <span class="toc-text">对象映射器ModelMapper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%98%A0%E5%B0%84%E5%99%A8Orika"><span class="toc-number">9.4.6.</span> <span class="toc-text">对象映射器Orika</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%98%A0%E5%B0%84%E5%99%A8JMapper"><span class="toc-number">9.4.7.</span> <span class="toc-text">对象映射器JMapper</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%98%A0%E5%B0%84%E5%99%A8Selma"><span class="toc-number">9.4.8.</span> <span class="toc-text">对象映射器Selma</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%98%A0%E5%B0%84%E5%99%A8MapStruct"><span class="toc-number">9.4.9.</span> <span class="toc-text">对象映射器MapStruct</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8Excel%E6%93%8D%E4%BD%9C%E7%9B%B8%E5%85%B3%E5%BA%93"><span class="toc-number">10.</span> <span class="toc-text">常用Excel操作相关库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Excel"><span class="toc-number">10.1.</span> <span class="toc-text">Excel</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Excel%E7%AE%80%E4%BB%8B"><span class="toc-number">10.1.1.</span> <span class="toc-text">Excel简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Excel%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-number">10.1.2.</span> <span class="toc-text">Excel相关概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Java%E6%93%8D%E4%BD%9CExcel%E5%B8%B8%E8%A7%81%E6%96%B9%E5%BC%8F"><span class="toc-number">10.1.3.</span> <span class="toc-text">Java操作Excel常见方式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Apache-POI"><span class="toc-number">10.2.</span> <span class="toc-text">Apache POI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Apache-POI%E7%AE%80%E4%BB%8B"><span class="toc-number">10.2.1.</span> <span class="toc-text">Apache POI简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Apache-POI%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96"><span class="toc-number">10.2.2.</span> <span class="toc-text">Apache POI相关依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Apache-POI%E7%9B%B8%E5%85%B3%E7%B1%BB%E5%BA%93"><span class="toc-number">10.2.3.</span> <span class="toc-text">Apache POI相关类库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Apache-POI%E6%93%8D%E4%BD%9CExcel%E5%B8%B8%E7%94%A8%E7%9A%84%E7%B1%BB"><span class="toc-number">10.2.4.</span> <span class="toc-text">Apache POI操作Excel常用的类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Apache-POI%E5%AF%BC%E5%85%A5Excel"><span class="toc-number">10.2.5.</span> <span class="toc-text">Apache POI导入Excel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Apache-POI%E5%AF%BC%E5%87%BAExcel"><span class="toc-number">10.2.6.</span> <span class="toc-text">Apache POI导出Excel</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#EasyPOI"><span class="toc-number">10.3.</span> <span class="toc-text">EasyPOI</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#EasyPOI%E7%AE%80%E4%BB%8B"><span class="toc-number">10.3.1.</span> <span class="toc-text">EasyPOI简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EasyPOI%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96"><span class="toc-number">10.3.2.</span> <span class="toc-text">EasyPOI相关依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EasyPOI%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="toc-number">10.3.3.</span> <span class="toc-text">EasyPOI常用注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EasyPOI%E5%AF%BC%E5%85%A5Excel"><span class="toc-number">10.3.4.</span> <span class="toc-text">EasyPOI导入Excel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EasyPOI%E5%AF%BC%E5%87%BAExcel"><span class="toc-number">10.3.5.</span> <span class="toc-text">EasyPOI导出Excel</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#EasyExcel"><span class="toc-number">10.4.</span> <span class="toc-text">EasyExcel</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#EasyExcel%E7%AE%80%E4%BB%8B"><span class="toc-number">10.4.1.</span> <span class="toc-text">EasyExcel简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EasyExcel%E7%9B%B8%E5%85%B3%E4%BE%9D%E8%B5%96"><span class="toc-number">10.4.2.</span> <span class="toc-text">EasyExcel相关依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EasyExcel%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="toc-number">10.4.3.</span> <span class="toc-text">EasyExcel常用注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EasyExcel%E7%9B%91%E5%90%AC%E5%99%A8"><span class="toc-number">10.4.4.</span> <span class="toc-text">EasyExcel监听器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EasyExcel%E5%AF%BC%E5%85%A5Excel"><span class="toc-number">10.4.5.</span> <span class="toc-text">EasyExcel导入Excel</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EasyExcel%E5%AF%BC%E5%87%BAExcel"><span class="toc-number">10.4.6.</span> <span class="toc-text">EasyExcel导出Excel</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8JSON%E7%9B%B8%E5%85%B3%E5%BA%93"><span class="toc-number">11.</span> <span class="toc-text">常用JSON相关库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#JSON"><span class="toc-number">11.1.</span> <span class="toc-text">JSON</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JSON%E7%AE%80%E4%BB%8B"><span class="toc-number">11.1.1.</span> <span class="toc-text">JSON简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%E8%A7%84%E5%88%99"><span class="toc-number">11.1.2.</span> <span class="toc-text">基本语法规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E7%9A%84-JSON-%E5%BA%93"><span class="toc-number">11.1.3.</span> <span class="toc-text">常用的 JSON 库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSON-%E5%BA%93%E6%80%A7%E8%83%BD%E5%AF%B9%E6%AF%94"><span class="toc-number">11.1.4.</span> <span class="toc-text">JSON 库性能对比</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E8%B5%84%E6%96%99"><span class="toc-number">11.1.5.</span> <span class="toc-text">相关资料</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSON%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8EJava%E4%B8%AD%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%BA%92%E7%9B%B8%E8%BD%AC%E6%8D%A2"><span class="toc-number">11.2.</span> <span class="toc-text">JSON字符串与Java中字符串互相转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Fastjson"><span class="toc-number">11.2.1.</span> <span class="toc-text">使用Fastjson</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Jackson"><span class="toc-number">11.2.2.</span> <span class="toc-text">使用Jackson</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Gson"><span class="toc-number">11.2.3.</span> <span class="toc-text">使用Gson</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSON%E6%95%B0%E7%BB%84%E4%B8%8EJava%E4%B8%ADList%E9%9B%86%E5%90%88%E4%BA%92%E7%9B%B8%E8%BD%AC%E6%8D%A2"><span class="toc-number">11.3.</span> <span class="toc-text">JSON数组与Java中List集合互相转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Fastjson-1"><span class="toc-number">11.3.1.</span> <span class="toc-text">使用Fastjson</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Jackson-1"><span class="toc-number">11.3.2.</span> <span class="toc-text">使用Jackson</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Gson-1"><span class="toc-number">11.3.3.</span> <span class="toc-text">使用Gson</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSON%E5%AF%B9%E8%B1%A1%E4%B8%8EJava%E4%B8%ADMap%E9%9B%86%E5%90%88%E4%BA%92%E7%9B%B8%E8%BD%AC%E6%8D%A2"><span class="toc-number">11.4.</span> <span class="toc-text">JSON对象与Java中Map集合互相转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Fastjson-2"><span class="toc-number">11.4.1.</span> <span class="toc-text">使用Fastjson</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Jackson-2"><span class="toc-number">11.4.2.</span> <span class="toc-text">使用Jackson</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Gson-2"><span class="toc-number">11.4.3.</span> <span class="toc-text">使用Gson</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JSON%E5%AF%B9%E8%B1%A1%E4%B8%8EJava%E4%B8%AD%E5%AE%9E%E4%BD%93%E7%B1%BB%E4%BA%92%E7%9B%B8%E8%BD%AC%E6%8D%A2"><span class="toc-number">11.5.</span> <span class="toc-text">JSON对象与Java中实体类互相转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Fastjson-3"><span class="toc-number">11.5.1.</span> <span class="toc-text">使用Fastjson</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Jackson-3"><span class="toc-number">11.5.2.</span> <span class="toc-text">使用Jackson</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Gson-3"><span class="toc-number">11.5.3.</span> <span class="toc-text">使用Gson</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%B8%B8%E7%94%A8%E6%97%A5%E5%BF%97%E7%9B%B8%E5%85%B3%E5%BA%93"><span class="toc-number">12.</span> <span class="toc-text">常用日志相关库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E6%A6%82%E8%BF%B0"><span class="toc-number">12.1.</span> <span class="toc-text">日志概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E7%AE%80%E4%BB%8B"><span class="toc-number">12.1.1.</span> <span class="toc-text">日志简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E4%BD%9C%E7%94%A8"><span class="toc-number">12.1.2.</span> <span class="toc-text">日志作用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB"><span class="toc-number">12.1.3.</span> <span class="toc-text">日志级别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E5%BA%93"><span class="toc-number">12.2.</span> <span class="toc-text">日志库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E5%BA%93%E7%AE%80%E4%BB%8B"><span class="toc-number">12.2.1.</span> <span class="toc-text">日志库简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E7%B3%BB%E7%BB%9F"><span class="toc-number">12.2.2.</span> <span class="toc-text">日志系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E9%97%A8%E9%9D%A2"><span class="toc-number">12.2.3.</span> <span class="toc-text">日志门面</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E5%BF%97%E5%BA%93%E4%BD%BF%E7%94%A8"><span class="toc-number">12.3.</span> <span class="toc-text">日志库使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E4%B8%80%EF%BC%9ASLF4J-Logback"><span class="toc-number">12.3.1.</span> <span class="toc-text">方案一：SLF4J + Logback</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%A1%88%E4%BA%8C%EF%BC%9ACommons-Logging-Log4j2"><span class="toc-number">12.3.2.</span> <span class="toc-text">方案二：Commons Logging + Log4j2</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E7%9B%B8%E5%85%B3"><span class="toc-number">13.</span> <span class="toc-text">单元测试相关</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%A6%82%E6%8B%AC"><span class="toc-number">13.1.</span> <span class="toc-text">单元测试概括</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E7%AE%80%E4%BB%8B"><span class="toc-number">13.1.1.</span> <span class="toc-text">单元测试简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Java%E5%B8%B8%E7%94%A8%E7%9A%84%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6"><span class="toc-number">13.1.2.</span> <span class="toc-text">Java常用的单元测试框架</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JUnit4"><span class="toc-number">13.2.</span> <span class="toc-text">JUnit4</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JUnit4%E7%AE%80%E4%BB%8B"><span class="toc-number">13.2.1.</span> <span class="toc-text">JUnit4简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JUnit4%E6%B3%A8%E8%A7%A3"><span class="toc-number">13.2.2.</span> <span class="toc-text">JUnit4注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JUnit4%E6%96%AD%E8%A8%80"><span class="toc-number">13.2.3.</span> <span class="toc-text">JUnit4断言</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JUnit5"><span class="toc-number">13.3.</span> <span class="toc-text">JUnit5</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JUnit5%E7%AE%80%E4%BB%8B"><span class="toc-number">13.3.1.</span> <span class="toc-text">JUnit5简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JUnit5%E6%B3%A8%E8%A7%A3"><span class="toc-number">13.3.2.</span> <span class="toc-text">JUnit5注解</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TestNG"><span class="toc-number">13.4.</span> <span class="toc-text">TestNG</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mockito"><span class="toc-number">13.5.</span> <span class="toc-text">Mockito</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PowerMock"><span class="toc-number">13.6.</span> <span class="toc-text">PowerMock</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="./2023/01/01/CSS/" title="CSS笔记"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="./2023/01/01/CSS/CSS.png" onerror='this.onerror=null,this.src="./img/404.png"' alt="CSS笔记"></a><div class="content"><a class="title" href="./2023/01/01/CSS/" title="CSS笔记">CSS笔记</a><time datetime="2022-12-31T16:00:00.000Z" title="发表于 2023-01-01 00:00:00">2023-01-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="./2023/01/01/HTML/" title="HTML笔记"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="./2023/01/01/HTML/HTML.png" onerror='this.onerror=null,this.src="./img/404.png"' alt="HTML笔记"></a><div class="content"><a class="title" href="./2023/01/01/HTML/" title="HTML笔记">HTML笔记</a><time datetime="2022-12-31T16:00:00.000Z" title="发表于 2023-01-01 00:00:00">2023-01-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="./2023/01/01/JavaScript/" title="JavaScript笔记"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="./2023/01/01/JavaScript/JavaScript.png" onerror='this.onerror=null,this.src="./img/404.png"' alt="JavaScript笔记"></a><div class="content"><a class="title" href="./2023/01/01/JavaScript/" title="JavaScript笔记">JavaScript笔记</a><time datetime="2022-12-31T16:00:00.000Z" title="发表于 2023-01-01 00:00:00">2023-01-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="./2023/01/01/Linux/" title="Linux笔记"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="./2023/01/01/Linux/Linux.png" onerror='this.onerror=null,this.src="./img/404.png"' alt="Linux笔记"></a><div class="content"><a class="title" href="./2023/01/01/Linux/" title="Linux笔记">Linux笔记</a><time datetime="2022-12-31T16:00:00.000Z" title="发表于 2023-01-01 00:00:00">2023-01-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="./2023/01/01/JavaWeb/" title="JavaWeb笔记"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="./2023/01/01/JavaWeb/JavaWeb.png" onerror='this.onerror=null,this.src="./img/404.png"' alt="JavaWeb笔记"></a><div class="content"><a class="title" href="./2023/01/01/JavaWeb/" title="JavaWeb笔记">JavaWeb笔记</a><time datetime="2022-12-31T16:00:00.000Z" title="发表于 2023-01-01 00:00:00">2023-01-01</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By wen</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="./js/utils.js"></script><script src="./js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk(Object.assign({
      clientID: '701b8bc001a40a760558',
      clientSecret: 'a51b436adc471c3949a8f41be05c2d58cccab10a',
      repo: 'Hexo-Butterfly-Comment',
      owner: 'wen53231323',
      admin: ['wen53231323'],
      id: '613cca582696360a671f9f1761e8a6a9',
      updateCountCallback: commentCount
    },null))

    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    getCSS('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css')
    getScript('https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.js').then(initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !true) {
  if (true) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: 'VI32wmbmMoxvlhpTpoDBNeOk-MdYXbMMI',
      appKey: 'oFstfBFkCQIkjuk4ibCpbGqz',
      avatar: 'monsterid',
      serverURLs: 'https://vi32wmbm.api.lncldglobal.com',
      emojiMaps: "",
      path: window.location.pathname,
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Gitalk' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span> 数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="./js/search/local-search.js"></script></div></div></body></html>